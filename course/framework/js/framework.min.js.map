{"version":3,"sources":["plugins.js","Alert.js","AssessmentController.js","AnimationController.js","AudioController.js","AvailableClasses.js","UIController.js","ComponentController.js","ContentController.js","CustomDataController.js","GameAPIController.js","FeedbackController.js","CourseEvent.js","DebugController.js","InlineSVG.js","InstructionController.js","Modal.js","NavigationButton.js","NavigationController.js","NavigationEvents.js","Slide.js","StorageController.js","StorageComms.js","SearchController.js","TitleController.js","Utility.js","HTMLUtility.js","ResponsiveUtility.js","ActionUtility.js","SVGUtility.js","CanvasController.js","CourseData.js","XMLData.js","Main.js","LiveEditController.js","CourseUtility.js"],"names":["noop","method","methods","length","console","window","jQuery","fn","cssNumber","prop","v","parseInt","this","css","isNaN","disable","each","undefined","$","attr","addClass","navigationButton","DISABLED","enable","removeClass","$alertModal","$el","options","hiddenMethod","init","_options","defaults","title","message","confirm","cancel","class","size","onConfirm","onCancel","html","log","extend","getAlertHTML","classes","append","split","push","find","join","show","hide","bind","on","onShow","resize","Alert","modal","e","document","activeElement","off","onHide","focus","apply","Array","prototype","slice","call","arguments","error","htm","AssessmentController","_id","_config","self","id","config","xmlID","assessment","SELECTED","CORRECT","qVars","ANSWERS","ATTEMPTS","MIN","MAX","SCORE","data","questions","correct","num","score","min","max","raw","scaled","perc","pass","moduleBankArray","numQuestions","questionBankArray","banks","passingPerc","scoring","assessmentXMLData","gameAPIData","getData","reduceData","expandData","updateFromLMSData","dataObj","calculateScore","setupAssessment","assessmentBankData","courseData","i","numToDraw","bank","draw","bankArray","moduleNo","module","j","question","b","q","randomArray","concat","splice","Math","floor","random","shuffle","initQuestion","qNum","answers","getAnswers","storeAnswers","selectedAnswers","questionXMLData","getQuestionXMLData","attemptsData","correctCount","storeAllAttempts","incorrectCount","isCorrectArray","maxScore","questionOptionScore","optionScore","questionXMLDataOptions","component","option","ignoreIncorrect","indexOf","storageController","setAssessmentData","parseFloat","toFixed","round","updateMenu","trigger","assessmentConfig","scormScoreAssementID","setScore","checkCourseComplete","getBanksScores","bankNo","total","getBankScore","obj","isBankComplete","bankScoreObj","isModuleBankComplete","isComplete","showMarkingEnabled","showMarking","showAnswersEnabled","showAnswer","feedbackEnabled","feedback","getQuestionData","getQuestionDataForNum","getQuestionXMLDataForNum","getBankXMLData","bNum","checkAssessmentAgainstObject","AnimationController","onInView","event","visible","$anim","animIndex","anims","inview","setAnimDelays","animationStarted","anim","started","triggerHandler","duration","setTimeout","slideObj","instruction","animated","componentIndex","contentController","getSlideForElement","componentController","getComponentObject","dataNode","changeInstruction","groups","totalDelay","count","thisDelay","animGroup","group","courseConfig","animate","delay","sequence","stagger","htmlUtils","addAnimationDelayCSS","clearTimeout","delayTimeout","responsiveUtils","isElementHidden","setupAnimations","$elements","$ref","findAnims","index","animGroupIndex","utils","css_time_to_milliseconds","animDelay","$closestHiddenElement","getClosestHiddenElement","is","hasClass","eq","triggerAnimation","el","gsap","nullTargetWarn","AudioController","isMuted","audioObj","useCreateJS","loadAudio","name","file","audio","createjs","Sound","registerSound","Audio","onended","playAudio","loadComplete","play","muted","playAudioFromStart","currentTime","playNewAudio","newAudio","cloneNode","remove","muteAudio","x","setAudio","getAudio","addEventListener","AvailableClasses","templates","CUSTOM","TemplateCUSTOM","components","accordion","ComponentAccordion","button","ComponentButton","carousel","ComponentCarousel","flipcard","ComponentFlipcard","ComponentGroup","image","ComponentImage","ComponentInstruction","mcqtawa","ComponentMcqtawa","media","ComponentMedia","menu","ComponentMenu","separator","ComponentSeparator","text","ComponentText","callout","ComponentCallout","headerimage","ComponentHeaderimage","panel","ComponentPanel","tab","ComponentTab","gsfmenu","ComponentGSFMenu","header","ComponentHeader","buildupcarousel","ComponentBuildupCarousel","storycarousel","ComponentStoryCarousel","plusbutton","ComponentPlusButton","highchart_bar","ComponentHighchart_Bar","highchart_pie","ComponentHighchart_Pie","dropdownsequence","ComponentDropdownsequence","parallaximage","ComponentParallaxImage","parallaxheader","ComponentParallaxHeader","UIController","menuArray","navigationBtns","setupUI","getMenu","$navmenubar","navigationConfig","style","numPerRow","progresshtmlStr","htmlStr","componentConfig","progress","navData","color","submenu","page","slide","preventDefault","not","slideUp","parent","toggleClass","slideDown","navigationController","changePageToData","$navmenubarInner","hover","className","getHTMLText","settings","navigation","getAccessibleLabel","getLogo","getLogoAlt","$btn","toUpperCase","btnTitle","$btnIcon","timeline","svgUtils","createSVG","animateSVG","pause","navigationBtnTimelines","audioIconSVGTimeline","tooltip","numLanguages","languageConfig","languages","active","code","language","handleClickAndPress","$this","currentTarget","loadLanguage","footerHTML","Text","footer","year","Date","getFullYear","copyright","Modal","incompletePageMessage","messages","contentLocked","HELP_BUTTON","showHelp","RESOURCE_BUTTON","showResources","MENU_BUTTON","showMenu","courseEvent","DEVICE_BREAKPOINT_CHANGED","deviceBreakpointChanged","windowResize","getCurrentViewport","prevViewport","updateDeviceSpecificClasses","breakpointChanged","resizeContent","checkForScroll","showNav","hideNav","reverse","updateUI","search","searchController","updateSearch","completeCount","numValidSlides","pageArray","slides","isValidRole","roles","isSlideComplete","$progressSection","isModuleActive","isModuleValidForRole","isModuleComplete","moduleIndex","courseProgress","getProgressData","adjustments","assessments","complete","attempts","setProgressMeasure","menuModuleNum","force","modalData","help","resource","ComponentController","$slide","getComponents","args","$components","$component","slideNum","add","componentObjectsArray","saveDataObj","setupDone","firstIncompleteComponentIndex","lastVisibleComponentIndex","elementsToResize","_slideObj","getSaveData","generateComponents","node","recurseXML","term","callback","createComponent","displayComponents","isComponentValid","componentDisplayed","checkComponentsComplete","setupComponents","componentsToSetup","isSetup","getComponentRoles","setupComponent","$childComponents","isComponentValidForRole","childIndex","parentComponent","childComponents","actions","action","actionUtils","setupActions","actionRef","xsCloneRevealAlongside","cloneID","$clone","clone","after","thisComponent","setComponentComplete","fireActions","closest","managesCompletion","draggable","revert","zIndex","enableOnComplete","currentPage","isComponentShowByCompletion","isComponentVisibleByCompletion","matchHeight","key","replace","checkComponentAnimsComplete","setupComplete","componentName","componentData","componentObj","componentClassName","isComponentAvailable","lowercaseComponentName","toLowerCase","nodeName","getClasses","getAttributes","getHTML","getAbilities","removeComponent","unloadContent","setSaveData","unload","matchComponentHeights","resumeContent","resume","checkComponentsSatisfied","$okBtn","getFirstIncompleteComponent","hidden","checkComponentComplete","showOnComplete","visibleOnComplete","revealComponents","hideOnComplete","invisibleOnComplete","fadeOut","slideComponentsComplete","animsComplete","valid","isComponentHidden","revealOnComponentsCompleteArray","$componentAnims","filter","toNumberArray","isValid","forceComplete","completeOnChildrenComplete","childComponent","isComponentRevealedByCompletion","completeActions","COMPONENT_COMPLETE","otherComponent","effect","effects","animationController","hideComponents","revealComponentsWithEffect","showChildComponents","scrollIntoView","hideComponentsWithEffect","hideAndRevealComponents","hideOpts","revealOpts","showHiddenComponents","parents","addBack","retry","checkAnswers","feedbackArr","xmlNode","getActions","showOnComponentsComplete","visibleOnComponentsComplete","getComponentIndexes","str","componentIndexes","strArr","isArray","manual","$instructionComponent","instructionComponent","saveData","isEmptyObject","minY","maxY","componentTop","offset","top","getFirstComponentInView","checkComponentInView","getComponentInfo","height","outerHeight","componentInfo","scrollTop","matchElementHeights","ContentController","$pageContainer","$pageBackground","instructionController","change","slideArray","isHiddenForUser","empty","prevPage","loadContent","PAGE_LOAD_START","navXMLData","getPageData","pageIndex","langXMLData","getPageLangData","return","allowReturn","imgPath","bkgpath","getImagePath","numSlides","Slide","hiddenForCurrentRole","langs","currentLanguage","hiddenForCurrentLanguage","lastSlideNum","alert","showContent","loadedCount","loaded","slideTitle","moduleData","getModuleData","moduleLangData","getModuleLangData","focusSet","fadeIn","uiController","firstIncompleteSlide","updateCourseTitle","checkAndShowContent","locationHash","scrollElementIntoView","gotoSlide","titleController","$modals","$popovers","type","click","modalIndex","modals","popoverID","popoverData","courseSharedData","getSharedData","popovers","popover","placement","content","popoverContent","PAGE_LOAD_COMPLETE","checkPageComplete","pageComplete","componentTriggered","shownByComponent","mandatory","changePage","navbarHeight","debug","scrollSlideIntoView","showSlide","hideSlide","hideContent","getFirstUnloadedSlide","checkFirstIncompleteComponentInView","found","warn","slideIndex","getComponentControllerForElement","SLIDE_LOAD_COMPLETE","SLIDE_COMPLETE","CustomDataController","setData","results","setCustomData","objStr","value","_","set","getCustomData","get","getDataStr","JSON","parse","GameAPIController","gameAPIAnswers","getGameAPIAnswer","questionNum","gameAPIConfig","enabled","getGameAPIAnswers","saveAnswerToGameAPI","responseArray","callbackFunction","user_id","studentID","question_id","response","toString","email","course_name","LaunchConfig","course","variation","defaultLanguage","version","ajax","url","rootURL","success","xhr","textStatus","getAnswerFromGameAPI","errorThrown","questionAPIData","getAnswersFromGameAPI","FeedbackController","$feedbackAnim","initFeedback","$feedback","showFeedback","revealType","start","showElementContents","hideFeedback","CourseEvent","PAGE_CHANGE","SLIDE_SHOW_CONTENT","SLIDE_HIDE_CONTENT","COURSE_DATA_LOAD_COMPLETE","CONTENT_DATA_LOAD_COMPLETE","CURRENT_CONTENT_DATA_LOAD_COMPLETE","XMLDATA_LOAD_START","XMLDATA_LOAD_COMPLETE","TEMPLATES_LOAD_START","TEMPLATES_LOAD_COMPLETE","XMLDATA_LANG_LOAD_START","XMLDATA_LANG_LOAD_COMPLETE","PAGE_REPLAY","SLIDE_LOAD_START","PREV_BTN_CLICK","NEXT_BTN_CLICK","PLAYED_MEDIA","PAUSED_MEDIA","ENDED_MEDIA","CLEAR_MEDIA","AUDIO_ON","AUDIO_OFF","TRANSCRIPT_ON","TRANSCRIPT_OFF","TRANSCRIPT_UPDATE","CLOSECOURSE_YES","CLOSECOURSE_NO","PAGE_PLAY_EXTERNAL","PAGE_PAUSE_EXTERNAL","ON_BRANDING_RENDER_COMPLETE","KEY_UP","KEY_DOWN","PAGE_SWIPE","VIDEO_COMPLETE","DebugController","opts","$debug","$slideSelect","liveEditConfig","cdn","updatesOnly","rolesArray","getRoles","abbrArray","map","abbr","element","slideRoleArray","k","matchingItems","item","prefix","some","startsWith","uniq","returnArray","xmlPathArray","xmlPath","ref","$option","pageLock","replayPage","animDebugURLParameter","getURLParameter","update","searchParams","location","pageFound","langFound","tmp","protocol","host","pathname","template","currentPos","val","showDebug","arg","hideDebug","InlineSVG","exit","bridge","bulb","bullhorn","compass","computer","datachart","eye","magnify","microscope","morterboard","pencil","plaster","quality","target","thumbsdown","thumbsup","warning","arrow-down","arrow-up","bullhornmute","casestudy","checklist_warning","chevron-down","chevron-left","chevron-right","chevron-up","clipboard","cloud","facehappy","facesad","faceunsure","flag","flip","gears","handshake","ldquo","padlock","presentation","rdquo","reference","rewind","speechboxes","stopcross","stophand","tickdisc","webcast","InstructionController","$instruction","_text","prevInstruction","fadeTo","onClose","getModalHTML","btn_Close","$helpItems","maxHeight","relatedTarget","NavigationButton","TRANSCRIPT_ON_CLASS","TRANSCRIPT_OFF_CLASS","AUDIO_ON_CLASS","AUDIO_OFF_CLASS","DEBUG_NEXT_BUTTON","DEBUG_BACK_BUTTON","LOGO_BUTTON","HOME_BUTTON","REPLAY_BUTTON","NEXT_BUTTON","BACK_BUTTON","GLOSSARY_BUTTON","EXIT_BUTTON","LANGUAGE_BUTTON","SEARCH_BUTTON","SEARCHGO_BUTTON","AUDIO_BUTTON","SEARCH_INPUT","CONTACT_BUTTON","DOWNLOAD_COC_BUTTON","updateNavButtons","getBtnText","hideNavButton","glossary","btnName","nav","buttons","bottom","NavigationController","ALLOW_PREV_PAGE_CHANGE","currentSlide","defaultRoles","historyArray","introModuleNum","menuPageIndex","ALLOW_NEXT_PAGE_CHANGE","getIntroModuleNum","getMenuModuleNum","slideCount","getNumModules","moduleRoles","getNumPages","pageData","pageRoles","slidesArray","getNumSlides","slideData","getSlideData","getXMLPath","slideLanguages","activeLanguages","slideRoles","removeLanguages","l","xmlFilename","substr","lastIndexOf","xmlLoaded","getTemplateName","xmlAttributeToJSON","pageObj","optional","completeModuleOnCompletion","$scrollStops","findElementTotalOffset","getNavbarHeight","autoScroll","state","_addToHistory","liveEditReq","liveEditLoaded","liveEditController","allowNavigation","addToHistory","allowPreviousDefaultAction","allowNextDefaultAction","pulsateNextButton","isModuleLocked","developerUnlock","stateObj","canWeReturnToPage","isPageComplete","multiLanguage","multiLanguageOnly","browserNavigation","urlQueryStr","substring","decodedURI","decodeURI","urlQueryObj","href","param","getCourseTitle","history","replaceState","pushState","googleAnalytics","gtag","gtagID","page_path","anonymize_ip","navbar","hideNavOnFirstPage","setLocation","initRoles","role","default","roleURLParameter","Number","setRoles","constructor","getWordsByFragment","isModulePageValidForRole","isPageValidForRole","getFirstPageValidForRole","getLastPageValidForRole","changePageToFile","debugNextPage","nextPageIndex","debugPreviousPage","prevPageIndex","nextPage","redirectToMenuOnModuleComplete","previousPage","prevPageNum","useHistory","pop","gotoModule","gotoPage","enableNextButton","updateBookmark","getBookmark","updateData","confirmExitCourse","messageRef","getMessageText","addTrackDataTrace","userInitiatedWindowClose","exitCourse","launchInNewWindow","close","block","viewportBottom","elOffsetTop","elBottom","getViewportTop","elHeight","y","offsetY","autoKill","ease","to","scrollTo","onComplete","getDocHeight","componentCheck","getModulePageIndex","courseTitle","NavigationEvents","onDebugNextClick","onDebugBackClick","onNextClick","onReplayClick","onBackClick","onExitClick","onAudioClick","keydown","keys","keyCode","lmsLogEnabled","islogPop","loadCommunicationWin","keyup","audioController","btnText","$audioTooltip","loadTemplateHTML","templateObject","load","getURL","status","preloadImage","src","preloadImagesArray","slideLoaded","checkComplete","reentryComplete","viewed","slideCompletionDelayPassed","templateComplete","componentsComplete","event_category","event_label","slideID","setSlideComplete","slideCompletionDelay","fullheight","_slideNum","getSlideLangData","debugController","testConnection","slideReady","contentBackground","setSlideBackground","bkgImage","imageSrc","ariaLabel","$heading","first","imagePreload","imgpreload","all","slideContentComplete","instructionText","setSlideVisited","slideDisplayed","hideElementContents","setSlideData","updateLayout","isLastSlide","xmlRef","remainingBreakpoints","Object","getBreakpoints","img","breakpoints","addSlideDeviceBackground","difference","$bkgContainer","imgXMLRef","classArr","bgPosition","bgSize","$bkgElement","path","cssObj","backgroundImage","position","fixed","backgroundPosition","backgroundSize","StorageController","initalTime","lmsConnected","getScormTime","storageAPI","lmsDataToSave","inExitProcess","unloaded","SCORM_1_2","SCORM_2004","LOCALSTORAGE","saveTimeout","SESSION_TIME","LESSON_LOCATION","LESSON_STATUS","SUCCESS_STATUS","SUSPEND_DATA","STUDENT_ID","STUDENT_NAME","STUDENT_LANG","STUDENT_AUDIO","SCORE_MAX","SCORE_MIN","SCORE_SCALED","suspendDataTimeout","commitObj","completion","captions","bookmark","slideProgress","locked","cmi","o","custom","system","getFromStorageAPI","storage","complianceType","checkConnectionToLMS","getCourseKey","localStorage","getItem","setToStorageAPI","newDataToSet","setItem","setNewDataToStorageAPI","uid","connection","isActive","lmsConnectionError","unloadHandler","timeSpent","isMailto","isTel","t","toISOString","shift","getTime","save","quit","time","intTotalMilliseconds","Seconds","Minutes","ScormTime","LessonDuration","hr","sec","HUNDREDTHS_PER_MONTH","HUNDREDTHS_PER_DAY","HundredthsOfASecond","Years","Months","Days","HUNDREDTHS_PER_HOUR","Hours","HUNDREDTHS_PER_MINUTE","HUNDREDTHS_PER_SECOND","temp","ms","ZeroPad","intNum","intNumDigits","strTemp","String","intLen","studentName","isLastSlideComplete","setLanguage","lang","getLanguage","audioLevel","setCaptions","getCaptions","getLocation","_pageIndex","_slideIndex","isSlideVisited","updateSubmenus","setSubmenuPageComplete","initModuleMenu","_moduleIndex","inMenu","booleanToInt","setModuleActive","initModuleMandatory","isMandatory","setModuleMandatory","isModuleMandatory","initModuleLocked","isLocked","setModuleLocked","getMenuData","pageHasSetModuleComplete","checkMandatory","pagesComplete","courseCompletion","scoreComplete","scormScoreAssessmentID","completionSlide","setsCourseComplete","setComplete","isCourseComplete","customDataController","getSystemInfoObject","stringify","jsonData","slideNavXMLData","getCompletionDate","isPassed","getHistory","setHistory","getScore","progressObj","PROGRESS_MEASURE","getComplete","completeStatus","getTodayDate","evaluateVariable","setSuccess","saveDataToStorageAPI","getSuccess","successStatus","loc","m","p","s","saveDataToStorage","getStudentID","setStudentName","getStudentName","student_name_arr","trim","getStudentFirstName","setInteraction","interactionObj","dtm","Year","Month","Day","Hour","Minute","correctStr","questionId","interactions","interactionCount","qText","unique","correctPatterns","getCorrectInteractionPatterns","learnerResponse","adjustInteractionPattern","timestamp","getMonth","getDate","getHours","getMinutes","Second","getSeconds","getCurrentTime","patterns","combinations","get2dCombinations","qType","returnStr","getInteractionData","property","setObjective","objectiveId","description","objectives","objectiveCount","objectiveStatus","pipwerks","SCORM","err","completionStatus","onbeforeunload","onunload","StorageComms","commsLogStr","author","commsLogObj","trace","func","addTrace","msg","d","date","communicationWin","updateLog","getLogString","addFunc","paramValue","resultText","result","commCount","getSystemInfoStr","getLogObj","SearchController","terms","resultsArray","searchItemClicked","getEscaped","highlightOnPage","removeHighlights","rgxp","RegExp","contents","nodeType","match","blur","handleSearch","searchText","minSearchLength","clearSearch","searchTerm","searchObj","prevModule","prevSlide","textStr","snippets","escapedString","escaped","reduce","accStr","nextTerm","regExp","wordArray","matchPositions","sliceEnd","snippetComponents","sliceStart","snippet","prepend","initialLimit","unshift","escapedTerm","noresults","termArray","_childorder","newObj","nodeData","pos","TitleController","$title","$titleText","stop","Utility","filterText","replaceAll","loadXMLData","dataType","xml","pXml","xmlToJSON","RootName","loadingError","updateXMLText","cnode","hasChildNodes","nodeCount","childNodes","n","nodeValue","exec","capitalizeFirstLetter","charAt","imgStr","coursePath","testConnectionCallback","connectionError","updateManager","getFullPath","startPath","getLangPath","getMediaPath","D","body","scrollHeight","documentElement","offsetHeight","clientHeight","myfunc","variable","commandArr","command","invoke","checkConditionStr","isSatisfied","extractFromConditionStr","extractFromLodashConditionStr","operator","leftOperand","rightOperand","lt","lte","gt","gte","parenthesesStr","updateErrorMessages","getErrorText","sanitize_escape_map","&","<",">","\"","'","/","chromeSecurityError","browserSupport","time_string","milliseconds","unit","fragment","regexp","removeWordsByFragment","getLongestWord","a","closestNumber","array","ans","minDiff","abs","now","pageYOffset","oleft","otop","offsetParent","offsetLeft","offsetTop","left","checkArraysEqual","selector","children","sort","detach","appendTo","sets","firstSet","combNMinusOne","setHeightToRemainingViewport","excludeBreakpointsArray","stringToBoolean","string","Boolean","intToBoolean","sanitize","c","raphaelGetTextDetail","paper","fontSize","maxWidth","words","line","testLine","getBBox","width","raphaelAddText","textObj","loadFile","fileObj","head","createElement","onload","onreadystatechange","readyState","onerror","getElementsByTagName","rel","appendChild","matchElementWidths","$els","breakPointsToAvoidArray","outerWidth","includeMargin","getOuterHeightAsFloat","computedStyle","getComputedStyle","marginTop","marginBottom","onClickOpenLink","openLink","open","externalLinks","windowName","screenWidth","screen","availWidth","screenHeight","availHeight","propertiesArr","properties","propertyArr","windowProperties","fitTextToElements","minFontSize","sizeAdjusted","scrollWidth","cssTransitions","thisFontSize","transitionDuration","transitionDelay","$textEl","calculateReadTime","ceil","readspeed","chars","getUrlExtension","lastDotIndex","HTMLUtility","customNodeAction","customNodeActionTerm","getID","fullwidth","colStr","getBootstrapColumnsStrForNode","generateHTML","textData","dbid","extract","$1","getLink","extractHTML","getStyles","_xml","stylestr","stylesObject","alphabetArray","recurseData","getCSSString","idStr","classStr","injectionFound","useModuleTitle","usePageTitle","useSlideTitle","inject","shared","dataFormat","updateTextVariables","right","minWidth","minHeight","padding","paddingTop","paddingBottom","paddingLeft","paddingRight","margin","marginLeft","marginRight","fontWeight","lineHeight","textAlign","border","borderTop","borderBottom","borderLeft","borderRight","display","float","backgroundColor","backgroundRepeat","backgroundAttachment","bkgColor","bkgRepeat","bkgPosition","bkgSize","bkgAttachment","getStyle","rolesArr","classArray","defaultAnim","animConfig","presets","getDeviceSpecificAttributes","classesObj","stylesObj","updateDeviceSpecificStyles","stylesToObject","regex","ariaHidden","removeClasses","secondsDelay","-webkit-animation-delay","-moz-animation-delay","-o-animation-delay","animation-delay","replaceClassesBasedOnTextDirection","top-left","top-right","bottom-left","bottom-right","left-top","right-top","classesChangedArr","cl","oldClass","newClass","hasDeviceSpecificClass","$anims","ResponsiveUtility","BOOTSTRAP_VERSION","BOOTSTRAP_EXACT_VERSION","viewport","currentBreakpoint","previousBreakpoint","hiddenClassesToCheck","_viewport","bootstrap4","xs","sm","md","lg","xlg","use","changed","current","resizeOverspillColumns","getHiddenClasses","colsObj","cols","getBootstrapColumnsClassStr","calculateChildBootstrapColumns","columns","columns_sm","isBreakpoint","breakpoint","isCurrentViewport","getPreviousViewport","$hiddenEl","parentsUntil","$col","$row","isFirstChild","direction","getHiddenClassesUpToBreakpoint","hiddenClasses","getVisibleClassesUpToBreakpoint","visibleClasses","ActionUtility","$target","applyAction","removePulses","$element","getModifiedInt","getSubmenuNextPage","nextPageObj","componentsArr","submitAnswers","componentIndexesToHide","componentIndexesToReveal","slideToggle","link","langPath","loadCertificateWin","createActionsArray","actionsObj","tmpActions","actionName","newValue","returnValue","SVGUtility","svgs","elType","svgName","$svg","TimelineLite","staggerFrom","drawSVG","from","opacity","morphSVG","Sine","easeInOut","rotation","transformOrigin","fill","preview","CanvasController","handleFileLoad","assets","isLoaded","loader","elements","soundInstance","createCanvas","setupCanvas","$canvas","stage","Stage","w","canvas","h","aspectRatio","container","Container","addChild","Ticker","framerate","loadSounds","manifest","sounds","isReady","registerSounds","loadManifest","completeCallback","LoadQueue","getBitmap","bitmap","Bitmap","getResult","addElement","updateElement","devicePixelRatio","getTransformedBounds","scale","removeAllChildren","removeAllEventListeners","enableDOMEvents","CourseData","xmlData","onXMLDataNavLoadComplete","onXMLDataLangLoadComplete","navXML","loadLanguageXML","langXML","submenus","_lang","compressXMLURLParameter","loadCompressedXML","xmlConvertedToJSON","XMLData","saveDataToFile","filename","blob","Blob","navigator","msSaveBlob","download","URL","createObjectURL","setAttribute","visibility","removeChild","loadCourseContent","loadContentXML","contentLoaded","createMenu","introModule","menuModule","getContactModuleNum","contactModule","getAllData","modNum","pageNum","moduleMandatory","menuObj","submenuRef","submenuIndex","pageInSubmenu","submenuObj","initSubmenu","submenuindex","addToSubmenu","addSubmenuNextPage","firstMandatoryModule","firstLockedModule","moduleLock","checkActive","linear","assessmentController","moduleIsOptional","moduleHasOptionalContent","items","next","done","pages","getSubmenu","getSubmenuForPage","isSubmenuComplete","isSubmenuItemComplete","itemIndex","client","logo","small","alt","errors","getSettings","linkURL","links","linkConfig","pathToData","pathStr","dataVar","pathArray","pathArrayToData","pathItem","getTextPaths","textPathArray","label","accessibility","getAriaProperty","ariaData","aria","loadNavigationXML","navPath","loadHelpXML","loadResourceXML","loadGlossaryXML","loadAssessmentXML","xmlLangLoadComplete","loadNextContentSlideXML","pageArrayIndex","currentModule","loadContentSlideXML","xmlPreload","loadContentSlideXMLComplete","debrandURLParameter","debrand","addPathToObject","nodesToIgnore","newPath","newDbid","defaultLangXML","contentData","contentXMLLoaded","_children","slideTitleObj","insertIntoXML","nodeToInsert","performInsert","insert","insertIndex","one","deleteFromXML","findInXML","attributeName","attributeValue","recurseFindInXML","loremArray","templateController","storageComms","navigationEvents","feedbackController","systemInfo","languageChangedPage","isBelowIE9","isBelowIE10","isIE11","isIE","usingPageURLParameter","infoText","initFramework","initUI","responsive","onUILoadComplete","loadCourseData","langURLParameter","newScript","analytics","firstChild","onCourseDataLoadComplete","loadFramework","gameAPIController","debugURLParameter","devURLParameter","pageLockURLParameter","moduleLockURLParameter","disableMouseRightClick","lessonLocation","pageURLParameter","hash","onContentDataLoadComplete","onCurrentPageContentDataLoadComplete","frameworkLoaded","getCertificateData","completionDateArr","month","completionDate","months","format","courseName","courseID","certificate","closeCommunicationWin","setTrackData","rootPath","ready","ResponsiveBootstrapToolkit","liveEditAllowed","contentDataLoadComplete","setupLiveEdit","initialized","getLiveEditScript","encodeURIComponent","script","CourseUtility","courseUtils"],"mappings":"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","file":"framework.min.js","sourcesContent":["// Avoid `console` errors in browsers that lack a console.\r\n(function () {\r\n    var method;\r\n    var noop = function () {};\r\n    var methods = [\r\n        'assert', 'clear', 'count', 'debug', 'dir', 'dirxml', 'error',\r\n        'exception', 'group', 'groupCollapsed', 'groupEnd', 'info', 'log',\r\n        'markTimeline', 'profile', 'profileEnd', 'table', 'time', 'timeEnd',\r\n        'timeStamp', 'trace', 'warn'\r\n    ];\r\n    var length = methods.length;\r\n    var console = (window.console = window.console || {});\r\n\r\n    while (length--) {\r\n        method = methods[length];\r\n\r\n        // Only stub undefined methods.\r\n        if (!console[method]) {\r\n            console[method] = noop;\r\n        }\r\n    }\r\n}());\r\n\r\n/**\r\n * @function cssNumber\r\n * @description This function will return css property value.\r\n * @param prop {String} CSS property \r\n * @return {Number} value.\r\n * @example\r\n * var lf = $('.myDiv').cssNumber('left');\r\n *    \r\n */\r\njQuery.fn.cssNumber = function (prop) {\r\n    var v = parseInt(this.css(prop), 10);\r\n    return isNaN(v) ? 0 : v;\r\n};\r\n\r\n// plugin function to disable button and also set aria-disabled attribute\r\njQuery.fn.disable = function () {\r\n    return this.each(function () {\r\n        if ($(this).attr('tabindex') == undefined) {\r\n            $(this).attr('tabindex', '0');\r\n        }\r\n        $(this).addClass(navigationButton.DISABLED).attr('aria-disabled', 'true');//prop('disabled', true);\r\n    });\r\n};\r\n\r\n// plugin function to enable button and also set aria-disabled attribute\r\njQuery.fn.enable = function () {\r\n    return this.each(function () {\r\n        $(this).removeClass(navigationButton.DISABLED).attr('aria-disabled', 'false');//prop('disabled', false);\r\n    });\r\n};","/**\r\n * @fileoverview This Plug-in is used to create the Modal. \r\n * @version 2.0\r\n */\r\n\r\n(function( $ ){\r\n    var $alertModal\r\n    var $el;\r\n    var options;\r\n\r\n    var hiddenMethod = null;\r\n\r\n\tvar methods = {\r\n        init : function( _options ) {\r\n\r\n            var defaults = {\r\n                title: \"\",\r\n\t\t\t\tmessage: \"\",\r\n\t\t\t\tconfirm: \"Continue\",\r\n\t\t\t\tcancel: \"Cancel\",\r\n                class: \"\",\r\n                size: \"sm\", // sm, md, lg\r\n\t\t\t\tonConfirm : null,\r\n\t\t\t\tonCancel : null\r\n            };\r\n\r\n            console.log('Alert modal init');\r\n\r\n            options = $.extend(defaults, _options);\r\n\r\n            var html = getAlertHTML();\r\n            if (html != ''){\r\n                $(\"#content-wrapper\").append(html);\r\n\r\n            }\r\n\r\n            $alertModal = $('#alertModal');\r\n            //var navTextXML=xmlData.navigationTextXML;\r\n\r\n            // $alertModal.removeClass().addClass('modal fade');\r\n            // removed color for HSBC\r\n            // $alertModal.addClass(options.color);\r\n            // if (options.data.class){\r\n            //     $alertModal.addClass(options.data.class);\r\n            // }\r\n\r\n            var classes = [];\r\n            if (options.class){\r\n                classes = options.class.split(' ');\r\n            }\r\n\r\n                //     $alertModal.addClass(options.data.class);\r\n                // }\r\n            if (options.size == 'sm' || options.size == 'small'){\r\n                classes.push('modal-sm');\r\n            } else if (options.size == 'lg' || options.size == 'large'){\r\n                classes.push('modal-lg');\r\n            }\r\n\r\n            $alertModal.find('.modal-dialog').removeClass().addClass('modal-dialog '+classes.join(' '));\r\n            \r\n            if (options.title){\r\n                $alertModal.find('.modal-title').html(options.title);\r\n                // $alertModal.find('.modal-title').focus(); // removed from Atos report\r\n            } else {\r\n                $alertModal.find('.modal-title').html('');                \r\n            }\r\n\r\n            $alertModal.find('.modal-body').html(options.message);\r\n\r\n            \r\n\t\t\t$alertModal.find('.btn.confirmBtn .btnText').html(defaults.confirm);\r\n\t\t\tif (!defaults.cancel){\r\n                $alertModal.find('.btn.closeBtn').hide();\r\n\t\t\t}else{\r\n                $alertModal.find('.btn.closeBtn').show();\r\n\t\t\t\t$alertModal.find('.btn.closeBtn .btnText').html(defaults.cancel);\r\n\t\t\t}\r\n\r\n            $alertModal.find('.btn.confirmBtn').bind('click', function () {\r\n                // console.log('ALERT confirm');\r\n                hiddenMethod = 'confirm';\r\n                if (defaults.onConfirm)\r\n                    defaults.onConfirm();\r\n                // return false;\r\n            });\r\n            $alertModal.find('.btn.closeBtn').bind('click', function () {\r\n                // console.log('ALERT close');\r\n                hiddenMethod = 'close';\r\n                // note - below has been removed as onClose replaced by onCancel, and now handled by onHide (so can also be fired on click of overlay)\r\n                // if (defaults.onClose)\r\n                //     defaults.onClose();\r\n            });\r\n            // add event listeners for modal show\r\n            $alertModal.on('show.bs.modal', onShow);\r\n\r\n            $(window).resize(function(){\t\t\r\n                \r\n                // if (componentController){\r\n                //     componentController.resizeContent();\r\n                // }\r\n                $.Alert('resize');\r\n\r\n            });\r\n            /*setTimeout(function(){\r\n//                console.log('delay 2000')\r\n                // componentController.setupComplete();\r\n                if (componentController){\r\n                    componentController.displayComponents();\r\n                }\r\n//                $(window).trigger('resize');\r\n                //$.Alert('resize');\r\n            },250);*/\r\n\r\n            $alertModal.modal();\r\n        },\r\n        show : function() { \r\n            //var navTextXML=xmlData.navigationTextXML;\r\n            /*$('.ExitYes .btntext').html(navTextXML.closeCourse[0].buttonText[0].text[0].Text); \r\n            $('.ExitNo .btntext').html(navTextXML.closeCourse[0].buttonText[0].text[1].Text);\t\t\t\r\n           $('.Exitparent').show(); */\r\n            console.log('MODAL SHOW');\r\n        },\r\n        hide : function() { \r\n            //$('.Exitparent').hide(); \r\n            console.log('MODAL HIDE');\r\n\r\n        },\r\n        resize : function() { \r\n        }\r\n    }\r\n\r\n    function onShow(e){\r\n        // console.log('Alert Modal onShow');\r\n\r\n        // get focussed element\r\n\t\t$el = $(document.activeElement);\r\n\r\n        $alertModal.off('show.bs.modal', onShow);\r\n        $alertModal.on('hidden.bs.modal', onHide);\r\n\r\n        // hide the main content when modal is shown\r\n        $('.ui-container').attr('aria-hidden', 'true');\r\n    }\r\n\r\n    function onHide(e){\r\n        console.log('Alert Modal onHide');\r\n\r\n        if ($el){\r\n            $el.focus();\r\n        }\r\n\r\n        $alertModal.off('hidden.bs.modal', onHide);\r\n\r\n        // unhide the main content when modal is shown\r\n        $('.ui-container').attr('aria-hidden', 'false');\r\n        \r\n        if (hiddenMethod != 'confirm' && options.onCancel){\r\n            options.onCancel();\r\n            options.onCancel = null;\r\n        }\r\n    }    \r\n\r\n\tfunction updatePageLayOut(){\r\n\t\t\r\n\t}\r\n\t/**\r\n\t * This Plug-in contains a set of methods that are used to create the Exit window.\r\n\t * @class This Plug-in is used to create the Exit window.\r\n\t * @param text {String} Exit message text.\r\n\t * @param yes {String} Yes button text.\r\n\t * @param no {String} No button text.\r\n\t * @param onYes {callback} Executes when user selects Yes.\r\n\t * @param onNo {String} Executes when user selects No.\r\n\t * @example\r\n\t * How to Use this plug-in\r\n\t\t $.Exit({\r\n\t\t\t\ttext:\"Exit message\",\r\n\t\t\t\tyes:\"Yes\",\r\n\t\t\t\tno:\"No\",\r\n\t\t\t\tonYes:function(){\r\n\t\t\t\t\r\n\t\t\t\t},\r\n\t\t\t\tonNo:function(){\r\n\t\t\t\t\t\r\n\t\t\t\t}\t\t\t\r\n\t\t\t});\r\n\t */\r\n\t$.fn.Alert = function( method ) {\t\t\r\n\t\tif ( methods[method] ) {\r\n\t\t  return methods[ method ].apply( this, Array.prototype.slice.call( arguments, 1 ));\r\n\t\t} else if ( typeof method === 'object' || ! method ) {\r\n\t\t  return methods.init.apply( this, arguments );\r\n\t\t} else {\r\n\t\t  $.error( 'Method ' +  method + ' does not exist on Alert JS' );\r\n\t\t}    \r\n\t\r\n\t};\t\r\n\t$.extend({Alert: $.fn.Alert});\r\n\t\r\n\t/**\r\n\t * @function getModalHTML\r\n\t * @description This function returns Exit html structure.\r\n\t * @returns data {String}\r\n\t */ \r\n\tgetAlertHTML = function() { \r\n//\t\tvar htmlStr ='<div class=\"Exitparent\"><div class=\"ExitPopWindow roundedBorder\" ><div class=\"ExitText\" tabindex=\"1\" ></div><a class=\"roundedBorder ExitYes a-button\" href=\"javascript:void(0);\" tabindex=\"2\" ><span class=\"btntext \">Yes</span></a><a class=\"roundedBorder ExitNo a-button\" href=\"javascript:void(0);\" tabindex=\"3\" ><span class=\"btntext\">No</span></a></div></div>';\r\n        var htm = ''\r\n        //<!-- Modal -->\r\n            htm+='<div id=\"alertModal\" class=\"modal alert-modal fade\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"alertModalLabel\">';\r\n                htm+='<div class=\"modal-dialog\" role=\"document\">';\r\n                    htm+='<div class=\"modal-content\">';\r\n                        // htm+='<button class=\"btn closeBtn btn-close-container\" data-dismiss=\"modal\" aria-label=\"'+courseData.data.settings[0].navigation[0].btn_Close[0].Text+'\">';\r\n                        //     htm+='<div class=\"btn-close\">';\r\n                        //         htm+= svgUtils.createSVG('cross')\r\n                        //     htm+='</div>';\r\n                        // htm+='</button>';\r\n                        htm+='<div class=\"modal-header\">';\r\n                            htm+='<h2 class=\"modal-title\" id=\"alertModalLabel\"></h2>';\r\n                        htm+='</div>';\r\n                    htm+='<div class=\"modal-body\">';\r\n                    htm+='</div>';\r\n                    htm+='<div class=\"modal-footer\">';\r\n                        htm+='<button class=\"btn confirmBtn\" data-dismiss=\"modal\"><div class=\"btnText\"></div></button>';\r\n                        htm+='<button class=\"btn closeBtn\" data-dismiss=\"modal\"><div class=\"btnText\"></div></button>';\r\n                    htm+='</div>';\r\n                htm+='</div>';\r\n            htm+='</div>';\r\n        \r\n        if ($('.modal#alertModal').length > 0){\r\n            return \"\";\r\n\t\t}else{\r\n            return htm;  \r\n\t\t}\r\n\t};\r\n\r\n})( jQuery );","var AssessmentController = function (_id, _config) {\r\n    var self = this;\r\n    \r\n    this.id = _id;\r\n    this.config = _config;\r\n    \r\n    this.xmlID = _config.assessment || this.id;\r\n    //this.questionNumArray = [];\r\n    \r\n    this.SELECTED = 'r';\r\n    this.CORRECT = 'c';\r\n    \r\n    this.qVars = {\r\n        ANSWERS: 'answers',\r\n        ATTEMPTS: 'attempts',\r\n        MIN: 'min',\r\n        MAX: 'max',\r\n        SCORE: 'score',\r\n        CORRECT: 'correct'\r\n    }\r\n    \r\n    this.data = {\r\n        questions: [],\r\n        correct: 0,\r\n        num: 0,\r\n        score: {\r\n            min: 0,\r\n            max: 0,\r\n            raw: 0,\r\n            scaled: 0\r\n        },\r\n        perc: 0,\r\n        pass: false\r\n    }\r\n    this.moduleBankArray = [];\r\n    //this.questionDataArray = [];\r\n    //this.selectedArray = [];\r\n    //this.answerArray = [];\r\n    //this.correctArray = [];\r\n    \r\n    this.numQuestions       = _config.num;\r\n    this.questionBankArray   = _config.banks; \r\n    this.passingPerc        = _config.passingPerc;\r\n    this.scoring          = _config.scoring; \r\n    \r\n    this.assessmentXMLData;\r\n    \r\n    //this.score = 0;\r\n    //this.perc = 0;\r\n    //this.isPass = false;\r\n    \r\n    this.gameAPIData = {};\r\n    \r\n    function init(){\r\n        //console.log('AssessmentController::init ');\r\n    }\r\n    \r\n    this.getData = function(){\r\n        //console.log('AssessmentController::getData');\r\n\r\n        return this.reduceData(this.data);\r\n    }\r\n\r\n    this.reduceData = function(data){\r\n        // check length of data and adjust variable names here\r\n        return data;\r\n    }\r\n\r\n    this.expandData = function(data){\r\n        return data;\r\n    }\r\n    \r\n    this.updateFromLMSData = function(dataObj){\r\n        //console.log('AssessmentController::updateFromLMSData');\r\n        //self.data.correct = _correctArray;\r\n        \r\n        self.data = self.expandData(dataObj);\r\n        \r\n        self.calculateScore();\r\n    }\r\n    \r\n    this.setupAssessment = function(){\r\n        console.log('AssessmentController::setupAssessment', courseData.data.assessment.assessment[0]);\r\n        \r\n        var assessmentBankData;\r\n        // find the assessment in the XML\r\n        for (var i = 0; i < courseData.data.assessment.assessment.length; i++){\r\n            if (courseData.data.assessment.assessment[i].id == self.xmlID){\r\n                self.assessmentXMLData = courseData.data.assessment.assessment[i];\r\n                assessmentBankData = self.assessmentXMLData.banks[0];\r\n                break;\r\n            }\r\n        }\r\n\r\n        if (self.data.questions.length == 0){\r\n            if (self.questionBankArray.length){\r\n                // we're pulling from the question banks in assessment.xml\r\n                self.numQuestions = 0;\r\n                self.data.questions = [];\r\n                //console.log(self.questionBankArray.length)\r\n                for (var i = 0; i < self.questionBankArray.length; i++){\r\n                    // check number to draw\r\n                    var numToDraw = (assessmentBankData.bank[i].draw) ? parseInt(assessmentBankData.bank[i].draw) : self.questionBankArray[i];\r\n                    var moduleNo = (assessmentBankData.bank[i].module) ? parseInt(assessmentBankData.bank[i].module) : -1;\r\n                    if (moduleNo != -1){\r\n                        self.moduleBankArray[moduleNo] = i;\r\n                    }\r\n                    self.numQuestions += numToDraw;\r\n\r\n                    //console.log('NUM QUESTIONS',self.numQuestions)\r\n                    // prepopulate array\r\n                    var bankArray = [];\r\n                    for (var j = 0; j < assessmentBankData.bank[i].questions[0].question.length; j++){\r\n                        bankArray[j] = {\r\n                            b:i,\r\n                            q:j,\r\n//                            answers:[],\r\n//                            selected:[],\r\n//                            min: 0,\r\n//                            max: 0,\r\n//                            score:0,\r\n//                            correct:0\r\n                        };\r\n                        \r\n//                        if (moduleNo != -1){\r\n//                             bankArray[j].module = moduleNo;\r\n//                        }\r\n                    }\r\n                    var randomArray = [];\r\n                    //console.log(numToDraw, assessmentBankData.bank[i].questions[0].question.length)\r\n                    if (numToDraw <= assessmentBankData.bank[i].questions[0].question.length){\r\n                        while (randomArray.length < numToDraw){\r\n                            // random select from bank\r\n                            randomArray = randomArray.concat(bankArray.splice(Math.floor(Math.random() * bankArray.length), 1)); \r\n    //                        /console.log('RANDOM',randomArray)\r\n                        }\r\n                    }\r\n                    // store in the self.data.questions\r\n                    self.data.questions = self.data.questions.concat(randomArray);\r\n                }\r\n                //console.log('QUESTIONS', self.data.questions);\r\n            } else {\r\n\r\n                for (var i = 0; i < self.numQuestions; i++){\r\n\r\n                    self.data.questions.push ({\r\n                        q:i\r\n//                        answers:[],\r\n//                        selected:[],\r\n//                        min: 0,\r\n//                        max: 0,\r\n//                        score:0,\r\n//                        correct:0\r\n                    });\r\n\r\n                }\r\n\r\n                // shuffle question order?\r\n                if (self.config.shuffle){                    \r\n                    self.data.questions.shuffle();\r\n                }\r\n            }\r\n            for (var i = 0; i < self.numQuestions; i++){\r\n\r\n                self.data.questions[i][self.qVars.ANSWERS] = [];\r\n                self.data.questions[i][self.qVars.ATTEMPTS] = [];\r\n                self.data.questions[i][self.qVars.MIN] = 0;\r\n                self.data.questions[i][self.qVars.MAX] = 0;\r\n                self.data.questions[i][self.qVars.SCORE] = 0;\r\n                self.data.questions[i][self.qVars.CORRECT] = 0;\r\n//                        q:i,\r\n//                        answers:[],\r\n//                        selected:[],\r\n//                        min: 0,\r\n//                        max: 0,\r\n//                        score:0,\r\n//                        correct:0\r\n//                    });\r\n\r\n                }\r\n        \r\n        }\r\n        \r\n        self.numQuestions = self.data.questions.length;\r\n        \r\n        for (var i = 0; i < self.questionBankArray.length; i++){\r\n            // check number to draw\r\n            var moduleNo = (assessmentBankData.bank[i].module) ? parseInt(assessmentBankData.bank[i].module) : -1;\r\n\r\n            if (moduleNo != -1){\r\n                if (self.moduleBankArray[moduleNo] == undefined){\r\n                    self.moduleBankArray[moduleNo] = [];\r\n                }\r\n                self.moduleBankArray[moduleNo].push(i);\r\n            }\r\n        }\r\n\r\n        // which qVars to use based on num of questions\r\n        // if (self.numQuestions > 10){\r\n        //     self.qVars = {\r\n        //         ANSWERS: 'a',\r\n        //         ATTEMPTS: 's',\r\n        //         MIN: 'l',\r\n        //         MAX: 'u',\r\n        //         SCORE: 'n',\r\n        //         CORRECT: 'c'\r\n        //     }\r\n        // }\r\n    }\r\n    \r\n    this.initQuestion = function(qNum, answers){\r\n        //if (self.questionDataArray[qNum] == undefined){\r\n        //    self.questionDataArray.push(qNum);\r\n        //}\r\n        //var qNum = id; //self.questionNumArray.indexOf(id);\r\n        // console.log('AssessmentController::initQuestion', qNum, answers);\r\n\r\n        if (self.data.questions[qNum][self.qVars.ANSWERS].length == 0){\r\n            // only initialise if not done\r\n            self.data.questions[qNum][self.qVars.ANSWERS] = answers.slice();\r\n        }\r\n    }\r\n    \r\n    this.getAnswers = function(qNum){\r\n        //var qNum = self.questionNumArray.indexOf(id);\r\n        return self.data.questions[qNum][self.qVars.ANSWERS];\r\n    }\r\n    \r\n    this.storeAnswers = function(qNum, selectedAnswers){//, isCorrectArray){\r\n//        var qNum = self.questionNumArray.indexOf(id);\r\n        // console.log('AssessmentController::storeAnswers', qNum, selectedAnswers);\r\n        \r\n//        console.log(self.data.questions[qNum]);\r\n        var questionXMLData = this.getQuestionXMLData(qNum);\r\n        \r\n        var attemptsData = self.data.questions[qNum][self.qVars.ATTEMPTS];\r\n        \r\n        // console.dir(attemptsData);\r\n        // console.log('AssessmentController::storeAnswers', qNum, JSON.stringify(attemptsData), selectedAnswers);\r\n        if (self.config.storeAllAttempts){\r\n            attemptsData.push(selectedAnswers.slice());\r\n        } else {\r\n            attemptsData[0] = selectedAnswers.slice();\r\n        }\r\n        // console.log('AssessmentController::storeAnswers', qNum, JSON.stringify(attemptsData));\r\n        \r\n        var numCorrectOptions = 0;\r\n        var correctCount = 0;\r\n        var incorrectCount = 0;\r\n        var isCorrectArray = [];\r\n        var maxScore = 0;\r\n        \r\n        var questionOptionScore = questionXMLData.optionScore ? parseInt(questionXMLData.optionScore) : self.scoring.correct;\r\n\r\n        if (self.data.questions[qNum][self.qVars.CORRECT] != 1){\r\n            // if not already correct store user's attempt\r\n        \r\n            for (var i = 0 ; i < attemptsData[attemptsData.length-1].length; i++){\r\n                // check if using a component or not\r\n                var questionXMLDataOptions = questionXMLData.component ? questionXMLData.component[0].options[0] : questionXMLData.options[0];\r\n                var optionScore = questionXMLDataOptions.option[i].score ? parseInt(questionXMLDataOptions.option[i].score) : questionOptionScore;\r\n                //console.log(optionScore);\r\n                // check if answer was correct\r\n                isCorrectArray[i] = (self.data.questions[qNum][self.qVars.ANSWERS][i] == attemptsData[attemptsData.length-1][i]) ? 1 : 0;\r\n                if (self.data.questions[qNum][self.qVars.ANSWERS][i] != 0){\r\n                    maxScore += optionScore;\r\n                    // correct option\r\n                    numCorrectOptions++;\r\n                    if (attemptsData[attemptsData.length-1][i] != 0){\r\n                        // user was correct\r\n                        correctCount += optionScore;\r\n                    }\r\n                } else {\r\n                    // incorrect option\r\n                    if (!self.scoring.ignoreIncorrect){\r\n                        maxScore += optionScore;\r\n                    }\r\n                    if (attemptsData[attemptsData.length-1][i] != 0){\r\n                        // user was incorrect\r\n                        incorrectCount += optionScore;\r\n                    } else {\r\n                        if (!self.scoring.ignoreIncorrect){\r\n                            // user was correct in not answering this\r\n                            correctCount += optionScore;\r\n                        }                    \r\n                    }               \r\n                }\r\n            }\r\n            self.data.questions[qNum][self.qVars.MIN] = 0;\r\n            self.data.questions[qNum][self.qVars.MAX] = maxScore;\r\n            if (self.scoring.ignoreIncorrect){\r\n                // score per question - +1 correct, -1 incorrect, but can't get less than 0\r\n                self.data.questions[qNum][self.qVars.SCORE] = Math.max(correctCount-incorrectCount, 0);            \r\n            } else {\r\n                // score per question - incorrect answers score points too. no negative points for incorrect\r\n                self.data.questions[qNum][self.qVars.SCORE] = correctCount;\r\n            }\r\n            self.data.questions[qNum][self.qVars.CORRECT] = (isCorrectArray.indexOf(0) == -1) ? 1 : 0;\r\n        }\r\n        \r\n        self.calculateScore();\r\n        \r\n        storageController.setAssessmentData();\r\n    }\r\n    \r\n    this.calculateScore = function(){\r\n        self.data.num = self.data.questions.length;\r\n        self.data.correct = 0;\r\n        self.data.score = {\r\n            raw: 0,\r\n            min: 0,\r\n            max: 0,\r\n            scaled: 0\r\n        }\r\n        for (var i = 0; i < self.data.questions.length; i++){\r\n//                console.log('calculateScore', i, self.data.questions[i].max)\r\n            if (self.data.questions[i][self.qVars.MAX] == 0){\r\n                // if question not done exit\r\n                return false;   \r\n            }\r\n            self.data.correct += self.data.questions[i][self.qVars.CORRECT];\r\n            self.data.score.raw += self.data.questions[i][self.qVars.SCORE];\r\n            self.data.score.max += self.data.questions[i][self.qVars.MAX];\r\n        }\r\n        \r\n        // note: score.scaled is the number of correct options\r\n        self.data.score.scaled = parseFloat((self.data.score.raw/self.data.score.max).toFixed(2));\r\n        // note: perc is the correct overall questions, rather than correct options\r\n        self.data.perc = Math.round((self.data.correct/self.data.num)*100);\r\n        \r\n        if (self.data.perc >= self.passingPerc){\r\n            self.data.pass = true;\r\n        } else {\r\n            self.data.pass = false;\r\n        }\r\n        //console.log('AssessmentController::storeAnswers SCORE:', self.data.score, self.data.perc);\r\n\r\n        // the scores in this assessment have changed so may affect modules/pages/slides in the menu\r\n        courseData.updateMenu();\r\n        \r\n        $(document).trigger('ASSESSMENT_SCORE_UPDATE');\r\n        \r\n        // if this assessment stores to the SCORM cmi.score.raw\r\n        if (assessmentConfig.scormScoreAssementID == self.id){\r\n            storageController.setScore(self.data.perc);\r\n            \r\n            storageController.checkCourseComplete();\r\n//            // Depend on Assessment score >= 'passingScore.\r\n//            if (courseConfig.storage.courseCompletion == 1){\r\n//                storageController.setComplete();\r\n//            }\r\n        }\r\n    }\r\n    \r\n    this.getBanksScores = function(){\r\n        var bankArray = [];\r\n        for (var i = 0; i < self.data.questions.length; i++){\r\n            var bankNo;\r\n            if (self.data.questions[i].b){\r\n                // banks are defined\r\n                bankNo = self.data.questions[i].b;\r\n            } else {\r\n                // no banks defined - default to 0\r\n                bankNo = 0;\r\n            }\r\n\r\n            if (!bankArray[bankNo]){\r\n                bankArray[bankNo] = {score: 0, total: 0}\r\n            }\r\n            bankArray[bankNo].total ++;\r\n            bankArray[bankNo].score += self.data.questions[i][self.qVars.CORRECT];\r\n        }\r\n        return bankArray;\r\n    }\r\n    \r\n    this.getBankScore = function(bankNo){\r\n        var obj = {score: 0, total: 0};\r\n        for (var i = 0; i < self.data.questions.length; i++){\r\n            if (self.data.questions[i].b == undefined || self.data.questions[i].b == bankNo){\r\n                obj.total ++;\r\n                obj.score += self.data.questions[i][self.qVars.CORRECT];\r\n            }\r\n        }\r\n        return obj;\r\n    }\r\n    \r\n    this.isBankComplete = function(bankNo){\r\n        var bankScoreObj = self.getBankScore(bankNo);\r\n        return bankScoreObj.score == bankScoreObj.total;\r\n    }\r\n    \r\n    this.isModuleBankComplete = function(moduleNo){\r\n//        var isComplete = false;\r\n//        if (!self.isBankComplete(self.moduleBankArray[moduleNo])){\r\n//            isComplete = false;\r\n//        }\r\n        if (self.moduleBankArray[moduleNo]){\r\n            var isComplete = false;\r\n            //if (self.moduleBankArray[moduleNo].length > 1){\r\n                // has submodules\r\n                for (var i = 0; i < self.moduleBankArray[moduleNo].length; i++){\r\n                    if (self.isBankComplete(self.moduleBankArray[moduleNo][i])){\r\n                        isComplete = true;\r\n                        break;\r\n                    }\r\n                }\r\n            //} else {\r\n            //    isComplete = self.isBankComplete(self.moduleBankArray[moduleNo][0]);\r\n            //}\r\n            return isComplete;\r\n//            return self.isBankComplete(self.moduleBankArray[moduleNo]);\r\n        } else {\r\n            return false;\r\n        }\r\n    }\r\n    \r\n    this.showMarkingEnabled = function(){\r\n        return self.config.showMarking;\r\n    }\r\n    \r\n    this.showAnswersEnabled = function(){\r\n        return self.config.showAnswer;\r\n    }\r\n    \r\n    this.feedbackEnabled = function(){\r\n        return self.config.feedback;\r\n    }\r\n    \r\n    this.getQuestionData = function(qNum){\r\n        return self.data.questions[qNum];\r\n    }\r\n\r\n    this.getQuestionXMLData = function(qNum){\r\n        var questionXMLData;\r\n        if (self.data.questions[qNum].b){\r\n            questionXMLData = self.assessmentXMLData.banks[0].bank[self.data.questions[qNum].b].questions[0].question[self.data.questions[qNum].q].question[0];\r\n        } else {\r\n            questionXMLData = self.assessmentXMLData.banks[0].bank[0].questions[0].question[self.data.questions[qNum].q].question[0];\r\n        }\r\n        return questionXMLData;\r\n    }\r\n\r\n    this.getQuestionDataForNum = function(qNum){\r\n        // qNum is the exact number (before any randomisation)\r\n        for (var i = 0; i < self.data.questions.length; i++){\r\n            if (self.data.questions[i].q == qNum){\r\n                return self.getQuestionData(i);\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n\r\n    this.getQuestionXMLDataForNum = function(qNum){\r\n        // qNum is the exact number (before any randomisation)\r\n        for (var i = 0; i < self.data.questions.length; i++){\r\n            if (self.data.questions[i].q == qNum){\r\n                return self.getQuestionXMLData(i);\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n\r\n    this.getBankXMLData = function(bNum){\r\n        return self.assessmentXMLData.banks[0].bank[bNum];\r\n    }\r\n    \r\n    this.checkAssessmentAgainstObject = function(obj){\r\n        if (obj.perc){\r\n            // is the perc in this assessment < the required percentage\r\n            return self.data.perc >= obj.perc;\r\n        } else if (obj.score){\r\n            // is the score in this assessment < the required score\r\n            return self.data.score >= obj.score;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    init();\r\n}","var AnimationController = function () {\r\n    var self = this;\r\n\r\n    self.groups = [];\r\n    self.anims = [];\r\n\r\n    function init(){\r\n        // unrelated to this file but lets set some gsap animation config here\r\n        gsap.config({\r\n            nullTargetWarn: false\r\n        });\r\n    }\r\n\r\n    function onInView(event, visible){\r\n        \r\n        if (visible) {\r\n            var $anim = $(this);\r\n            $anim.off('inview', onInView);\r\n            $anim.addClass('animinview');\r\n            // $anim.addClass('animready');\r\n\r\n            var animIndex = $anim.data('anim-index');\r\n            \r\n            var anim = self.anims[animIndex];\r\n            anim.inview = true;\r\n            \r\n            // console.log('AnimationController::onInView', animIndex);\r\n\r\n            // recalculate animation delays\r\n            setAnimDelays();\r\n        }\r\n    }\r\n\r\n    function animationStarted(animIndex){\r\n        var anim = self.anims[animIndex];\r\n        // console.log('AnimationController::animationStarted', animIndex, anim.$el.is(':visible'));\r\n        if (!anim.started){\r\n            // console.log('AnimationController::animationStarted', animIndex);\r\n\r\n            anim.started = true;\r\n\r\n            anim.$el.addClass('animating');\r\n            anim.$el.triggerHandler('inview_anim_start');\r\n\r\n            // add timeout for when animation is complete\r\n            createAnimCompleteSetTimeout(animIndex, anim.duration);\r\n        }\r\n    }\r\n\r\n    function createAnimCompleteSetTimeout(animIndex, duration){\r\n        // if (self.anims[animIndex].delayTimeout){\r\n        //     clearTimeout(self.anims[i].delayTimeout);\r\n        // }\r\n        var anim = self.anims[animIndex];\r\n        setTimeout(function(){\r\n            \r\n            // console.log('AnimationController::createAnimCompleteSetTimeout', animIndex);\r\n            // if (anim.$el.hasClass('component-text')){\r\n                // console.log('AnimationController::createAnimCompleteSetTimeout', animIndex, duration);\r\n            // }\r\n            if (!anim.animated){\r\n                // console.log('AnimationController::animationStarted', animIndex);\r\n                anim.animated = true;\r\n                anim.$el.removeClass('animating');\r\n                anim.$el.addClass('animated');\r\n                anim.$el.triggerHandler('inview_anim_complete');\r\n\r\n                // need to figure out if this is a component and if so, trigger the component animation complete\r\n                if (anim.componentIndex){\r\n                    var slideObj = contentController.getSlideForElement(anim.$el);\r\n                    if (slideObj){\r\n                        // console.log('inview anim complete slide found', anim.$el.attr('id'), anim.componentIndex);\r\n                        var component = slideObj.componentController.getComponentObject(anim.componentIndex);\r\n                        \r\n                        // lets change the instruction if has i or instruction attribute\r\n                        var instruction;\r\n\r\n                        if (component.dataNode.i){\r\n                            instruction = parseInt(component.dataNode.i);\r\n                        } else if (component.dataNode.instruction){\r\n                            instruction = parseInt(component.dataNode.instruction);\r\n                        }\r\n\r\n                        if (instruction){\r\n                            // change the instruction\r\n                            slideObj.componentController.changeInstruction(instruction);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }, duration);\r\n    }\r\n\r\n    function setAnimDelays(){\r\n        // var totalDelay = 0;\r\n        // var animCount = 0;\r\n        for (var i = 0; i < self.groups.length; i++){\r\n            self.groups[i].totalDelay = 0;\r\n            self.groups[i].count = 0;\r\n        }\r\n        for (var i = 0; i < self.anims.length; i++){\r\n            var animIndex = i;\r\n            var anim = self.anims[i];\r\n            var animGroup = self.groups[anim.group];\r\n            if ((courseConfig.animate.inview && !anim.inview) || anim.animated){// || responsiveUtils.isElementHidden(anim.$el)){\r\n                continue;\r\n            }\r\n            animGroup.count++;\r\n            var thisDelay = 0;\r\n            if (animGroup.count > 1){\r\n                // if not first item, add delay\r\n                thisDelay = self.anims[i].delay;\r\n                \r\n                if (courseConfig.animate.sequence && self.anims[i].stagger){\r\n                    // if staggering animation, increment delay for later elements\r\n                    animGroup.totalDelay += self.anims[i].delay;\r\n                    thisDelay = animGroup.totalDelay;\r\n                }\r\n            }\r\n\r\n            if (!anim.started){\r\n                setAnimDelay(i, thisDelay);\r\n\r\n                // add delay before actual CSS animation starts\r\n                createAnimDelaySetTimeout(animIndex, thisDelay);\r\n            }\r\n        }\r\n    }\r\n\r\n    function createAnimDelaySetTimeout(animIndex, delay){\r\n        // console.log('AnimationController::createAnimDelaySetTimeout', animIndex);\r\n\r\n        clearTimeout(self.anims[animIndex].delayTimeout);\r\n        \r\n        var anim = self.anims[animIndex];\r\n\r\n        if (!responsiveUtils.isElementHidden(anim.$el)){\r\n            anim.$el.addClass('animready');\r\n            // self.anims[animIndex].totalDelay = delay;\r\n            anim.delayTimeout = setTimeout(function(){\r\n                animationStarted(animIndex);\r\n            }, delay);\r\n        } else {\r\n            // console.warn('AnimationController: el hidden', anim.$el.selector, animIndex);\r\n        }\r\n    }\r\n\r\n    function setAnimDelay(animIndex, delay){\r\n        var anim = self.anims[animIndex];\r\n\r\n        htmlUtils.addAnimationDelayCSS(anim.$el, delay);\r\n    }\r\n\r\n    this.setupAnimations = function($elements){\r\n        // console.log('AnimationController::setupAnimations');\r\n        // add group\r\n        self.groups.push({\r\n            $ref: $elements\r\n        })\r\n        \r\n        var delay = 0;\r\n        if (courseConfig.animate.sequence){\r\n            // default sequence delay\r\n            delay = courseConfig.animate.delay;\r\n        }        \r\n\r\n        self.$elements = htmlUtils.findAnims($elements); \r\n        // console.log('AnimationController::setupAnimations', self.$elements.length);\r\n        \r\n        // sort the anims into an animation order here.\r\n        // self.$elements.sort(function sort_li(a, b){\r\n        //     return ($(b).data('position')) < ($(a).data('position')) ? 1 : -1;    \r\n        // }) // sort elements\r\n                //   .; // append again to the list\r\n// sort function callback\r\n\r\n\r\n        //var animCount = 0;\r\n        if (self.$elements.length){\r\n            self.$elements.each(function(index){\r\n                var $el = $(this);\r\n\r\n                $el.data('anim-index', index);\r\n                var animGroupIndex = 0;\r\n\r\n                // console.log('AnimationController::setupAnimations', index, responsiveUtils.isElementHidden($el))\r\n                var thisDelay = utils.css_time_to_milliseconds($el.css('animation-delay')) || delay;\r\n                var animDelay = $el.data('anim-delay');\r\n                var stagger = true;\r\n                if (animDelay){\r\n                    if (typeof(animDelay) == 'string'){\r\n                        if (animDelay.indexOf('+=') != -1){\r\n                            thisDelay = parseInt(animDelay.split('+=').join(''))*1000;\r\n                            // found '+=' so animation staggered\r\n                        } else if (animDelay.indexOf('-=') != -1){\r\n                            // found '-=' so animation staggered\r\n                            thisDelay = -(parseInt(animDelay.split('-=').join('')))*1000;\r\n                        }\r\n                    } else {\r\n                        // found just number so absolute delayed animation\r\n                        stagger = false;\r\n                        // thisDelay = parseInt(animDelay.split('=').join(''));\r\n                        thisDelay = parseInt(animDelay)*1000;\r\n                    }\r\n                }\r\n\r\n                var $closestHiddenElement = responsiveUtils.getClosestHiddenElement($el);\r\n                // if (responsiveUtils.isElementHidden($el)){\r\n                if ($closestHiddenElement.length){\r\n                    // console.log('AnimationController::setupAnimations isElementHiddenByParent',$el)\r\n                    // remove stagger for any elements hidden\r\n                    // stagger = false;\r\n                    for (var i = 1; i < self.groups.length; i++){\r\n                        if (self.groups[i].$ref.is($closestHiddenElement)){\r\n                            animGroupIndex = i;\r\n                            break;\r\n                        }\r\n                    }\r\n                    if (animGroupIndex == 0){\r\n                        self.groups.push({\r\n                            $ref: $closestHiddenElement\r\n                        }); \r\n                        animGroupIndex = self.groups.length-1;\r\n                    }\r\n                }\r\n\r\n                self.anims[index] = {\r\n                    $el: $el,\r\n                    componentIndex: $el.data('componentindex'),\r\n                    inview: false,\r\n                    started: false,\r\n                    animated: false,\r\n                    group: animGroupIndex,\r\n                    stagger: stagger,\r\n                    delay: thisDelay,\r\n                    duration: utils.css_time_to_milliseconds($el.css('animation-duration'))\r\n                }\r\n\r\n                if ($('body').hasClass('anim-debug-on')){\r\n                    var htmlStr = '';\r\n                    htmlStr += '<div class=\"anim-debug\">';\r\n                        htmlStr += '<span class=\"anim-debug-num\" title=\"anim index\">'+index+'</span>-';\r\n                        htmlStr += '<span class=\"anim-debug-group\" title=\"group\">'+animGroupIndex+'</span>';\r\n                        htmlStr += '<div class=\"anim-debug-item anim-debug-item-anim\" title=\"animation\"></div>';\r\n                        htmlStr += '<div class=\"anim-debug-item anim-debug-item-inview\" title=\"inview\"></div>';\r\n                    htmlStr += '</div>';\r\n\r\n                    $el.append(htmlStr);\r\n                }\r\n            });\r\n            // /utils.css_time_to_milliseconds($el.css('animation-delay'))+\r\n            \r\n            setAnimDelays();\r\n            \r\n            if (courseConfig.animate.inview){\r\n                //$anims.addClass('animinview');\r\n                self.$elements.on('inview', onInView);\r\n            } else {\r\n                // start all when first element inview\r\n                self.$elements.eq(0).on('inview', onInView);\r\n            }\r\n        }\r\n    }\r\n\r\n    this.triggerAnimation = function(el){\r\n        var $el = (typeof(el) == 'number') ? self.anims[el].$el : el;\r\n        var animIndex = (typeof(el) == 'number') ? el : $el.data('anim-index');\r\n\r\n        setAnimDelays();\r\n\r\n        // animationStarted(animIndex);\r\n    }\r\n\r\n    init();\r\n}","var AudioController = function() {\r\n    var self = this;\r\n    \r\n    this.isMuted = false;\r\n    this.audioObj = {};\r\n\r\n    this.useCreateJS = false;\r\n    \r\n    function init(){\r\n        // console.log('AudioController init')\r\n\r\n        this.isMuted = parseInt(storageController.getAudio()) == 0;\r\n\r\n        // create audio canvas for create JS?\r\n        // $('#content-wrapper').append('<canvas id=\"audioCanvas\" width=\"100\" height=\"100\"></canvas>');\r\n\r\n        \r\n        // createjs.Sound.alternateExtensions = [\"mp3\"];\r\n        // createjs.Sound.on(\"fileload\", loadSound);\r\n        // createjs.Sound.registerSounds(sounds, assetsPath);\r\n        // after load is complete\r\n        // createjs.Sound.play(\"sound2\");\r\n\r\n        // var sounds = {\r\n        //     path: coursePath+'content/media/',\r\n        //     manifest: [\r\n        //         {\r\n        //             id: \"metalhit\", src: {mp3: 'components/metalhit3.mp3'}\r\n        //         }\r\n        // ]};\r\n\r\n        // registerSound(\"sound.mp3\", \"soundId\", 4);\r\n\r\n        // createjs.Sound.alternateExtensions = [\"mp3\"];\r\n\r\n        \r\n        if (createjs){\r\n            self.useCreateJS = true;\r\n        }\r\n\r\n        createjs.Sound.addEventListener(\"fileload\", function(){\r\n            // console.log('AudioController sounds loaded');\r\n            // createjs.Sound.play(\"metalhit\");\r\n        });\r\n\r\n        // var audioPath = coursePath+'content/media/components/';\r\n        // var sounds = [{\r\n        //     id: \"metalhit\",\r\n        //     src: \"metalhit3.mp3\"\r\n        // }];\r\n        // createjs.Sound.registerSound(coursePath+'content/media/components/metalhit.mp3', 'metalhit');\r\n        // createjs.Sound.registerSounds(sounds);\r\n    }\r\n    \r\n    this.loadAudio = function(name, file){\r\n        if (self.useCreateJS){\r\n            createjs.Sound.registerSound(file, name);\r\n        } else {\r\n            if (this.audioObj[name] == undefined){            \r\n                var audio = new Audio(file);\r\n                audio.onended = function() {\r\n                }\r\n            }\r\n\r\n            this.audioObj[name] = audio;\r\n        }\r\n    }\r\n    \r\n    this.playAudio = function(name){\r\n        if (self.useCreateJS){\r\n            if (createjs.Sound.loadComplete(name)) {\r\n                createjs.Sound.play(name);\r\n            }\r\n        } else {\r\n            if (this.audioObj[name]){\r\n                this.audioObj[name].muted = this.isMuted;\r\n                this.audioObj[name].play();\r\n            }\r\n        }\r\n    \r\n    this.playAudioFromStart = function(name){\r\n        if (this.audioObj[name]){\r\n            this.audioObj[name].muted = this.isMuted;\r\n            if (!isNaN(audioObj.duration)) {\r\n                this.audioObj[name].currentTime = 0;\r\n            }\r\n            this.audioObj[name].play();\r\n        }\r\n    }\r\n    }\r\n    this.playNewAudio = function(name){\r\n        if (this.audioObj[name]){\r\n            var newAudio = this.audioObj[name].cloneNode();\r\n            newAudio.muted = this.isMuted;\r\n            if (!isNaN(newAudio.duration)) {\r\n                newAudio.currentTime = 0;\r\n            }\r\n            newAudio.onended = function() {\r\n                //this.remove();\r\n                $(this).remove();\r\n            }\r\n            newAudio.play();\r\n        }\r\n    }\r\n    \r\n    this.muteAudio = function(){\r\n        this.isMuted = !this.isMuted;\r\n        for (x in this.audioObj){\r\n            this.audioObj[x].muted = this.isMuted;\r\n        }\r\n        if (createjs){\r\n            createjs.Sound.muted = this.isMuted;\r\n        }\r\n        storageController.setAudio(this.isMuted ? 0 : 1);\r\n    }\r\n    \r\n    init();\r\n}","// this file is created by a gulp task\nconst AvailableClasses = {\"templates\":{\"CUSTOM\":TemplateCUSTOM},\"components\":{\"accordion\":ComponentAccordion,\"button\":ComponentButton,\"carousel\":ComponentCarousel,\"flipcard\":ComponentFlipcard,\"group\":ComponentGroup,\"image\":ComponentImage,\"instruction\":ComponentInstruction,\"mcqtawa\":ComponentMcqtawa,\"media\":ComponentMedia,\"menu\":ComponentMenu,\"separator\":ComponentSeparator,\"text\":ComponentText,\"callout\":ComponentCallout,\"headerimage\":ComponentHeaderimage,\"panel\":ComponentPanel,\"tab\":ComponentTab,\"gsfmenu\":ComponentGSFMenu,\"header\":ComponentHeader,\"buildupcarousel\":ComponentBuildupCarousel,\"storycarousel\":ComponentStoryCarousel,\"plusbutton\":ComponentPlusButton,\"highchart_bar\":ComponentHighchart_Bar,\"highchart_pie\":ComponentHighchart_Pie,\"dropdownsequence\":ComponentDropdownsequence,\"parallaximage\":ComponentParallaxImage,\"parallaxheader\":ComponentParallaxHeader}}","var UIController = function() {\r\n    var self = this;\r\n    var menuArray = [];\r\n    \r\n    this.setupUI = setupUI;\r\n    \r\n    // var navigationBtns = ['language','search','menu','resource','help','audio','glossary','exit']\r\n    var navigationBtns = ['language','menu','resource','help','audio','exit'];\r\n    var navigationBtnTimelines = []; // used for greensock\r\n    \r\n    function init(){\r\n        \r\n    }\r\n    \r\n    function setupUI(){\r\n        createNavMenu();\r\n\r\n        $('#acc_skiptocontent').html(courseData.getAccessibleLabel('skipToMainContent'));\r\n        $('#content').attr('aria-label', courseData.getAccessibleLabel('mainContent'));\r\n\r\n        $('.navbar-brand img').attr('src', courseData.getLogo());\r\n        $('.navbar-brand img').attr('alt', courseData.getLogoAlt());\r\n        //$('.sidemenu .btn_icon').html(svgUtils.createSVG('speechbubbles')); //attr('alt', courseData.getLogoAlt());\r\n        \r\n        for (var i = 0; i < navigationBtns.length; i++){\r\n            var $btn = $(navigationButton[navigationBtns[i].toUpperCase()+'_BUTTON']);\r\n            var btnTitle = $btn.eq(0).find('.btn_text').text();\r\n            $btn.attr('aria-label', btnTitle);\r\n            //console.log('UIController::setupUI', btnTitle);\r\n            $btn.parent()\r\n                .data('lang-title', btnTitle)\r\n                .attr('data-original-title', btnTitle);\r\n            //if (navigationConfig.buttons[navigationBtns[i]] || componentConfig[navigationBtns[i]]){\r\n                var $btnIcon = $btn.find('.btn_icon');\r\n                $btnIcon.attr('aria-hidden', 'true');\r\n                $btnIcon.html(svgUtils.createSVG(navigationBtns[i])); //attr('alt', courseData.getLogoAlt());\r\n                var timeline = svgUtils.animateSVG(navigationBtns[i], $btnIcon);\r\n                timeline.pause();\r\n                navigationBtnTimelines.push(timeline);\r\n            //}\r\n        }\r\n        if (navigationBtns.indexOf('audio') != -1){\r\n           self.audioIconSVGTimeline = navigationBtnTimelines[navigationBtns.indexOf('audio')];\r\n        }\r\n        \r\n        $('.navbar [data-toggle=\"tooltip\"]').tooltip();\r\n        \r\n        \r\n        //create languages\r\n        var numLanguages = 0;\r\n        var htmlStr = '';\r\n        for (var i = 0; i < languageConfig.languages.length; i++){\r\n            if (languageConfig.languages[i].active){\r\n                numLanguages++;\r\n                htmlStr += '<li><a href=\"#\" data-language-code=\"'+languageConfig.languages[i].code+'\">'+languageConfig.languages[i].language+'</a></li>';            \r\n            }\r\n        }\r\n        $('#language-dropdown .dropdown-menu').html(htmlStr);\r\n        if (numLanguages == 1){\r\n            $('.language-dropdown').hide().removeClass('visible-xs').addClass('hidden-xs');\r\n        } else {\r\n            $('#language-dropdown .dropdown-menu a').on('click keypress', utils.handleClickAndPress(function (e) {\r\n                var $this = $(e.currentTarget);\r\n                //console.log($this.data('language-code'));\r\n                loadLanguage($this.data('language-code'));\r\n            }));            \r\n        }\r\n\r\n\r\n        //$('.navbar-brand img').attr('src', xmlData.langXML.logo[0].Text);\r\n        // $('.navbar-text').html(courseData.getCourseTitle());\r\n        $('.navbar-text').html(courseData.data.title[0].Text);\r\n\r\n        \r\n\r\n        if (courseData.data.settings[0].navigation[0].footer){\r\n            var currentDate = new Date();\r\n            var year = currentDate.getFullYear();\r\n            var footerHTML = '<span class=\"copyright\">'+courseData.data.settings[0].navigation[0].footer[0].copyright[0].Text.split('{YEAR}').join(year)+'</span>';\r\n            // var footerHTML = htmlUtils.getHTMLText(courseData.data.settings[0].navigation[0].footer[0], {anim: false});\r\n            $('footer .footer-text').html(footerHTML);\r\n\r\n            // check footer for modal\r\n            $('footer .footer-text .footer-modal').on('click keypress', utils.handleClickAndPress(function (e) {\r\n                var $this = $(e.currentTarget);\r\n                if ($this.hasClass('disabled')){\r\n                    return false;\r\n                }\r\n        \r\n                $.Modal({\r\n                    //color: courseData.navData.module[navigationController.moduleIndex].color ? courseData.navData.module[navigationController.moduleIndex].color : 'blue',\r\n                    data: courseData.data.settings[0].navigation[0].footer[0].modal[0]\r\n                });\r\n                $('#modal').modal('show');\r\n            }));\r\n        } else {\r\n            $('footer').addClass('hidden');\r\n        }\r\n        \r\n        if (navigationConfig.incompletePageMessage){\r\n        \t$('.content-locked-message').html(htmlUtils.getHTMLText(courseData.data.settings[0].messages[0].contentLocked[0], {anim: false}));\r\n        }\r\n\r\n\t\t$('.navbar-brand').on('click keypress', utils.handleClickAndPress(function (e) {\r\n            var $this = $(e.currentTarget);\r\n            if ($this.hasClass('disabled')){\r\n                return false;\r\n            }\r\n            //navigationController.changePageToData(0,0,0);\r\n        }));\r\n        \r\n//        $(navigationButton.MENU_BUTTON).data('target', )\r\n        $(navigationButton.HELP_BUTTON)\r\n            .attr('data-toggle', 'modal')\r\n            .attr('data-target', '#modal');\r\n        $(navigationButton.HELP_BUTTON).on('click keypress', utils.handleClickAndPress(function (e) {\r\n            e.preventDefault();\r\n            var $this = $(e.currentTarget);\r\n            \r\n            self.showHelp(false);\r\n        }));\r\n        \r\n        $(navigationButton.RESOURCE_BUTTON)\r\n            .attr('data-toggle', 'modal')\r\n            .attr('data-target', '#modal');\r\n        $(navigationButton.RESOURCE_BUTTON).on('click keypress', utils.handleClickAndPress(function (e) {\r\n            e.preventDefault();\r\n            var $this = $(e.currentTarget);\r\n\r\n            self.showResources(false);\r\n        }));\r\n        \r\n        $(navigationButton.MENU_BUTTON).on('click keypress', utils.handleClickAndPress(function (e) {\r\n            e.preventDefault();\r\n            var $this = $(e.currentTarget);\r\n            if ($this.hasClass('disabled')){\r\n                return false;\r\n            }\r\n            navigationController.showMenu();\r\n        }));\r\n        $(navigationButton.MENU_BUTTON).disable();\r\n\r\n// action for click anywhere on page\r\n        $(document).on('click', function(event) {\r\n            //Hide the menus if visible\r\n            \r\n            /*var clickover = $(event.target);\r\n            var _opened = $('.navbar-collapse').hasClass('navbar-collapse in');\r\n            if (_opened === true && !clickover.hasClass('navbar-toggle')) {\r\n                $('button.navbar-toggle').click();\r\n            }*/\r\n            \r\n            $(window).trigger('WINDOW_CLICK');\r\n        });\r\n        \r\n        \r\n        $(window).on(courseEvent.DEVICE_BREAKPOINT_CHANGED, deviceBreakpointChanged);\r\n        $(window).on('resize', windowResize);\r\n\r\n    }\r\n    \r\n    this.showNav = function(){\r\n        //console.log('show nav');\r\n        for (var i = 0; i < navigationBtnTimelines.length; i++){\r\n            if (navigationBtns[i] != 'audio'){\r\n                navigationBtnTimelines[i].delay(1).play();\r\n            }\r\n        }\r\n    }\r\n    \r\n    this.hideNav = function(){\r\n        for (var i = 0; i < navigationBtnTimelines.length; i++){\r\n            if (navigationBtns[i] != 'audio'){\r\n                navigationBtnTimelines[i].reverse();\r\n            }\r\n        }        \r\n    }\r\n    \r\n\tthis.updateUI = function(){\r\n        if (componentConfig.search){\r\n            //clear search data\r\n            searchController.updateSearch();\r\n        }\r\n        \r\n        var completeCount = 0;\r\n        var numValidSlides = 0;\r\n        for (var i = 0; i < navigationController.pageArray.length; i++){ \r\n            if (menuArray[navigationController.pageArray[i].module]){\r\n                for (var j = 0; j < navigationController.pageArray[i].slides.length; j++){ \r\n                    if (navigationController.isValidRole(navigationController.pageArray[i].slides[j].roles)){\r\n                        //console.log(i);\r\n                        numValidSlides++;\r\n                        if (storageController.isSlideComplete(i, j)){\r\n                            completeCount++;\r\n                        }  \r\n                    }\r\n                }\r\n            }\r\n        }\r\n        \r\n        $('#userProgress #points-score').text(Math.round(completeCount/numValidSlides*100));\r\n        //console.log('COMPLETE', numValidSlides, completeCount)\r\n        \r\n        // update section marker\r\n        if (componentConfig.progress.module){\r\n            for (var i = 0; i < menuArray.length; i++){ \r\n                var $progressSection = $('#progress #progress-section'+i);\r\n                if (storageController.isModuleActive(i) && navigationController.isModuleValidForRole(i)){ \r\n                    $progressSection.removeClass('hidden');                    \r\n                    if (storageController.isModuleComplete(i)){\r\n                        $progressSection.addClass('complete');\r\n                    }\r\n                } else {\r\n                    $progressSection.addClass('hidden');                    \r\n                }\r\n            }\r\n            $('#progress .progress-section').removeClass('active');\r\n            if (menuArray[navigationController.moduleIndex]){    \r\n                $('#progress #progress-section'+navigationController.moduleIndex).addClass('active');\r\n            }\r\n        } else {\r\n            // calculate progress for whole course\r\n            var courseProgress = storageController.getProgressData();\r\n\r\n            if (componentConfig.progress.adjustments){\r\n                // need to modify with assessment progress\r\n                // if (componentConfig.progress.adjustments.pages){\r\n                //     courseProgress.num += componentConfig.progress.adjustments.pages;\r\n                //     courseProgress.num += componentConfig.progress.adjustments.pages;\r\n                // }\r\n                if (componentConfig.progress.adjustments.assessments){\r\n                    \r\n                    for (var i = 0; i < componentConfig.progress.adjustments.assessments.length; i++){ \r\n                        var assessment = window[componentConfig.progress.adjustments.assessments[i]+'Assessment'];\r\n                        if (assessment){\r\n                            courseProgress.num += assessment.data.questions.length;\r\n                            for (var j = 0; j < assessment.data.questions.length; j++){ \r\n                                courseProgress.complete += assessment.data.questions[j].attempts.length > 0 ? 1 : 0;\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n                courseProgress.perc = courseProgress.complete/courseProgress.num;\r\n            }\r\n            // console.log('PROGRESS', courseProgress);\r\n\r\n            var perc = courseProgress.perc*100;\r\n\r\n            $('#progress #progressBar').attr('aria-valuenow', Math.round(perc));\r\n            $('#progress .progress-bar-status').css('width', perc+'%');\r\n\r\n            storageController.setProgressMeasure(perc);\r\n        }\r\n        \r\n        // activate menu button\r\n        if ($(navigationButton.MENU_BUTTON).hasClass('disabled')){\r\n            // if (storageController.isModuleComplete(0)){\r\n            if (navigationController.moduleIndex > 0 && navigationController.moduleIndex != navigationController.menuModuleNum){\r\n                $(navigationButton.MENU_BUTTON).enable();\r\n            }\r\n        }\r\n\t}\r\n    \r\n    function createNavMenu(){\r\n        menuArray = courseData.getMenu();\r\n        //console.log('menuArray', menuArray);\r\n        \r\n//        for (var i = 1; i < navTextXML.module.length; i++){\r\n//        if (navTextXML.module[i].parentmodule == undefined){\r\n//            var color = navTextXML.module[i].color;\r\n//            htmlStr += '<div class=\"section '+color+'Bkg \"></div>';\r\n//        }\r\n//    }\r\n        \r\n        var $navmenubar = $('#navmenubar');\r\n        $navmenubar.addClass('menuStyle'+navigationConfig.menu.style);\r\n        for (var x in navigationConfig.menu.numPerRow){\r\n            $navmenubar.addClass('menuItemsPerRow-'+x+'-'+navigationConfig.menu.numPerRow[x]);\r\n        }\r\n        \r\n        var progresshtmlStr = '';\r\n        var htmlStr = '';\r\n        for (var i = 0; i < menuArray.length; i++){ \r\n            if (componentConfig.progress.module){\r\n                progresshtmlStr += '<div id=\"progress-section'+i+'\" class=\"progress-section'+(menuArray[i] ? '' : ' hidden')+' '+courseData.navData.module[i].color+'\"></div>';\r\n            }\r\n            if (menuArray[i]){    \r\n                \r\n                \r\n                htmlStr += '<li>';\r\n                if (menuArray[i].submenu.length == 0){     \r\n                    htmlStr += '<a href=\"#\" data-toggle=\"collapse\" data-target=\"#navmenubar\" data-module=\"'+menuArray[i].module+'\">'+menuArray[i].title+'</a>';\r\n                } else{\r\n                    htmlStr += '<a href=\"#\" data-module=\"'+menuArray[i].module+'\">'+menuArray[i].title+'</a>';\r\n                    htmlStr += '<div class=\"submenuWrap\">';\r\n                        htmlStr += '<ul class=\"submenu \">';\r\n    \r\n                        for (var j = 0; j < menuArray[i].submenu.length; j++){     \r\n                            htmlStr += '<li><a href=\"#\" data-toggle=\"collapse\" data-target=\"#navmenubar\" data-module=\"'+menuArray[i].module+'\" data-page=\"'+menuArray[i].submenu[j].page+'\" data-slide=\"'+menuArray[i].submenu[j].slide+'\">'+menuArray[i].submenu[j].title+'</a>';\r\n                        }\r\n                        htmlStr += '</ul>';\r\n                    htmlStr += '</div>';\r\n    \r\n                }\r\n                htmlStr += '</li>';\r\n            }\r\n        }\r\n        $('#navmenubar .navmenu').html(htmlStr);\r\n        \r\n        $('#navmenubar .navmenu > li > a').on('click', function(e){\r\n            e.preventDefault();\r\n            $('#navmenubar .navmenu > li > a').not($(this)).removeClass('active');\r\n            $('#navmenubar .submenuWrap').slideUp();\r\n            \r\n            // check if has a submenu\r\n            if ($(this).parent().find('.submenu').length){\r\n                // show submenu\r\n                $(this).toggleClass('active');\r\n                if ($(this).hasClass('active')){\r\n                    $(this).parent().find('.submenuWrap').delay(300).slideDown();\r\n                }\r\n                //navigationController.changePageToData(parseInt($(this).data('module')),0,0);\r\n            } else{\r\n                $(this).addClass('active');\r\n                navigationController.changePageToData(parseInt($(this).data('module')),0,0);\r\n            }\r\n        });\r\n        \r\n        $('#navmenubar .navmenu .submenu > li > a').on('click', function(e){\r\n            e.preventDefault();\r\n            navigationController.changePageToData(parseInt($(this).data('module')), parseInt($(this).data('page')), parseInt($(this).data('slide')));\r\n        });\r\n        \r\n        var $navmenubarInner = $('#navmenubarInner');\r\n        //$navmenubarInner.removeClass(utils.getWordsByFragment($this[0].className, 'menuStyle').join(' '))\r\n        \r\n        //hover events for menuStyle 0\r\n        $('#navmenubar.menuStyle0 .navmenu > li a').hover(function(){\r\n            $navmenubarInner[0].className = '';\r\n            $navmenubarInner.addClass('moduleBkg moduleBkg'+($(this).parent().index()+1));\r\n        },function(){\r\n            $navmenubarInner[0].className = '';\r\n        });\r\n        \r\n        // progress bar\r\n        \r\n        if (componentConfig.progress.module){\r\n            $('#progress #progress-sections').html(progresshtmlStr);\r\n        } else {\r\n            $('#progress #progress-sections').remove();\r\n            $('#progress #progress-section-marker').remove();\r\n        }\r\n        $('#progress #progress-text').html(htmlUtils.getHTMLText(courseData.data.settings[0].navigation[0].progress[0]));\r\n    }\r\n    \r\n\r\n    function deviceBreakpointChanged(){\r\n            \r\n        if (responsiveUtils.getCurrentViewport() == 'xs' || (responsiveUtils.prevViewport == 'xs' && responsiveUtils.getCurrentViewport() != 'xs')){\r\n            //console.log(prevViewport+'>'+responsiveUtils.getCurrentViewport());\r\n            // need to manually change the data-target attributes to allow the menus to appear\r\n            $('#navbar, #navmenubar')\r\n                .removeClass('in');\r\n                // .attr('aria-expanded', false);\r\n        }\r\n        if (responsiveUtils.getCurrentViewport() == 'xs'){\r\n            $('#search-dropdown').addClass('open');\r\n        }\r\n        if (responsiveUtils.getCurrentViewport() == 'xs'){\r\n            //remove tooltips on mobile\r\n            //$('.navbar [data-toggle=\"tooltip\"]').tooltip('destroy');\r\n            $('.navbar [data-toggle=\"tooltip\"]').attr('data-original-title', '');\r\n        } else {\r\n            \r\n            $('.navbar [data-toggle=\"tooltip\"]').each(function(){\r\n                //console.log('tooltip title', $(this).data('original-title'), $(this).data('lang-title'))\r\n                $(this).attr('data-original-title', $(this).data('lang-title')); \r\n            });\r\n            //$('.navbar [data-toggle=\"tooltip\"]').tooltip();\r\n        }\r\n        \r\n        // update any device specific classes\r\n        htmlUtils.updateDeviceSpecificClasses();\r\n\r\n        contentController.breakpointChanged();  \r\n    }\r\n\r\n    function windowResize(){\r\n        contentController.resizeContent();    \r\n        \r\n        navigationController.checkForScroll();\r\n    }\r\n\r\n    this.showHelp = function(force){\r\n        force = typeof force !== 'undefined' ? force : true;\r\n\r\n        var modalData = courseData.data.help;\r\n\r\n        $.Modal({\r\n            class: 'help',\r\n            data: modalData\r\n        });\r\n        \r\n        for (var i = 0; i < navigationBtns.length; i++){\r\n            var $btnIcon = $('.nav '+navigationButton[navigationBtns[i].toUpperCase()+'_BUTTON']+' .btn_icon');\r\n            var $modalBtnIcon = $('#modal '+navigationButton[navigationBtns[i].toUpperCase()+'_BUTTON']+' .btn_icon');\r\n        \r\n            $modalBtnIcon.html($btnIcon.html());\r\n        }\r\n\r\n        if (force){\r\n            $('#modal').modal('show');\r\n        }\r\n    }\r\n\r\n    this.showResources = function(force){\r\n        force = typeof force !== 'undefined' ? force : true;\r\n\r\n        var modalData = courseData.data.resource;\r\n\r\n        $.Modal({\r\n            class: 'resource',\r\n            data: modalData\r\n        });\r\n\r\n        if (force){\r\n            $('#modal').modal('show');\r\n        }\r\n    }\r\n    \r\n    init();\r\n}","var ComponentController = function () {\r\n    var self = this;\r\n    this.slideObj;\r\n    var $slide;\r\n    \r\n    // this.componentManagerArray = [];\r\n    // this.componentsObj = [];\r\n    this.componentObjectsArray = [];\r\n    \r\n    this.saveDataObj = {};\r\n\r\n    this.setupDone = false;\r\n\r\n    this.firstIncompleteComponentIndex = -1;\r\n    this.lastVisibleComponentIndex = -1;\r\n//    this.getSaveData = getSaveData;\r\n//    this.setSaveData = setSaveData;\r\n    this.elementsToResize = {};\r\n    \r\n    this.init = function(_slideObj){\r\n        //console.log(_slideObj);\r\n        if (_slideObj){            \r\n            self.slideObj = _slideObj;\r\n            $slide = self.slideObj.$slide;\r\n            \r\n            self.saveDataObj = self.slideObj.getSaveData();\r\n            //console.log(self.slideObj.getSaveData())\r\n        }\r\n    }\r\n    \r\n    this.generateComponents = function(node){ \r\n        // send to recurseXML for XML\r\n        return htmlUtils.recurseXML(node, {}, {term: 'component', callback: self.createComponent});\r\n    }\r\n    \r\n    this.displayComponents = function(){\r\n        //console.log('ComponentController::componentDisplayed checkComponentsComplete')\r\n        \r\n        for (var i = 0; i < self.componentObjectsArray.length; i++){\r\n            if (self.isComponentValid(self.componentObjectsArray[i])){\r\n                // if (self.componentObjectsArray[i].parentComponent){\r\n                //     //check if has a parent\r\n                // } else{\r\n                    self.componentObjectsArray[i].componentDisplayed();\r\n                // }\r\n            }\r\n//            try {\r\n//            } catch (e){\r\n//                console.log(e);\r\n//            } \r\n        }\r\n        \r\n        // s any component managers, e.g. mcqtawa\r\n        // for (var x in self.componentsObj){\r\n        //   if (self[x+'Manager']){\r\n        //       try {\r\n        //         self[x+'Manager'].componentsDisplayed();\r\n        //       } catch (e){\r\n                  \r\n        //       }\r\n        //     }\r\n        // }\r\n        \r\n        setTimeout(function(){\r\n            self.breakpointChanged();\r\n            self.resizeContent();\r\n        },50);\r\n        \r\n        self.checkComponentsComplete();\r\n    }\r\n    \r\n    this.setupComponents = function(){\r\n        // console.log('ComponentController::setupComponents', self.slideObj.slideNum, self.componentObjectsArray.length);\r\n        var componentsToSetup = [];\r\n        for (var i = 0; i < self.componentObjectsArray.length; i++){\r\n            var component = self.componentObjectsArray[i];\r\n            if (!component.isSetup){\r\n                componentsToSetup.push(component);\r\n\r\n                // console.log(self.componentObjectsArray[i], i)\r\n                \r\n                self.getComponentRoles(component);\r\n\r\n                if (component.setupComponent){\r\n                    component.setupComponent();\r\n                }\r\n            }\r\n        }\r\n        \r\n        // add any component actions\r\n        for (var i = 0; i < componentsToSetup.length; i++){\r\n            var component = componentsToSetup[i];\r\n            //console.log('ComponentController::setupComponents', component.dataNode.actions)\r\n            //console.log(component)\r\n            if (!self.isComponentValidForRole(component, navigationController.roles)){\r\n                component.$component.addClass('hidden rolehidden');\r\n            }\r\n\r\n            //is this component inside another? if so what it its parent?\r\n            var $childComponents = component.$component.find('.component');\r\n            if ($childComponents.length){\r\n                $childComponents.each(function(){\r\n                    var childIndex = $(this).data('componentindex');\r\n                    //console.log('CHILD', i, childIndex);\r\n                    self.componentObjectsArray[childIndex].parentComponent = i;\r\n                    component.childComponents.push(childIndex);\r\n                });\r\n            }\r\n            \r\n            // if component has actions\r\n            if (component.dataNode.actions){\r\n                \r\n                component.$component.addClass('action');\r\n\r\n                // any initial setup for actions\r\n                actionUtils.setupActions(component, component.dataNode.actions);\r\n                \r\n                for (var action in component.dataNode.actions){\r\n                    var actionRef = component.dataNode.actions[action];\r\n                    component.$component.addClass('action-'+action);\r\n                    // If a reveal exercise we may want to move the revealed element alongside this - we do this by creating a clone\r\n                    if (component.dataNode){                        \r\n                        if (component.dataNode.xsCloneRevealAlongside){                        \r\n                            var $revealComponents = getComponents(actionRef.split(','));\r\n                            $revealComponents.each(function(){\r\n                                var cloneID =  $(this).attr('id')+'-clone';\r\n                                $(this).data('clone', cloneID);\r\n                                var $clone = $(this).clone().attr('id', cloneID).addClass('hidden-sm hidden-md hidden-lg');\r\n                                $(this).addClass('hidden-xs');\r\n                                component.$component.after($clone);\r\n                            });\r\n                        }\r\n                    }\r\n                    if (action == 'modal'){\r\n                        //console.log('modal action found');\r\n                        // need to apply the modal number to the component\r\n                        // component.$component.addClass('modalLink');\r\n                        component.$component.attr('data-modal', actionRef);\r\n                    }\r\n                    if (action == 'popover'){\r\n                        console.log('popover action found');\r\n                        // need to apply the popover number to the component\r\n                        component.$component.attr('data-popover', actionRef);\r\n                    }\r\n                }\r\n                component.$component.attr('role', 'button');\r\n                component.$component.attr('tabindex', 0);\r\n                \r\n                //console.log(component.actions)\r\n//                component.$component.on('click', function(){\r\n                component.$component.on('click keypress', utils.handleClickAndPress(function (e) {\r\n                    var $this = $(e.currentTarget);\r\n                    //console.log('click keypress', $this.is(':visible'))\r\n                    if ($this.hasClass('disabled') || $this.css('opacity') == 0) {\r\n                        return false;\r\n                    }\r\n                    \r\n                    \r\n                    var index = parseInt($this.data('componentindex'));\r\n                    var thisComponent = self.componentObjectsArray[index];\r\n                    \r\n                    self.setComponentComplete(thisComponent);\r\n                    \r\n                    actionUtils.fireActions(thisComponent, thisComponent.dataNode.actions);\r\n                    \r\n                    \r\n                    \r\n                    //thisComponent.xsCloneRevealAlongside = (thisComponent.dataNode.xsCloneRevealAlongside == true) ? true : false;\r\n                            \r\n                    \r\n                    \r\n                    $this.closest('.slide').find('.action-reveal, .action-hideandreveal').not($this).removeClass('active');\r\n                    $this.addClass('active');\r\n                    \r\n                    //self.setComponentComplete(thisComponent);\r\n    //                componentController.callFunction('checkAnswers');\r\n                    //self.checkComponentsComplete();\r\n                }));\r\n            } else {\r\n                // no actions\r\n                if (!component.managesCompletion){\r\n                    if (component.$component.hasClass('anim')){\r\n                        // console.log('ComponentController::inview no actions', i)\r\n                        // is animated\r\n                        // console.log('ComponentController::inview_anim_complete no actions has anim')\r\n                        component.$component.on('inview_anim_complete', function(){\r\n                            // console.log('component inview_anim_complete');\r\n                            // console.log('component inview_anim_complete', $(this).find('.anim').length, $(this).find('.anim.animated').length);\r\n                            var index = parseInt($(this).data('componentindex'));\r\n                            // console.log('ComponentController::inview_anim_complete no actions', index)\r\n                            var thisComponent = self.componentObjectsArray[index];\r\n                            self.setComponentComplete(thisComponent);\r\n                            //console.log('component inview_anim_complete', index)\r\n                        });\r\n                    } else {\r\n                        self.setComponentComplete(component);\r\n                    }\r\n                }\r\n            }\r\n            // if component is draggable\r\n            if (component.draggable){\r\n                //console.log('draggable');\r\n                component.$component.addClass('drag');\r\n                component.$component.draggable({\r\n                    revert: 'invalid',\r\n                    zIndex: 100\r\n                });\r\n            }\r\n            \r\n            if (component.enableOnComplete){\r\n                // only add disabled if slide not already complete\r\n                if (!storageController.isSlideComplete(self.slideObj.currentPage, self.slideObj.slideNum)){\r\n                    component.$component.disable();\r\n                }\r\n            }\r\n            if (self.isComponentShowByCompletion(component)){\r\n                component.$component.addClass('hidden');\r\n            }\r\n\r\n            if (self.isComponentVisibleByCompletion(component)){\r\n                component.$component.addClass('invisible');\r\n            }\r\n\r\n            if (component.$component.hasClass('hidden') || component.$component.hasClass('invisible')){\r\n                // add aria-hidden for components that will be revealed\r\n                component.$component.attr('aria-hidden', 'true');\r\n                // add aria live to parent of revealed item so it will be read out\r\n                component.$component.closest('.slide').attr('aria-live', 'polite');\r\n            }\r\n\r\n            // if already set complete call setComponentComplete\r\n            if (component.isComplete){\r\n                self.setComponentComplete(component);\r\n            }\r\n\r\n            // match height of element?\r\n            if (component.dataNode.matchHeight){\r\n                // if set to anything else match that key; if set to true match any other component with matchHeight = true\r\n                var key = component.dataNode.matchHeight == 'true' ? 'elements' : component.dataNode.matchHeight;\r\n                // add to array\r\n                if (self.elementsToResize[key]){\r\n                    self.elementsToResize[key] = self.elementsToResize[key].add(component.$component);\r\n                } else{\r\n                    self.elementsToResize[key] = component.$component;\r\n                }\r\n                // (self.elementsToResize[key] = self.elementsToResize[key] || []).push(component.$component);\r\n            }\r\n            \r\n            component.$component.on('inview_anim_complete', function(){\r\n            \t// console.log('ContentController:: inview_anim_complete', e.target)\r\n                // if has pulses let's activate\r\n                if ($(this).hasClass('enable_on_anim_complete')){\r\n                    $(this).enable();\r\n                }\r\n\r\n                //$(this).removeClass('anim');\r\n                $(this)[0].className = $(this)[0].className.replace('suppress-', '');\r\n            });\r\n\r\n            \r\n\r\n            // check internal animations are complete\r\n            self.checkComponentAnimsComplete(component);\r\n            \r\n        }\r\n        // console.log(self.elementsToResize)\r\n        // tell components setup is complete\r\n        for (var i = 0; i < componentsToSetup.length; i++){\r\n            if (componentsToSetup[i].setupComplete){  \r\n                \r\n                componentsToSetup[i].setupComplete();\r\n            }\r\n        }\r\n        \r\n        // initialise any component managers, e.g. mcqtawa - MANAGERS REMOVED\r\n        // for (var x in self.componentsObj){\r\n        //   if (self[x+'Manager']){\r\n        //         self[x+'Manager'].init(self.slideObj, self.componentsObj[x].components);\r\n        //     }\r\n        // }\r\n        \r\n        htmlUtils.updateDeviceSpecificClasses();\r\n\r\n        self.setupDone = true;\r\n    }\r\n    \r\n    \r\n    this.createComponent = function(componentName, componentData){\r\n        // console.log('ComponentController::createComponent', componentName)\r\n        var htmlStr = '';\r\n        \r\n        var componentClassName = contentController.isComponentAvailable(componentName); //utils.capitalizeFirstLetter(componentName);\r\n        // console.log('createComponent', componentName, componentClassName)\r\n        if (componentClassName){\r\n            var lowercaseComponentName = componentName.toLowerCase();\r\n            // check attributes\r\n            var id = '';\r\n            if (componentData.id) {\r\n                id = componentData.id;\r\n            }\r\n            if (id == ''){\r\n                if (self.slideObj){\r\n                    id = self.slideObj.slideNum+'-'+self.componentObjectsArray.length;\r\n                } else {\r\n                    id = self.componentObjectsArray.length;\r\n                }\r\n            }\r\n            id = 'component-'+id;\r\n            \r\n            if (!componentData.nodeName) {\r\n                // if component is generated without XML, set the nodeName to 'component'\r\n                componentData.nodeName = 'component';\r\n            }\r\n\r\n            // console.log(componentData.type, htmlUtils.getClasses(componentData, 'fadeIn'))\r\n            htmlStr += '<div id=\"'+id+'\" class=\"component component-'+lowercaseComponentName+htmlUtils.getClasses(componentData)+'\" '+htmlUtils.getAttributes(componentData)+' data-componentindex=\"'+self.componentObjectsArray.length+'\">';\r\n        \r\n            // if (typeof window['Component'+componentClassName] == 'function'){\r\n                \r\n                //console.log(componentClassName, eval('Component'+capitalisedName));\r\n\r\n                // create new instance of the component e.g. new ComponentMcqtawa\r\n                // var componentObj = eval('new Component'+componentClassName+'()');\r\n                var componentObj = new AvailableClasses.components[componentClassName];\r\n                // console.log(componentObj);\r\n                componentObj.name = componentName;\r\n\r\n                //store the component in the array\r\n                self.componentObjectsArray.push(componentObj);\r\n\r\n                // make object accessible from short variables of debuggin\r\n                window[id.split('-').join('_')] = componentObj;\r\n\r\n                // initialise\r\n                componentObj.init(self, componentData, id, self.componentObjectsArray.length-1);\r\n\r\n                // get component HTML\r\n                var componentHTML = componentObj.getHTML();\r\n                \r\n                htmlStr += componentHTML;\r\n                htmlStr += '</div>';\r\n\r\n                self.getAbilities(componentObj, componentData);\r\n\r\n                // if (self.componentsObj[componentClassName] == undefined){\r\n                //     self.componentsObj[componentClassName] = {\r\n                //         name: componentClassName, \r\n                //         components: []\r\n                //     }\r\n                // }\r\n\r\n                // self.componentsObj[componentClassName].name = componentClassName;\r\n                // self.componentsObj[componentClassName].components.push(componentObj);\r\n\r\n                //console.log('self.componentsObj.length', self.componentsObj.length, Object.keys(self.componentsObj).length);\r\n\r\n                // try {\r\n                //     // create component manager if exists\r\n                //     self[componentClassName+'Manager'] = eval('new '+componentClassName+'Manager()');\r\n\r\n                //     self.componentManagerArray[self.componentsObj.length] = self[componentClassName+'Manager'];\r\n                // } catch (e){\r\n                //     //console.error(e.message);\r\n                // }\r\n            \r\n            // } else {\r\n            //     console.warn (componentName+' component not found')\r\n            //     htmlStr = htmlUtils.generateHTML(componentName, componentData);\r\n            // }\r\n        }\r\n\r\n\r\n        return htmlStr;\r\n    }\r\n\r\n    this.removeComponent = function(num){\r\n        var component = self.componentObjectsArray[num];\r\n        component.$component.remove();\r\n        component = null;\r\n    }\r\n    \r\n    this.unloadContent = function(){\r\n        //console.log('unloadContent', self.componentObjectsArray.length)\r\n        // initialise any component managers, e.g. mcqtawa\r\n        // for (var x in self.componentsObj){\r\n        //     try{\r\n        //         self[x+'Manager'].unload();\r\n        //     } catch (e){\r\n        //         //console.log()\r\n        //     }\r\n        // }\r\n        \r\n        for (var i = 0; i < self.componentObjectsArray.length; i++){\r\n            try{\r\n                // lets save component save data\r\n                self.setSaveData(self.componentObjectsArray[i]);\r\n\r\n                self.componentObjectsArray[i].unload();\r\n            } catch (e){}\r\n        }\r\n    }\r\n    \r\n    \r\n    this.resizeContent = function(){\r\n        //console.log('resizeContent', self.componentObjectsArray.length)\r\n        // initialise any component managers, e.g. mcqtawa\r\n        // for (var x in self.componentsObj){\r\n        //     try{\r\n        //         self[x+'Manager'].resize();\r\n        //     } catch (e){\r\n        //         ////console.log()\r\n        //     }\r\n        // }\r\n\r\n        for (var i = 0; i < self.componentObjectsArray.length; i++){\r\n            try{\r\n                self.componentObjectsArray[i].resize();\r\n            } catch (e){\r\n                console.log(e);\r\n            }\r\n        }\r\n\r\n        // match any heights\r\n        self.matchComponentHeights();\r\n    }\r\n    \r\n    this.breakpointChanged = function(){\r\n        for (var i = 0; i < self.componentObjectsArray.length; i++){\r\n            try{\r\n                self.componentObjectsArray[i].breakpointChanged();\r\n            } catch (e){\r\n                console.log(e);\r\n            }\r\n        }\r\n    }\r\n\r\n    this.resumeContent = function(){\r\n        //console.log('resizeContent', self.componentObjectsArray.length)\r\n        // initialise any component managers, e.g. mcqtawa\r\n        // for (var x in self.componentsObj){\r\n        //     try{\r\n        //         self[x+'Manager'].resume();\r\n        //     } catch (e){\r\n        //         ////console.log()\r\n        //     }\r\n        // }\r\n        \r\n        for (var i = 0; i < self.componentObjectsArray.length; i++){\r\n            try{\r\n                self.componentObjectsArray[i].resume();\r\n            } catch (e){\r\n                console.log(e);\r\n            }\r\n        }\r\n    }\r\n    \r\n    \r\n    this.checkComponentsSatisfied = function(){\r\n        var isSatisfied = true;\r\n        // for (var x in self.componentsObj){\r\n        //     if (self[x+'Manager']){\r\n        //         //console.log('ComponentController::checkComponentsSatisfied', x, self[x+'Manager'].isSatisfied);\r\n        //         if (!self[x+'Manager'].isSatisfied){\r\n        //             isSatisfied = false;                    \r\n        //         }                \r\n        //     }\r\n        // }\r\n                \r\n        // activate ok button\r\n        var $okBtn = $slide.find('.component.action-checkanswers');\r\n        if (isSatisfied){\r\n            $okBtn.enable();\r\n        } else {\r\n            $okBtn.disable();\r\n        }\r\n    }\r\n    \r\n    this.checkComponentsComplete = function(){\r\n        if (self.slideObj){\r\n            self.getFirstIncompleteComponent();\r\n\r\n\t        if (!self.slideObj.hidden){\r\n\t                // only check complete if not hidden\r\n\t    //        console.log('checkComponentsComplete()', self.slideObj.slideNum, self.componentObjectsArray.length)\r\n\t            var isComplete = true;\r\n\t            var completeCount = 0;\r\n\t    //        for (var x in self.componentsObj){\r\n\t    //            if (self[x+'Manager']){\r\n\t    //                console.log('ComponentController::checkComponentsSatisfied',x, self[x+'Manager'].isComplete);\r\n\t    //                if (!self[x+'Manager'].isComplete){\r\n\t    //                    isComplete = false;                    \r\n\t    //                }                \r\n\t    //            }\r\n\t    //        }\r\n\t\r\n\t            // add any component actions\r\n\t            var validCount = 0;\r\n\t            for (var i = 0; i < self.componentObjectsArray.length; i++){\r\n                    var component = self.componentObjectsArray[i];\r\n\t                if (self.isComponentValid(component)){\r\n                        validCount ++;\r\n                        if (self.checkComponentComplete(component)){\r\n                            completeCount ++;\r\n                        } else {\r\n                            isComplete = false;\r\n                            break;\r\n                        }\r\n                        // console.log('isComponentValid', component.name, component.isComplete, component.showOnComplete, component.enableOnComplete)\r\n\t                    // if (!component.isComplete && !component.showOnComplete && !component.enableOnComplete){\r\n\t                    //     isComplete = false;\r\n\t                    //     break;\r\n\t                    // } else {\r\n\t                    //     completeCount++;\r\n\t                    // }\r\n\t                }\r\n\t            }\r\n\t\r\n\t            //console.log('ComponentController::checkComponentsComplete - slide', self.slideObj.slideNum, validCount, completeCount, self.componentObjectsArray.length, isComplete);\r\n\t            ////console.log('ComponentController::checkComponentsComplete - slide', self.slideObj.slideNum, completeCount, self.componentObjectsArray, isComplete);\r\n\t            if (isComplete){\r\n\t                for (var i = 0; i < self.componentObjectsArray.length; i++){\r\n\t                    var component = self.componentObjectsArray[i];\r\n                        if (!component.$component.hasClass('conditional-hidden')){\r\n                            if ((component.showOnComplete && component.$component.hasClass('hidden')) || (component.visibleOnComplete && component.$component.hasClass('invisible'))){\r\n                                self.revealComponents([i]);\r\n                            }\r\n                            if (component.enableOnComplete && component.$component.hasClass('disabled')){\r\n                                if (component.$component.hasClass('animating')){\r\n                                    component.$component.addClass('enable_on_anim_complete');\r\n                                } else {\r\n                                    component.$component.enable();\r\n                                }\r\n                            }\r\n                            if (component.hideOnComplete){\r\n                                component.$component.slideUp(function(){\r\n                                    $(this).addClass('hidden');\r\n                                });\r\n                            }\r\n                            if (component.invisibleOnComplete){\r\n                                component.$component.fadeOut(function(){\r\n                                    $(this).addClass('invisible');\r\n                                });\r\n                            }\r\n                        }\r\n\t                }\r\n\t                \r\n\t                // let's change any instruction to last available\r\n\t                self.changeInstruction(99, false);\r\n\t                \r\n\t                self.slideObj.slideComponentsComplete();                \r\n\t            }\r\n\t        }\r\n\t\t}\r\n    }\r\n\r\n    this.checkComponentComplete = function(component){\r\n        // if (!component.isComplete && !component.showOnComplete && !component.enableOnComplete && !component.animsComplete){\r\n        if (component.isComplete && component.animsComplete){// && !component.showOnComplete && !component.enableOnComplete){\r\n            return true;\r\n        } else {\r\n            if (component.showOnComplete || component.visibleOnComplete || component.enableOnComplete){\r\n                return true;\r\n            }\r\n            return false;\r\n        }\r\n    }\r\n    \r\n    this.isComponentValid = function(component){\r\n        var $component = component.$component;\r\n        var valid = true,\r\n            visible = true;\r\n        \r\n        if (self.isComponentValidForRole(component, navigationController.roles)){\r\n            \r\n            // check if has classes hidden or hidden-xs,hidden-sm,hidden-md,hidden-lg\r\n            if (self.isComponentHidden(component) && component.revealOnComponentsCompleteArray.length > 0){\r\n                visible = false;\r\n                valid = false;\r\n            }\r\n\r\n            // check if invisible and within any node with selectiveContent class\r\n            if (valid && !$component.is(':visible')) {\r\n                 if ($component.closest('.selectiveContent').length > 0){\r\n                    valid = false;\r\n                 }\r\n            } \r\n\r\n            //check for any with visible set at a different breakpoint meaning they're hidden\r\n            // if (visible && !$component.hasClass('visible-'+responsiveUtils.getCurrentViewport())){\r\n            // if (visible && !$component.hasClass('visible-'+responsiveUtils.getCurrentViewport())){\r\n            //     for (var x in responsiveUtils.getBreakpoints()){\r\n            //         if (x != responsiveUtils.getCurrentViewport()){\r\n            //             if ($component.hasClass('visible-'+x)){\r\n            //                 valid = false;\r\n            //             }\r\n            //         }\r\n            //     }\r\n            // }\r\n            if (valid && self.isComponentHidden(component)){\r\n                valid = false;\r\n            }\r\n        } else {\r\n            valid = false;\r\n        }\r\n        \r\n        \r\n        // console.log('ComponentController::isComponentValid', component, valid);\r\n        return valid;\r\n    }\r\n\r\n    // chekc if a component is hidden or within a parent that is hidden by bootstrap hidden classes\r\n    this.isComponentHidden = function(component){\r\n        var $component = component.$component;\r\n        return responsiveUtils.isElementHidden($component);\r\n    }\r\n\r\n    this.checkComponentAnimsComplete = function(component){\r\n        // console.log('ComponentController::checkComponentAnimsComplete', component.name);\r\n        var $component = component.$component;\r\n        var $componentAnims = htmlUtils.findAnims($component, ':visible');//$component.find('.anim:visible').filter(); // exclude invisible\r\n        if (component.animsComplete || $componentAnims.length == $componentAnims.filter('.animated').length){\r\n            component.animsComplete = true;\r\n            return true;\r\n        } else {\r\n            return false;\r\n        }\r\n    }\r\n    \r\n    this.getComponentRoles = function(component){\r\n        if (component.dataNode.roles){\r\n            component.roles = component.dataNode.roles.split(',').toNumberArray();\r\n        }\r\n    }\r\n\r\n    this.isComponentValidForRole = function(component, roles){\r\n        var $component = component.$component;\r\n        var isValid = true;\r\n        // var rolesArr = utils.getWordsByFragment($component[0].className, 'role');\r\n        // if (rolesArr.length){\r\n        //     console.log('rolesArr', rolesArr)\r\n        //     isValid = false;\r\n        //     for (var i = 0; i < roles.length; i++){\r\n        //         if ($component.hasClass('role'+roles[i])){\r\n        //             isValid = true;\r\n        //             break;\r\n        //         }\r\n        //     }\r\n        // }\r\n        if (component.roles.length){\r\n            isValid = false;\r\n            for (var i = 0; i < roles.length; i++){\r\n                if (component.roles.indexOf(roles[0]) != -1){\r\n                    isValid = true;\r\n                    break;\r\n                }\r\n            }\r\n\r\n        }\r\n\r\n        //if (!component.roles.length\r\n        return isValid;\r\n    }\r\n    \r\n    this.setComponentComplete = function(component, forceComplete){\r\n        // console.log('setComponentComplete', component.name, forceComplete);\r\n        forceComplete = forceComplete;\r\n        if (component instanceof jQuery){\r\n            var index = parseInt(component.data('componentindex'));\r\n            component = self.componentObjectsArray[index];\r\n        }\r\n        \r\n        var isComplete = true;\r\n        \r\n        if (!component.isComplete){\r\n            if (forceComplete){\r\n                // set animations to complete\r\n                component.animsComplete = true;\r\n            } else {\r\n                \r\n                // console.log('setComponentComplete', component.name, component.childComponents);\r\n                if (component.childComponents.length){\r\n                    component.completeOnChildrenComplete = true;\r\n                    // does component have children? If so need to wait\r\n                    for (var i = 0; i < component.childComponents.length; i++){\r\n                        var childComponent = self.componentObjectsArray[component.childComponents[i]];\r\n                        if (!childComponent.isComplete){\r\n                            if (self.isComponentValid(childComponent)){\r\n                                // need to check if child component is enabled on complete, or shown\r\n                                // if (component.visibleOnComponentsComplete ||\r\n                                if (self.isComponentRevealedByCompletion(childComponent) ||                                     \r\n                                    childComponent.enableOnComplete){\r\n                                } else {\r\n                                    isComplete = false;\r\n                                    // console.log('setComponentComplete children', component.componentID, isComplete);\r\n                                    break;\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n                // console.log('setComponentComplete', component.name, isComplete);\r\n                if (!self.checkComponentAnimsComplete(component)){\r\n                    // console.log('checkComponentAnimsComplete', component.name, isComplete);\r\n                    component.$component.find('.anim').on('inview_anim_complete', function(){\r\n                        // this anim is a child of a component\r\n                        var component = self.getComponentObject($(this).closest('.component').data('componentindex'));\r\n                        if (self.checkComponentAnimsComplete(component)){\r\n                            // check internal animations are complete\r\n                            self.setComponentComplete(component);\r\n                        }\r\n                    });\r\n                    // console.log('setComponentComplete checkComponentAnimsComplete', isComplete);\r\n                    isComplete = false;\r\n                }\r\n            }\r\n            // console.log('setComponentComplete', component.name, isComplete);\r\n            if (isComplete){\r\n                component.isComplete = true;\r\n                component.$component.addClass('complete');\r\n                \r\n                // fire any completion actions\r\n                //console.log('setComponentComplete:completeActions', component.dataNode.completeActions)\r\n                if (component.dataNode.completeActions){\r\n                    actionUtils.fireActions(component, component.dataNode.completeActions);\r\n                }\r\n                \r\n                // fire event\r\n                component.$component.trigger(courseEvent.COMPONENT_COMPLETE);\r\n\r\n                // check any other components that rely on this being complete\r\n                for (var i = 0; i < self.componentObjectsArray.length; i++){\r\n                    var otherComponent = self.componentObjectsArray[i];\r\n                    //console.log(i, component.revealOnComponentsCompleteArray)\r\n                    \r\n                    if (self.isComponentHidden(otherComponent) && otherComponent.revealOnComponentsCompleteArray.length > 0){\r\n                        var completeCount = 0;\r\n                        for (var j = 0; j < otherComponent.revealOnComponentsCompleteArray.length; j++){\r\n                            if (self.componentObjectsArray[otherComponent.revealOnComponentsCompleteArray[j]].isComplete){\r\n                                completeCount++;\r\n                            }\r\n                        }\r\n                        if (completeCount == otherComponent.revealOnComponentsCompleteArray.length){\r\n                            self.revealComponents([i]);\r\n                        }\r\n                    }\r\n                }\r\n\r\n                // does component have parent?\r\n                if (component.parentComponent !== false){\r\n                    var parentComponent = self.componentObjectsArray[component.parentComponent];\r\n                    if (parentComponent.completeOnChildrenComplete){\r\n                        self.setComponentComplete(parentComponent);\r\n                    }\r\n                }\r\n\r\n                \r\n                // lets save component save data\r\n                self.setSaveData(component);\r\n            }\r\n            \r\n            self.checkComponentsComplete();\r\n        } else {\r\n            //console.log('setComponentComplete already complete')\r\n            component.$component.addClass('complete');\r\n        }\r\n    }\r\n\r\n    \r\n    /*this.setComponentIncomplete = function(component){\r\n        //console.log('setComponentComplete', component);\r\n        if (component instanceof jQuery){\r\n            var index = parseInt(component.data('componentindex'));\r\n            component = self.componentObjectsArray[index];\r\n        }\r\n        component.isComplete = true;\r\n        component.$component.addClass('complete');\r\n    }*/\r\n    \r\n    this.revealComponents = function(components, options){\r\n        var defaults = {\r\n            delay: 0,\r\n            duration: 400,\r\n            effect: undefined\r\n        }\r\n        options = $.extend(defaults, options);\r\n        \r\n        var effects = ['show', 'fadeIn', 'slideDown'];\r\n        for (var i = 0; i < effects.length && options.effect; i++){\r\n            if (effects[i].toLowerCase() == options.effect.toLowerCase()){\r\n                options.effect = effects[i];\r\n                break;\r\n            }\r\n        }\r\n\r\n        console.log('ComponentController::revealComponents', components, options.effect);\r\n        var $components = getComponents(components);\r\n        \r\n        $components.each(function(){\r\n            var $component = $(this);\r\n            //if ($component.hasClass('revealed')){\r\n            //    self.hideComponents($component);\r\n            //} else {\r\n                var component = self.componentObjectsArray[$component.data('componentindex')];\r\n                // if an instruction, lets hide any others on this slide\r\n                if ($component.hasClass('component-instruction')){\r\n                    console.log('revealComponents instruction', self.slideObj.slideNum, component.num);\r\n                    self.hideComponents($slide.find('.component-instruction:visible').not($component));\r\n                }\r\n                if (self.isComponentValidForRole(component, navigationController.roles)){\r\n                    // component.componentDisplayed();\r\n\r\n                    // var effect = 'show';\r\n                    if ($component.hasClass('hidden')){\r\n                        $component.removeClass('hidden');\r\n                        component.$component.attr('aria-hidden', 'false');\r\n                        \r\n                        if (!self.isComponentShowByCompletion(component)){\r\n                            $component.addClass('revealed-hidden');//.hide();\r\n                        }\r\n                            \r\n                        if (!$component.hasClass('anim') && !options.effect){\r\n                            $component.hide();\r\n                            options.effect = 'slideDown';\r\n                        }\r\n                        \r\n                        // $component.addClass('revealed').hide().slideDown({\r\n                        //     complete: function(){\r\n                        //         revealComplete();\r\n                        //     }\r\n                        // });                    \r\n                    }\r\n                    if ($component.hasClass('invisible')){\r\n                        $component.removeClass('invisible')\r\n                        component.$component.attr('aria-hidden', 'false');\r\n                        if (!self.isComponentVisibleByCompletion(component)){\r\n                            $component.addClass('revealed-invisible');//.hide();\r\n                        }\r\n                        //effect = 'slideDown';\r\n                        if (!$component.hasClass('anim') && !options.effect){\r\n                            options.effect = 'fadeIn';\r\n                        }\r\n                    }\r\n                    // console.log(component.name, effect)\r\n                    if (!self.isComponentRevealedByCompletion(component)){\r\n                        $component.addClass('revealed');\r\n                    }\r\n                    if (!options.effect){\r\n                        options.effect = 'show';\r\n                    }\r\n\r\n                    options.duration = options.effect == 'show' ? 0 : options.duration;\r\n                    console.log('ComponentController::revealComponents', options.effect);\r\n\r\n                    \r\n                    /*setTimeout(function(){\r\n                        $component[options.effect]({\r\n                            duration: options.duration,\r\n                            complete: function(){\r\n                                \r\n                                //navigationController.checkForScroll();\r\n                                // component.componentDisplayed();\r\n                                self.matchComponentHeights();\r\n\r\n                                if (instruction){\r\n                                    self.changeInstruction(instruction);\r\n                                }\r\n                                if (component.revealOnComponentsCompleteArray.length == 0){\r\n                                    //only autoscroll to if not auto revealed\r\n                                    navigationController.scrollIntoView($(this));\r\n                                }\r\n                                //$(this)[0].scrollIntoView({behavior: \"smooth\", block: 'end'});\r\n                            }\r\n                        });  \r\n                    }, options.delay);*/\r\n\r\n                    if (options.delay){\r\n                        setTimeout(function(){\r\n                            self.revealComponentsWithEffect(component, options);\r\n                        }, options.delay);\r\n                    } else {\r\n                        self.revealComponentsWithEffect(component, options);\r\n                    }\r\n\r\n                    var animationController;\r\n                    if (contentController.animationController){\r\n                        animationController = contentController.animationController;\r\n                    } else if (self.slideObj){\r\n                        if (self.slideObj){\r\n                            animationController = self.slideObj.animationController;\r\n                        }                        \r\n                    }\r\n                    if (animationController){\r\n                        animationController.triggerAnimation($component);\r\n                    }\r\n\r\n                    \r\n\r\n                    // tell any child components to display\r\n                    // for (var i = 0; i < component.childComponents.length; i++){\r\n                    //     var childComponent = self.componentObjectsArray[component.childComponents[i]];\r\n                    //     if (!childComponent.isComplete){\r\n                    //         if (self.isComponentValid(childComponent)){\r\n                    //             childComponent.componentDisplayed();\r\n                    //         }\r\n                    //     }\r\n                    // }\r\n        \r\n                    // setTimeout(function(){\r\n                        component.componentDisplayed();\r\n                    // },50);\r\n                    if (!$component.hasClass('action')){\r\n                        //self.setComponentComplete($component);\r\n                    }\r\n                }\r\n                \r\n            //}\r\n        });\r\n        setTimeout(function(){\r\n            self.resizeContent();\r\n        },50);\r\n    }\r\n\r\n    this.revealComponentsWithEffect = function(component, options){\r\n        var effects = ['show', 'fadeIn', 'slideDown'];\r\n\r\n        var effect = options.effect || 'slideDown';\r\n        if (effects.indexOf(effect) == -1){\r\n            effect = 'slideDown'\r\n        }\r\n\r\n        var instruction; \r\n        if (component.dataNode.i){\r\n            instruction = parseInt(component.dataNode.i);\r\n        } else if (component.dataNode.instruction){\r\n            instruction = parseInt(component.dataNode.instruction);\r\n        }\r\n\r\n        component.$component[effect]({\r\n            duration: options.duration,\r\n            complete: function(){\r\n                setTimeout(function(){\r\n                    navigationController.checkForScroll();\r\n                },1000);\r\n                // component.componentDisplayed();\r\n                self.matchComponentHeights();\r\n\r\n                if (instruction){\r\n                    self.changeInstruction(instruction);\r\n                }\r\n                self.showChildComponents(component.$component);\r\n\r\n                if (component.revealOnComponentsCompleteArray.length == 0){\r\n                    //only autoscroll to if not auto revealed\r\n                    navigationController.scrollIntoView($(this));\r\n                }\r\n                //$(this)[0].scrollIntoView({behavior: \"smooth\", block: 'end'});\r\n            }\r\n        });  \r\n    }\r\n    \r\n    this.hideComponents = function(components, options){\r\n        var defaults = {\r\n            delay: 0,\r\n            duration: 400,\r\n            effect: undefined\r\n        }\r\n        options = $.extend(defaults, options);\r\n\r\n        var effects = ['hide', 'fadeOut', 'slideUp'];\r\n        for (var i = 0; i < effects.length && options.effect; i++){\r\n            if (effects[i].toLowerCase() == options.effect.toLowerCase()){\r\n                options.effect = effects[i];\r\n                break;\r\n            }\r\n        }\r\n\r\n        var $components = getComponents(components);\r\n\r\n        if (!options.effect){\r\n            options.effect = 'hide';\r\n        }\r\n        options.duration = options.effect == 'hide' ? 0 : options.duration;\r\n\r\n        console.log('ComponentController::hideComponents', $components, options.effect);\r\n\r\n        function hideComponentsWithEffect(){\r\n            $components[options.effect]({\r\n                duration: options.duration,\r\n                complete:function(){\r\n                    navigationController.checkForScroll();\r\n                    \r\n                    var $component = $(this);\r\n                    \r\n                    $component.removeClass('revealed');\r\n                    if ($component.hasClass('revealed-hidden')){\r\n                        $component.removeClass('revealed-hidden').addClass('hidden');                        \r\n                    }\r\n                    if ($component.hasClass('revealed-invisible')){\r\n                        $component.removeClass('revealed-invisible').addClass('invisible');                        \r\n                    }\r\n                }\r\n            });\r\n        }\r\n\r\n        if (options.delay){\r\n            setTimeout(hideComponentsWithEffect, options.delay);\r\n        } else {\r\n            hideComponentsWithEffect();\r\n        }\r\n    }\r\n    \r\n    this.hideAndRevealComponents = function(args, hideOpts, revealOpts){\r\n        // hide all revealed\r\n        self.hideComponents($slide.find('.component.revealed'), hideOpts);\r\n        // reveal all components in args\r\n        self.revealComponents(args, revealOpts);\r\n    }\r\n    \r\n    function getComponents(args){\r\n        var $components = $();\r\n        if (args instanceof jQuery){\r\n            $components = args;\r\n        } else {\r\n            for (var i = 0; i < args.length; i++){\r\n                var $component;\r\n                if (args[i] instanceof jQuery){\r\n                    $component = args[i];\r\n                } else {\r\n                   // console.log('reveal', args[i], $('#component'+self.slideObj.slideNum+'-'+args[i]));\r\n                    // find element without custom ID\r\n                    $component = $('#component-'+self.slideObj.slideNum+'-'+args[i]);    \r\n                    if ($component.length == 0){\r\n                        // find element with custom ID\r\n                        $component = $('#component-'+args[i]);                         \r\n                    }\r\n                }\r\n                //$component.addClass('revealed').removeClass('hidden').hide().slideDown();\r\n                $components = $components.add($component);\r\n                if ($component.data('clone')){\r\n                    //console.log('CLONE FOUND', $component.data('clone'));\r\n                    $components = $components.add($('#'+$component.data('clone')));\r\n                }\r\n            }\r\n        }\r\n        return $components;\r\n    }\r\n\r\n    this.showHiddenComponents = function($el){\r\n        var $components = $el.find('.component');\r\n        // $components.each(function(){\r\n        //     var componentIndex = $(this).data('componentindex');\r\n        //     console.log('showHiddenComponents 1')\r\n        //     if (self.isComponentValid(self.componentObjectsArray[componentIndex])){\r\n        //         console.log('showHiddenComponents 2')\r\n        //         self.componentObjectsArray[componentIndex].componentDisplayed();\r\n        //     }\r\n        // });\r\n        this.revealComponents($components);\r\n    }\r\n\r\n    \r\n    this.showChildComponents = function($el){\r\n        var $components = $el.find('.component');\r\n        \r\n        $components.each(function(){\r\n            \r\n            // console.log('ComponentController::showChildComponents', $(this).data('componentindex'));\r\n            if (!$(this).parents().addBack().hasClass('hidden')){\r\n                console.log('ComponentController::showChildComponents', $(this).data('componentindex'));\r\n                // this anim is a child of a component\r\n                var component = self.getComponentObject($(this).data('componentindex'));\r\n                component.componentDisplayed();\r\n            }\r\n        });\r\n    }\r\n    \r\n    this.getComponentObject = function(num){\r\n        // if is jquery object\r\n        if (num instanceof jQuery){\r\n            num = parseInt(num.data('componentindex'));\r\n        }\r\n        return self.componentObjectsArray[num];\r\n    }\r\n    \r\n    this.retry = function(){\r\n        // check any other components that rely on this being complete\r\n        for (var i = 0; i < self.componentObjectsArray.length; i++){\r\n            var component = self.componentObjectsArray[i];\r\n            if (component.retry){\r\n                component.retry();\r\n            }\r\n        }\r\n    }\r\n    \r\n    this.checkAnswers = function(){\r\n        var correctCount = 0;\r\n        var incorrectCount = 0;\r\n        var missedCount = 0;\r\n        var isCorrect = true;\r\n        var feedbackArr = [];\r\n        \r\n        // remove ok button\r\n        $slide.find('.component.action-checkanswers').hide();\r\n        \r\n        /*for (var x in self.componentsObj){\r\n            if (self[x+'Manager']){\r\n                try {\r\n                    if (self[x+'Manager'].checkAnswers()){\r\n                    } else {\r\n                        isCorrect = false;\r\n                    }\r\n                    correctCount += self[x+'Manager'].correctCount;\r\n                    incorrectCount += self[x+'Manager'].incorrectCount;\r\n                    missedCount += self[x+'Manager'].missedCount;\r\n//                    if (isCorrect){\r\n//                        feedbackArr = feedbackArr.concat(self[x+'Manager'].checkFeedback());\r\n//                    }\r\n                } catch (e){\r\n                    \r\n                }\r\n                \r\n            }\r\n        }*/\r\n        //console.log('checkAnswers', isCorrect, correctCount, incorrectCount, missedCount);\r\n        if (correctCount > 0){\r\n            if (incorrectCount == 0 && missedCount == 0){\r\n                feedbackArr.push($slide.find('.feedbackCorrect'));\r\n            } else {\r\n                feedbackArr.push($slide.find('.feedbackPartly'));\r\n            }\r\n        } else {\r\n            feedbackArr.push($slide.find('.feedbackIncorrect'));            \r\n        }\r\n        \r\n        revealComponents(feedbackArr);\r\n    }\r\n    \r\n//    this.getComponent = function(index){\r\n//        return $slide.find('.component').eq(index);\r\n//    }\r\n    \r\n    \r\n    this.getAbilities = function(componentObj, xmlNode){\r\n        // check if component has an action\r\n        actionUtils.getActions(xmlNode, componentObj.componentController);\r\n        \r\n        componentObj.draggable = (xmlNode.draggable === \"true\");\r\n        \r\n        // check if component is set complete on completion of other components\r\n        if (xmlNode.showOnComponentsComplete || xmlNode.visibleOnComponentsComplete){\r\n            componentObj.revealOnComponentsCompleteArray = [];\r\n            if (xmlNode.showOnComponentsComplete){\r\n                componentObj.showOnComponentsComplete = true;\r\n                componentObj.revealOnComponentsCompleteArray = xmlNode.showOnComponentsComplete.split(',');\r\n            } else if (xmlNode.visibleOnComponentsComplete){\r\n                componentObj.visibleOnComponentsComplete = true;\r\n                componentObj.revealOnComponentsCompleteArray = xmlNode.visibleOnComponentsComplete.split(',');\r\n            }\r\n            for (var i = 0; i < componentObj.revealOnComponentsCompleteArray.length; i++){\r\n                // componentObj.revealOnComponentsCompleteArray[i] = parseInt(componentObj.revealOnComponentsCompleteArray[i]);\r\n                componentObj.revealOnComponentsCompleteArray[i] = self.getComponentIndexes(componentObj.num, (componentObj.revealOnComponentsCompleteArray[i]));\r\n            }\r\n        }\r\n        \r\n        //componentObj.showOnComplete = false;\r\n        // check if component is set complete on completion of other components\r\n        componentObj.showOnComplete = (xmlNode.showOnComplete === \"true\"); \r\n        componentObj.visibleOnComplete = (xmlNode.visibleOnComplete === \"true\"); \r\n        componentObj.hideOnComplete = (xmlNode.hideOnComplete === \"true\"); \r\n        componentObj.invisibleOnComplete = (xmlNode.invisibleOnComplete === \"true\"); \r\n        componentObj.enableOnComplete = (xmlNode.enableOnComplete === \"true\"); \r\n    }\r\n    \r\n//    this.mcqtawaSelected = function(){\r\n//        if ($slide.find('.option.selected').length > 0){\r\n//            console.log('activate ok');\r\n//        } else {\r\n//            console.log('deactivate ok');\r\n//        }\r\n//    }\r\n    \r\n    this.getComponentIndexes = function(componentIndex, str){\r\n        // console.log('getComponentIndexes', componentIndex, strArr)\r\n        var componentIndexes = [];\r\n\r\n        var strArr = Array.isArray(str) ? str : str.split(',');\r\n        // console.log(strArr);\r\n        for (var i = 0; i < strArr.length; i++){\r\n            if (strArr[i].indexOf('+') != -1){\r\n                // based on current index +\r\n                componentIndexes.push(componentIndex+parseInt(strArr[i].split('+').join('')));\r\n            } else if (strArr[i].indexOf('-') != -1){\r\n                // based on current index -\r\n                componentIndexes.push(componentIndex+parseInt(strArr[i]));\r\n            } else {\r\n                componentIndexes.push(strArr[i]);//.split(',');\r\n            }\r\n        }\r\n        return componentIndexes;\r\n    }\r\n\r\n    this.changeInstruction = function(num, manual){\r\n        // console.log('componentController::changeInstruction-slide', self.slideObj.slideNum,  num);\r\n        if (manual == undefined){\r\n            manual = true;\r\n        }\r\n        var $instructionComponent = $slide.find('.component-instruction');//:visible');\r\n        if ($instructionComponent.length > 0){\r\n\r\n//            $instructionComponent.filter(':visible').slideUp();\r\n\r\n            $instructionComponent.each(function(){\r\n                var instructionComponent = self.componentObjectsArray[parseInt($(this).data('componentindex'))];\r\n                // console.log('componentController::changeInstruction', instructionComponent.num);\r\n                if (self.isComponentValidForRole(instructionComponent, navigationController.roles)){\r\n                //if (instructionComponent.manual == manual){\r\n                    instructionComponent.changeInstruction(num);\r\n                //}\r\n                }\r\n            });\r\n        }\r\n    }\r\n    \r\n    this.getSaveData = function(component){\r\n        // component may be a component or a number of a component\r\n        //console.log(component)\r\n        var num = !isNaN(component) ? component : component.num;  \r\n        \r\n        return self.saveDataObj['c'+num] ? self.saveDataObj['c'+num] : {};\r\n    }\r\n    \r\n    this.setSaveData = function(component, data){\r\n        if (self.slideObj){\r\n            // component may be a component or a number of a component\r\n            var num = !isNaN(component) ? component : component.num;\r\n            // saveData may not optional - if so check component.saveData\r\n            data = data || component.saveData;\r\n            // console.log('Slide:setSaveData', data);\r\n            if (!$.isEmptyObject(data)){\r\n                if (self.saveDataObj === 0){\r\n                    // convert from 0 to {} empty object\r\n                    self.saveDataObj = {};\r\n                }\r\n                //console.log(component)\r\n                self.saveDataObj['c'+num] = data;\r\n            }\r\n                //console.log.log('Slide:setSaveData', data, self.currentPage, self.slideNum)\r\n            self.slideObj.setSaveData(self.saveDataObj);\r\n        }\r\n    }\r\n\r\n    this.getFirstIncompleteComponent = function(){\r\n        var minY = 10000000;\r\n        var maxY = 0;\r\n        self.firstIncompleteComponentIndex = -1;\r\n        self.lastVisibleComponentIndex = 0;\r\n        for (var i = 0; i < self.componentObjectsArray.length; i++){\r\n            var component = self.componentObjectsArray[i];\r\n            if (self.isComponentValid(component)){\r\n                if(component.$component.is(':visible')){\r\n                    var componentTop = component.$component.offset().top;\r\n                    if (!component.isComplete){\r\n                        // console.log('getFirstIncompleteComponent',i, componentTop);\r\n                        if (componentTop < minY ){\r\n                            minY = componentTop;\r\n                            self.firstIncompleteComponentIndex = i;\r\n                        }\r\n                    }\r\n                    if (componentTop > maxY){\r\n                        maxY = componentTop;\r\n                        self.lastVisibleComponentIndex = i;\r\n                    }\r\n                } \r\n            }\r\n        }\r\n        // console.log('getFirstIncompleteComponent', minY, self.firstIncompleteComponentIndex, self.lastVisibleComponentIndex);\r\n    }\r\n\r\n    this.getFirstComponentInView = function(){\r\n        if (self.firstIncompleteComponentIndex != -1){\r\n            return self.checkComponentInView(self.firstIncompleteComponentIndex);\r\n        } else {\r\n            return self.checkComponentInView(self.lastVisibleComponentIndex);\r\n        }\r\n    }\r\n\r\n    this.getComponentInfo = function(componentIndex){\r\n        if (componentIndex != -1){\r\n\t\t\tif (self.componentObjectsArray[componentIndex]){\r\n            \treturn {\r\n                \ttop: self.componentObjectsArray[componentIndex].$component.offset().top,\r\n                \theight: self.componentObjectsArray[componentIndex].$component.outerHeight()\r\n            \t}\r\n\t\t\t} else {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n        } else {\r\n            return false;\r\n        }\r\n\r\n    }\r\n\r\n    this.checkComponentInView = function(componentIndex){\r\n        if (componentIndex != -1){\r\n            var componentInfo = self.getComponentInfo(componentIndex);\r\n            \r\n            //var viewportTop = utils.getViewportTop();\r\n            //var \r\n\r\n            if ($(window).scrollTop() + $(window).height() < componentInfo.top){\r\n                return 'below';\r\n            } else if ($(window).scrollTop() > componentInfo.top){\r\n                if ($(window).scrollTop() > componentInfo.top+componentInfo.height){\r\n                    return 'above';\r\n                } else {\r\n                    return 'partabove';\r\n                }\r\n            } else {\r\n                // top is in viewport\r\n                if ($(window).scrollTop() + $(window).height() >= componentInfo.top+componentInfo.height){\r\n                    return 'inview';\r\n                } else {\r\n                    return 'partbelow';\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    this.matchComponentHeights = function(){\r\n        for (var x in self.elementsToResize){\r\n            // console.log('self.elementsToResize',self.elementsToResize[x]);\r\n            utils.matchElementHeights(self.elementsToResize[x]);\r\n        }\r\n    }\r\n\r\n    this.isComponentRevealedByCompletion = function(component){\r\n        return (self.isComponentShowByCompletion(component) || self.isComponentVisibleByCompletion(component));\r\n    }\r\n\r\n    this.isComponentShowByCompletion = function(component){\r\n        return (component.showOnComplete || (component.showOnComponentsComplete && component.revealOnComponentsCompleteArray.length));\r\n    }\r\n\r\n    this.isComponentVisibleByCompletion = function(component){\r\n        return (component.visibleOnComplete || (component.visibleOnComponentsComplete && component.revealOnComponentsCompleteArray.length));\r\n    }\r\n}","var ContentController = function () {\r\n    var self = this;\r\n    \r\n    var $pageContainer = $('.pageContainer');\r\n    var $pageBackground = $('.pageBackground');\r\n    this.slideArray = [];\r\n    \r\n    this.navXMLData;\r\n    this.langXMLData;\r\n    \r\n    this.changePage = changePage;\r\n    this.unloadContent = unloadContent;\r\n    this.loadContent = loadContent;\r\n    this.resizeContent = resizeContent;\r\n    this.breakpointChanged = breakpointChanged;\r\n    this.scrollElementIntoView = scrollElementIntoView;\r\n    this.scrollSlideIntoView = scrollSlideIntoView;\r\n    \r\n    this.numValidSlides = 0;\r\n    this.lastSlideNum = 0;\r\n\r\n    this.firstIncompleteSlide = 0;\r\n    \r\n    this.allowReturn = true;\r\n\r\n    this.animationController;\r\n\r\n    function init(){\r\n        console.log('ContentController:init');\r\n\r\n        $(document).on(courseEvent.SLIDE_LOAD_COMPLETE, showContent);\r\n        $(document).on(courseEvent.SLIDE_LOAD_COMPLETE, checkPageComplete); \r\n        $(document).on(courseEvent.SLIDE_COMPLETE, checkPageComplete);\r\n    }\r\n    \r\n    function changePage(){\r\n        //console.log('ContentController:changePage');\r\n            //unloadContent();\r\n        $('body').addClass('page-anim-out-fw');\r\n        setTimeout(function(){\r\n            if ($('body').hasClass('page-anim-out-fw')){\r\n                $('body').removeClass('page-anim-out-fw');\r\n                $('body').addClass('page-anim-in-fw');\r\n            } else {\r\n                $('body').removeClass('page-anim-out-bw');\r\n                $('body').addClass('page-anim-in-bw');\r\n            }\r\n            unloadContent();\r\n            \r\n            loadContent();\r\n        }, 500);\r\n        \r\n    }\r\n    \r\n    function unloadContent(){\r\n        //console.log('ContentController:unloadContent');\r\n//        console.log('unloadContent');\r\n        \r\n        // jump to top of slide view\r\n        $(\"html, body\").animate({scrollTop: 0}, 0);\r\n        \r\n        instructionController.change('');\r\n        //$pageContainer.fadeOut(function(){\r\n            \r\n            $pageBackground.css('background-image', 'none');\r\n            \r\n            //console.log('unloadContent', self.slideArray.length);\r\n            for (var i = 0; i < self.slideArray.length; i++){\r\n                if (!self.slideArray[i].isHiddenForUser()){\r\n                    self.slideArray[i].unloadContent();\r\n                }\r\n            }\r\n            \r\n        //setTimeout(function(){\r\n            self.slideArray = [];\r\n            $pageContainer.empty();\r\n            $pageContainer[0].className = 'pageContainer';\r\n            \r\n            // console.log('BODY REMOVE', navigationController.prevPage, navigationController.currentPage)\r\n            if (navigationController.prevPage){\r\n                $('body').removeClass('page-'+navigationController.prevPage);\r\n            }\r\n            //loadContent();\r\n        //}, 500);\r\n    }\r\n    \r\n    function loadContent(){    \r\n        \r\n        $(document).trigger(courseEvent.PAGE_LOAD_START);\r\n\r\n        // console.log('BODY ADD', navigationController.prevPage, navigationController.currentPage)\r\n        $('body').removeClass('page-0').addClass('page-'+navigationController.currentPage);\r\n\r\n        self.numValidSlides = 0;\r\n        \r\n        self.navXMLData = courseData.getPageData(navigationController.moduleIndex, navigationController.pageIndex); //xmlData.navXML.module[navigationController.moduleIndex].page[navigationController.pageIndex];\r\n        self.langXMLData = courseData.getPageLangData(navigationController.moduleIndex, navigationController.pageIndex); \r\n        //self.langXMLData = xmlData.langXML.module[navigationController.moduleIndex].page[navigationController.pageIndex];\r\n        \r\n        //console.log ('ContentController:: loadContent', self.langXMLData);\r\n        \r\n        if (self.navXMLData.return){\r\n            // allow this page to be accessed again after completion?\r\n            self.allowReturn = (self.navXMLData.return === \"true\");\r\n        }\r\n        \r\n        if (self.langXMLData){\r\n            var imgPath = self.langXMLData.bkgpath;\r\n            if (imgPath){\r\n                $pageBackground.css('background-image', 'url('+utils.getImagePath(imgPath)+')');\r\n            }\r\n\r\n            $('.preloader').show();\r\n            for (var i = 0; i < navigationController.numSlides; i++){\r\n\r\n                var slide = new Slide();\r\n                self.slideArray.push(slide);\r\n                // check if slide is hidden for this role\r\n                if (navigationController.isValidRole(navigationController.pageArray[navigationController.currentPage].slides[i].roles)){\r\n                    slide.hiddenForCurrentRole = false;\r\n                }\r\n                var slideObj = navigationController.pageArray[navigationController.currentPage].slides[i];\r\n                \r\n                // check if slide is hidden for this language\r\n                if (slideObj.langs.indexOf(languageConfig.languages[currentLanguage].code) != -1){\r\n                    slide.hiddenForCurrentLanguage = false;\r\n                }\r\n                \r\n                if (!slide.isHiddenForUser()){\r\n                    self.numValidSlides ++;\r\n                    self.lastSlideNum = i;\r\n                }\r\n            }\r\n            for (var i = 0; i < navigationController.numSlides; i++){\r\n                if (!self.slideArray[i].isHiddenForUser()){\r\n                    self.slideArray[i].init(i);  \r\n                }\r\n            }\r\n        } else {\r\n            // no language i18n XML error\r\n            alert('no language i18n XML');\r\n        }\r\n        //console.log('ContentController:loadContent', self.slideArray);\r\n        \r\n    }\r\n    \r\n    function showContent(event){\r\n        // console.log('ContentController::showContent');\r\n        var loadedCount = 0;\r\n        for (var i = 0; i < self.slideArray.length; i++){\r\n            if (self.slideArray[i].loaded && !self.slideArray[i].isHiddenForUser()){\r\n                loadedCount++;\r\n            }\r\n        }\r\n        // console.log('ContentController::showContent', loadedCount, self.numValidSlides);//, self.slideArray);\r\n        \r\n        // check that all slides have been loaded\r\n        if (loadedCount == self.numValidSlides){\r\n            \r\n            $pageContainer.removeClass('singleSlide multiSlide');\r\n            if (loadedCount > 1){\r\n                $pageContainer.addClass('multi');\r\n            } else {\r\n                $pageContainer.addClass('singleSlide');\r\n            }\r\n            // add module number\r\n            $pageContainer.addClass('module'+navigationController.moduleIndex);\r\n           \r\n            // add module classes\r\n            // from navigation.xml\r\n            var moduleData = courseData.getModuleData(navigationController.moduleIndex); \r\n            if (moduleData.class){\r\n                $pageContainer.addClass(moduleData.class);\r\n            }\r\n            // colors\r\n            if (moduleData.color){\r\n                $pageContainer.addClass(moduleData.color);\r\n            }\r\n            // from i18n.xml\r\n            var moduleLangData = courseData.getModuleLangData(navigationController.moduleIndex); \r\n            if (moduleLangData.class){\r\n                $pageContainer.addClass(moduleLangData.class);\r\n            }\r\n            // add page classes\r\n            $pageContainer.addClass(self.langXMLData.class);\r\n            \r\n            storageController.saveData();\r\n            \r\n            $('.preloader').hide();\r\n            $pageContainer.fadeIn();\r\n            $('body').removeClass('page-anim-in-fw page-anim-in-bw');\r\n            \r\n            uiController.updateUI();\r\n\r\n            self.firstIncompleteSlide = 0;\r\n\r\n//            var prevSlideIsMandatory = false;\r\n//            \r\n//            for (var i = 0; i < self.slideArray.length; i++){\r\n//                //console.log('ContentController::showContent', self.slideArray[i].hiddenForCurrentRole, self.slideArray[i].hidden);\r\n//                if (prevSlideIsMandatory){\r\n//                    self.slideArray[i].hidden = true;\r\n//                } \r\n//                \r\n//                if (self.slideArray[i].mandatory){\r\n//                    prevSlideIsMandatory = true;\r\n//                }\r\n//            }\r\n            \r\n            var focusSet = false;\r\n            // let's show all the slides\r\n            for (var i = 0; i < self.slideArray.length; i++){\r\n                \r\n                if (!focusSet && self.slideArray[i].loaded && !self.slideArray[i].isHiddenForUser()){\r\n                    var slideTitle = self.slideArray[i].title;\r\n                    // var slideTitle = courseData.getSlideLangData(navigationController.moduleIndex, navigationController.pageIndex, 0).title;\r\n                    // slideTitle = slideTitle ? slideTitle[0].Text : '';\r\n                    // update document title\r\n                    navigationController.updateCourseTitle(slideTitle);\r\n\r\n                    if (slideTitle){\r\n                        // if there is a title let's update the skip to link\r\n                        $('#acc_skiptocontent').html(courseData.getAccessibleLabel('skipTo').split('{title}').join(slideTitle));\r\n                        $('#content').attr('aria-label', courseData.getAccessibleLabel('mainTitleContent').split('{title}').join(slideTitle));\r\n                    } else {\r\n                        // if not set to generic\r\n                        $('#acc_skiptocontent').html(courseData.getAccessibleLabel('skipToMainContent'));\r\n                        $('#content').attr('aria-label', courseData.getAccessibleLabel('mainContent'));\r\n                    }\r\n                    // set focus to first slide\r\n                    self.slideArray[i].$slide.focus();\r\n                    focusSet = true;\r\n                }\r\n                // console.log('ContentController::showContent', i, self.slideArray[i].isHiddenForUser(), self.slideArray[i].hidden)\r\n//                if (!self.slideArray[i].isHiddenForUser() && self.slideArray[i].hidden){\r\n//                    self.slideArray[i].showContent();\r\n//                }\r\n//                if (!self.slideArray[i].isHiddenForUser()){\r\n//                    if (self.slideArray[i].hidden){\r\n//                        self.slideArray[i].showContent();\r\n//                        if (self.slideArray[i].mandatory && !self.slideArray[i].complete){\r\n//                            break;\r\n//                        }\r\n//                    }                   \r\n//                }\r\n                   \r\n//                if (self.slideArray[i].shownByComponent){\r\n//                    // skip past any slides that are shown by components\r\n//                    continue;\r\n//                }\r\n                if (!checkAndShowContent(i, false)){                    \r\n                    break;                    \r\n                }\r\n            }\r\n            \r\n            //setTimeout(function(){\r\n            \r\n                if (courseConfig.animate.enable){\r\n                    if (courseConfig.animate.slide){\r\n                        // $pageContainer.find('.slide').each(function(){\r\n                        //     setupInViewAnimations($(this));\r\n                        // });\r\n                        for (var i = 0; i < self.slideArray.length; i++){\r\n                            var slide = self.slideArray[i];\r\n                            slide.animationController = new AnimationController();\r\n                            slide.animationController.setupAnimations(slide.$slide);\r\n                        }\r\n                    } else {\r\n                        // setupInViewAnimations($pageContainer);\r\n                        self.animationController = new AnimationController();\r\n                        self.animationController.setupAnimations($pageContainer);\r\n                    }\r\n                }\r\n                \r\n            //}, 500);\r\n            \r\n            if (navigationController.locationHash != ''){\r\n                setTimeout(function(){\r\n                    scrollElementIntoView($(navigationController.locationHash));\r\n                    navigationController.locationHash = '';\r\n                }, 1000);\r\n            } else if (navigationController.gotoSlide != 0){\r\n                //$('#slide'+navigationController.currentSlide)[0].scrollIntoView({behavior: \"smooth\", block: 'start'});\r\n                \r\n                //scrollSlideIntoView(navigationController.currentSlide);\r\n            }\r\n        \r\n            if (self.langXMLData.title){\r\n                // change page title\r\n                titleController.change(self.langXMLData.title[0].Text);\r\n            }\r\n            \r\n            // add code for modals\r\n            var $modals = $pageContainer.find('[data-modal]');\r\n            $modals\r\n                .attr('data-toggle', 'modal')\r\n                .attr('data-target', '#modal')\r\n                .attr('aria-haspopup', 'dialog');\r\n\r\n            $modals.on('click keypress', utils.handleClickAndPress(function (e) {\r\n                // there is an issue with the modal not showing up when the user clicks on the <div> or <button> via the keyboard keypress event so reroute it to the click event\r\n                if (e.type == 'keypress'){\r\n                    e.preventDefault();\r\n                    e.currentTarget.click();\r\n                    return false;\r\n                    \r\n                }\r\n                var $this = $(e.currentTarget);\r\n                if ($this.hasClass(navigationButton.DISABLED)){\r\n                    return false;\r\n                }\r\n                $this.addClass('done');\r\n                var modalIndex = $this.data('modal');//$this.attr('id').match(/\\d+/)[0];\r\n                //console.log(modalIndex, $this.closest('.slide').data('slide'), self.slideArray.length, contentController.slideArray.length, self.slideArray[$this.closest('.slide').data('slide')]);\r\n                var modalData = contentController.slideArray[$this.closest('.slide').data('slide')].data.modals[0].modal[modalIndex];\r\n                // console.log('modal', modalIndex, modalData);\r\n\r\n                $.Modal({\r\n                    $el: $this,\r\n                    data: modalData\r\n                });\r\n            }));\r\n\r\n\r\n            //popovers\r\n            var $popovers = $pageContainer.find('[data-popover]');\r\n            // console.log('ContentController::POPOVERS', $popovers.length);\r\n            $popovers.each(function(){\r\n                var popoverID = $(this).data('popover');\r\n                // console.log('ContentController::POPOVER', popoverID);\r\n                \r\n                var popoverData = {};\r\n                var courseSharedData = courseData.getSharedData();\r\n                if (typeof popoverID != 'string'){\r\n                    // popover is a number - use index to check in slide first, then check shared XML\r\n                    \r\n                    var slide = contentController.slideArray[$(this).closest('.slide').data('slide')];\r\n                    // console.log('ContentController::POPOVER', slide.data.popovers)\r\n                    if (slide.data.popovers){\r\n                        popoverData = slide.data.popovers[0].popover[popoverID];\r\n                    } else if (courseSharedData.popovers){\r\n                        popoverData = courseSharedData.popovers[0].popover[popoverID];\r\n                    } \r\n                    \r\n                } else {\r\n                    // lets check the global popovers in i18n.xml\r\n                    if (courseSharedData.popovers[0]){\r\n                        for (var i = 0; i < courseSharedData.popovers[0].popover.length; i++){\r\n                            // console.log(popoverID.toLowerCase(),'==',courseSharedData.popovers[0].popover[i].id.toLowerCase())\r\n                            if (popoverID.toLowerCase() == courseSharedData.popovers[0].popover[i].id.toLowerCase()){\r\n                                popoverData = courseSharedData.popovers[0].popover[i];\r\n                                break;\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n                \r\n                // if (!popoverData){\r\n                //     console.warn('No popover data', popoverID);\r\n                //     // return false;\r\n                // } else {\r\n                    $(this)\r\n                        .attr('tabindex', 0)\r\n                        .attr('role', 'button')\r\n                        .attr('data-toggle', 'popover')\r\n                        .attr('data-trigger', popoverData.trigger || 'focus')\r\n                        .attr('data-placement', popoverData.placement || 'top')\r\n                        //.attr('title', popoverData.title[0].Text)\r\n                        .attr('data-html', true);\r\n\r\n                    var popoverContent = '';\r\n                    if (popoverData.title){\r\n                    \t$(this).attr('data-title', popoverData.title[0].Text);\r\n                    }\r\n                    if (popoverData.content){\r\n                        popoverContent = htmlUtils.getHTMLText(popoverData.content[0]);\r\n                        $(this).attr('data-content', popoverContent);\r\n                    } \r\n                    // console.log('POPOVER', popoverContent)\r\n                // }\r\n            });\r\n            // data-toggle=\"popover\" data-trigger=\"hover\" data-placement=\"top\"\r\n            $popovers.popover();\r\n            \r\n            //tooltips\r\n            $pageContainer.find('[data-toggle=\"tooltip\"]').tooltip();\r\n            \r\n            $(window).trigger('resize');\r\n\r\n            $(document).trigger(courseEvent.PAGE_LOAD_COMPLETE);\r\n        }\r\n    }\r\n    \r\n    function checkPageComplete(event){\r\n        // console.log('ContentController::checkPageComplete')\r\n        // check if all slides in page are complete\r\n        var completeCount = 0;\r\n        for (var i = 0; i < self.slideArray.length; i++){\r\n            //console.log('ContentController::checkPageComplete', i, self.slideArray[i].complete)\r\n            //if (!self.slideArray[i].isHiddenForUser() && !self.slideArray[i].hidden){\r\n                // console.log(i, self.slideArray[i].loaded)\r\n                if (!self.slideArray[i].loaded || self.slideArray[i].isHiddenForUser()){\r\n                    return false;\r\n                }\r\n\r\n                if (self.slideArray[i].complete){\r\n                    completeCount++;\r\n                } else {\r\n                    self.firstIncompleteSlide = i;\r\n                    //console.log('ContentController::checkPageComplete showContent', i, self.slideArray[i].isHiddenForUser(), self.slideArray[i].hidden)\r\n                    // check for next hidden slide\r\n    //                if (!self.slideArray[i].isHiddenForUser() && self.slideArray[i].hidden){\r\n                        //self.slideArray[i].showContent();\r\n    //                } \r\n                       \r\n//                    if (self.slideArray[i].shownByComponent){\r\n//                        // skip past any slides that are shown by components\r\n//                        continue;\r\n//                    }\r\n                    if (!checkAndShowContent(i, false)){\r\n                        break;                    \r\n                    }\r\n                }\r\n            //} else {\r\n                \r\n            //}\r\n        }\r\n        \r\n        uiController.updateUI();\r\n        \r\n        if (completeCount == self.numValidSlides){\r\n            \r\n            // hide the content locked alert if it's there\r\n            if (navigationConfig.incompletePageMessage){\r\n                $('.content-locked-alert').slideUp();\r\n            }\r\n            \r\n            navigationController.pageComplete();\r\n\r\n\r\n        } else {\r\n\r\n            // show the content locked alert if it's there\r\n            if (navigationConfig.incompletePageMessage){\r\n                $('.content-locked-alert').show();\r\n            }\r\n\r\n            storageController.checkCourseComplete();\r\n        }\r\n        storageController.saveData();\r\n        \r\n//        setTimeout(function(){\r\n            navigationController.checkForScroll();\r\n//        }, 50);\r\n    }\r\n    \r\n    function checkAndShowContent(num, componentTriggered){\r\n        // console.log('ContentController::checkAndShowContent', num);\r\n        // console.log('ContentController::checkAndShowContent', num, self.slideArray[num].isHiddenForUser(), !self.slideArray[num].isHiddenForUser() , self.slideArray[num].hidden);\r\n        //console.log('ContentController::checkAndShowContent', num, self.slideArray[num].shownByComponent, componentTriggered);\r\n        if (!self.slideArray[num].isHiddenForUser()){\r\n            if (self.slideArray[num].hidden && (!self.slideArray[num].shownByComponent || (self.slideArray[num].shownByComponent && componentTriggered))){\r\n                self.slideArray[num].showContent();\r\n            }\r\n            if (self.slideArray[num].mandatory && !self.slideArray[num].complete){\r\n                return false;\r\n            } else {\r\n                return true;                \r\n            }                 \r\n        }\r\n        return true;\r\n    }\r\n    \r\n    // function allows for other slides to show slides, regardless of completion status - P3\r\n    this.showSlide = function(num){\r\n        // console.log('ContentController::showSlide', num);\r\n        //shownByComponent\r\n        for (var i = num; i < self.slideArray.length; i++){\r\n//            if (i == num && self.slideArray[i].shownByComponent){\r\n//                if (self.slideArray[i].hidden){\r\n//                    self.slideArray[i].showContent();\r\n//                }\r\n//            } else {\r\n            var componentTriggered = (i == num); // only want to trigger for num \r\n            if (!checkAndShowContent(i, componentTriggered)){\r\n                break;                    \r\n            }\r\n//            }\r\n        }\r\n    }\r\n    \r\n    this.hideSlide = function(num){\r\n        self.slideArray[num].hideContent();\r\n    }\r\n\r\n    this.getFirstUnloadedSlide = function(){\r\n        for (var i = 0; i < self.slideArray.length; i++){\r\n            if (!self.slideArray[i].loaded){\r\n                return self.slideArray[i];\r\n            }\r\n        }\r\n    }\r\n    \r\n    /*function setupInViewAnimations($elements){\r\n        // console.log('setupInViewAnimations');\r\n        \r\n        //console.log('TemplateMediator::setupInViewAnimations()');\r\n        // anim - can be animated\r\n        // animready - ready to be animated\r\n        // animinview - in view\r\n        // animated -\r\n        \r\n        var delay = 0;\r\n        if (courseConfig.animate.sequence){\r\n            delay = courseConfig.animate.delay;\r\n        }\r\n\r\n        var $anims = $elements.find('.anim')//.not('.animready');\r\n        //console.log('setupInViewAnimations', $anims, anims.)\r\n        var visibleAnimCount = 0;\r\n        var totalDelay = 0;\r\n        $anims.not('.animready').each(function(index){\r\n            var $this = $(this);\r\n            \r\n            // var thisDelay = delay;//+utils.css_time_to_milliseconds($this.css('animation-delay'));\r\n            // var thisDelay = delay;\r\n            var thisDelay = 0;\r\n            if ($this.is(':visible')){\r\n                // check if delay set in XML\r\n                console.log($this.data('anim-delay'))\r\n                var animDelay = $this.data('anim-delay') ? String($this.data('anim-delay')) : '';\r\n                if (animDelay.indexOf('=') != -1){\r\n                    // = found so absolute timed animation, so don't add delay\r\n                    thisDelay = 0;\r\n                } else {\r\n                    totalDelay += delay;\r\n                    thisDelay = totalDelay;\r\n                }\r\n                visibleAnimCount++;\r\n            }\r\n\r\n            setTimeout(function(){\r\n                $this.addClass('animready');\r\n                //console.log('ContentControler::animready', $this.attr('class'));\r\n                if ($this.hasClass('animinview')){\r\n                    inViewAnimationStarted($this);\r\n                }\r\n            }, thisDelay);\r\n            if (thisDelay != 0){\r\n                totalDelay += utils.css_time_to_milliseconds($this.css('animation-delay'));\r\n            }\r\n        });\r\n\r\n        if (courseConfig.animate.inview){\r\n            //$anims.addClass('animinview');\r\n            $anims.on('inview', setupInView);\r\n        } else {\r\n            $anims.addClass('animinview');\r\n        }\r\n    }\r\n    \r\n    function setupInView(event, visible){\r\n        // console.log('setupInView')\r\n        if (visible) {\r\n            var $this = $(this);\r\n            $this.off('inview', setupInView);\r\n            $this.addClass('animinview');\r\n            if ($this.hasClass('animready')){\r\n                inViewAnimationStarted($this);\r\n            }\r\n        } \r\n    }\r\n    \r\n    function inViewAnimationStarted($el){\r\n        //console.log('inViewAnimationStarted',$el)\r\n        $el.trigger('inview_anim_start');\r\n        $el.addClass('animating');\r\n        // console.log('inViewAnimationStarted', $el.css('animation-delay'), $el.css('animation-duration'))\r\n        var delay = utils.css_time_to_milliseconds($el.css('animation-delay'))+utils.css_time_to_milliseconds($el.css('animation-duration'));\r\n        setTimeout(function(){\r\n            if (!$el.hasClass('animated')){\r\n                $el.removeClass('animating');\r\n                $el.addClass('animated');\r\n                $el.trigger('inview_anim_complete');\r\n            }\r\n        }, delay);\r\n    }*/\r\n    \r\n    function resizeContent(){\r\n        var navbarHeight = $('.navbar').height();\r\n        var remainingWindowHeight = $(window).height()-navbarHeight;\r\n        if (navigationConfig.debug){\r\n            remainingWindowHeight -= $('.debug .debug-container').height();\r\n        }\r\n        \r\n//        $('.slide.fullheight').css('min-height', remainingWindowHeight);\r\n        // may not need removing\r\n        // $('*.fullheight').not('.tableHolder').css('min-height', remainingWindowHeight);\r\n        // $('.tableHolder.fullheight').css('height', remainingWindowHeight);\r\n        \r\n        for (var i = 0; i < self.slideArray.length; i++){\r\n            if (!self.slideArray[i].isHiddenForUser() && !self.slideArray[i].hidden){\r\n                self.slideArray[i].resizeContent();\r\n            }\r\n        }\r\n    }\r\n\r\n    function breakpointChanged(){        \r\n        for (var i = 0; i < self.slideArray.length; i++){\r\n            if (!self.slideArray[i].isHiddenForUser() && !self.slideArray[i].hidden){\r\n                self.slideArray[i].breakpointChanged();\r\n            }\r\n        }\r\n    }\r\n    \r\n    function scrollElementIntoView($el){\r\n        // console.log('scrollElementIntoView');\r\n        if (!($el instanceof jQuery)){\r\n            $el = $($el);\r\n        }\r\n        if ($el.length){\r\n            $(\"html, body\").animate({ scrollTop: $el.offset().top - $('.navbar-header').height()}, 1000);\r\n        }\r\n    }\r\n    \r\n    function scrollSlideIntoView(slideNum){\r\n        console.log('ContentController::scrollSlideIntoView')\r\n        var $slide = $('#slide'+slideNum);\r\n        $(\"html, body\").animate({ scrollTop: $slide.offset().top - $('.navbar').height()},1000);\r\n    }\r\n    \r\n    this.checkFirstIncompleteComponentInView = function(){\r\n        // for (var i = 0; i < self.slideArray.length; i++){\r\n        //     if (!self.slideArray[i].isHiddenForUser() && !self.slideArray[i].hidden){\r\n        //         self.slideArray[i].resizeContent();\r\n        //     }\r\n        // }\r\n        if (self.firstIncompleteSlide != -1){\r\n            // var componentInfo = self.slideArray[self.firstIncompleteSlide].componentController.getFirstIncompleteComponentInfo();\r\n            \r\n            // //var viewportTop = utils.getViewportTop();\r\n\r\n            // if ($(window).scrollTop() + $(window).height() < componentInfo.top){\r\n            //     return 'below';\r\n            // } else if ($(window).scrollTop() > componentInfo.top){\r\n            //     if ($(window).scrollTop() > componentInfo.top+componentInfo.height){\r\n            //         return 'above';\r\n            //     } else {\r\n            //         return 'partabove';\r\n            //     }\r\n            // } else {\r\n            //     // top is in viewport\r\n            //     if ($(window).scrollTop() + $(window).height() > componentInfo.top+componentInfo.height){\r\n            //         return 'inview';\r\n            //     } else {\r\n            //         return 'partbelow';\r\n            //     }\r\n            // }\r\n            if (self.slideArray[self.firstIncompleteSlide]){\r\n                if (self.slideArray[self.firstIncompleteSlide].componentController){\r\n                    return self.slideArray[self.firstIncompleteSlide].componentController.getFirstComponentInView();\r\n                } else {\r\n                    return false;\r\n                }\r\n            } else {\r\n                return false;\r\n            }\r\n        } else {\r\n            return false;\r\n        }\r\n    }\r\n\r\n    this.isComponentAvailable = function(name){\r\n        var found = false;\r\n        // switched to use AvailableClasses\r\n        for (var x in AvailableClasses.components){\r\n            if (x.toLowerCase() == name.toLowerCase()){\r\n                // console.log('isComponentAvailable', self.availableComponents[i]);\r\n                found = x;\r\n                break;\r\n            }\r\n        }\r\n        if (!found){\r\n            console.warn('Component type '+name+' not found');\r\n            return false\r\n        }\r\n        return found;\r\n    }\r\n    \r\n    // find slide object for element\r\n    this.getSlideForElement = function($el){\r\n        var slideIndex = $el.closest('.slide').data('slide');\r\n        return self.slideArray[slideIndex];\r\n    }\r\n\r\n    // find component controller for element\r\n    this.getComponentControllerForElement = function($el){\r\n        var slide = self.getSlideForElement($el);\r\n        return slide.componentController;\r\n    }\r\n\r\n    init();\r\n}","var CustomDataController = function () {\r\n    var self = this;\r\n    this.data = {};\r\n    \r\n    var timeout;\r\n    \r\n    function init(){\r\n        console.log('CustomDataController:init');\r\n        self.setData(storageController.getCustomData());\r\n    }\r\n    \r\n    this.setData = function(dataObj){\r\n//        console.log('CustomDataController::setData', dataObj)\r\n        if ($.isEmptyObject(dataObj)){\r\n\t\t\t// self.data.sections = [];\r\n            // self.data.modules = [];\r\n\t\t\tself.data.questions = {};\r\n\t\t\tself.data.results = {};\r\n            \r\n        } else {\r\n            self.data = dataObj;\r\n        }\r\n    }\r\n    \r\n    this.setCustomData = function(objStr, value){\r\n        var self = this;\r\n        console.log('CustomDataController::setCustomData', objStr, value);\r\n//        console.log('CustomDataController::setCustomData', eval('self.data.'+objStr));\r\n        try {\r\n            //var obj = \r\n            //console.log (typeof(value));\r\n            // switch (typeof(value)){\r\n            //     case 'string':\r\n            //         value = '\"'+value+'\"';\r\n            //         break;\r\n            //     case 'object':\r\n            //         value = JSON.stringify(value);\r\n            //         break;\r\n            // }\r\n            // eval('self.data.'+objStr+'='+value+'');\r\n            // lodash set \r\n            _.set(self.data, objStr, value);\r\n            \r\n            //console.log(obj)\r\n            //obj = value;\r\n            //console.log(obj)\r\n            \r\n            storageController.setCustomData(self.data);\r\n        } catch (e){\r\n            // //console.log('error', e);\r\n            // var newObj = self.data;\r\n            // //console.log(objStr)\r\n            // var objStrArr = objStr.split('.');\r\n            // for (var i = 0; i < objStrArr.length-1; i++){\r\n            //     //console.log(objStrArr[i]);\r\n            //     //newObjStr += '.'+objStrArr[];\r\n            //     if (newObj[objStrArr[i]]){\r\n            //         // check if exists\r\n            //         newObj = newObj[objStrArr[i]];\r\n            //     } else {\r\n            //         // doesnt exist - make object\r\n            //         newObj[objStrArr[i]] = {};\r\n            //     }\r\n            // }\r\n            //console.log('self.data.'+objStr+'='+value+'')\r\n            // eval('self.data.'+objStr+'='+value+'');\r\n            // lodash set \r\n            // _.set(self.data, objStr, value);\r\n            // storageController.setCustomData(self.data);  \r\n            console.log('ERROR setting custom data') ;\r\n        }\r\n            \r\n            \r\n//            var objPathArray = objStr.split('.');\r\n//            console.log(objPathArray)\r\n//        }\r\n        \r\n        \r\n        \r\n    }\r\n    this.getCustomData = function(objStr){\r\n        var getData;\r\n        try {\r\n            // return eval('self.data.'+objStr);\r\n            // lodash get \r\n            getData = _.get(self.data, objStr);\r\n        } catch (e){\r\n            console.log('getCustomData _.get error', e);\r\n        }      \r\n        \r\n        if (typeof(getData) == 'string'){\r\n            var getDataStr = getData;\r\n            try {\r\n                // attempt parse if already JSON\r\n                getData = JSON.parse(getData);\r\n            } catch (e) {\r\n                console.log('getCustomData JSON parse error', e);\r\n                getData = getDataStr;\r\n            }\r\n        } \r\n        return getData;\r\n    }\r\n    \r\n    /*this.updateScore = function(questionNum, scoreObj){\r\n//        scoreObj.success = parseInt(scoreObj.success);\r\n//        scoreObj.reputation = parseInt(scoreObj.reputation);\r\n//        \r\n//        var obj = {\r\n//            score: scoreObj\r\n//        }\r\n//        self.data.questions[questionNum] = obj;\r\n//        \r\n//        self.data.success += scoreObj.success;\r\n//        self.data.reputation += scoreObj.reputation;\r\n////        console.log('updateScore', obj)\r\n//        \r\n//        storageController.setGameData(self.data);\r\n//        \r\n//        $('.navbar #scoreSuccess .scoreDif').html(((scoreObj.success >= 0) ? '+' : '')+scoreObj.success).addClass('updated');\r\n//        $('.navbar #scoreReputation .scoreDif').html(((scoreObj.reputation >= 0) ? '+' : '')+scoreObj.reputation).addClass('updated');\r\n//        \r\n//        clearTimeout(timeout);\r\n//        timeout = setTimeout(function(){\r\n//            $('.navbar #scoreSuccess .scoreDif').removeClass('updated');\r\n//            $('.navbar #scoreReputation .scoreDif').removeClass('updated');\r\n//        }, 5000);\r\n//        \r\n//        self.updateScoreDisplay(scoreObj); \r\n    }\r\n    \r\n    this.updateScoreDisplay = function(scoreObj){\r\n//        $('.navbar #scoreSuccess .score').data('count',self.data.success);\r\n//        $('.navbar #scoreReputation .score').data('count',self.data.reputation);\r\n//        \r\n//        $('.navbar .score').each(function() {\r\n//            var $this = $(this),\r\n//            countTo = parseInt($this.data('count'));\r\n//\r\n//            $({ countNum: $this.text()}).animate(\r\n//                {\r\n//                    countNum: countTo\r\n//                },\r\n//                {\r\n//                    duration: 2000,\r\n//                    step: function() {\r\n//                      $this.text(Math.floor(this.countNum));\r\n//                    },\r\n//                    complete: function() {\r\n//                      $this.text(this.countNum);\r\n//                      //alert('finished');\r\n//                    }\r\n//\r\n//                }\r\n//            );\r\n//        });\r\n//        \r\n//        var successPerc = Math.round(((self.data.success+100)/200)*100);\r\n//        $('.navbar #scoreSuccess .scoreBar').width(successPerc+'%');\r\n//        var reputationPerc = Math.round(((self.data.reputation+100)/200)*100);\r\n//        $('.navbar #scoreReputation .scoreBar').width(reputationPerc+'%');\r\n        \r\n        //$('.navbar #scoreSuccess .score').html(self.data.success);\r\n        //$('.navbar #scoreReputation .score').html(self.data.reputation);\r\n        \r\n    }*/\r\n    \r\n    init();\r\n}","var GameAPIController = function () {\r\n    var self = this;\r\n    \r\n    this.gameAPIAnswers = {};\r\n    \r\n    function init(){\r\n        //console.log('GameAPIController::init ');\r\n        \r\n        if (gameAPIConfig.enabled){\r\n            self.getAnswersFromGameAPI();\r\n        }\r\n    }\r\n    \r\n    this.getGameAPIAnswer = function(questionNum){\r\n        return gameAPIConfig.enabled ? this.gameAPIAnswers[questionNum] : null;\r\n    }\r\n    \r\n    this.getGameAPIAnswers = function(){\r\n        return gameAPIConfig.enabled ? this.gameAPIAnswers : null;\r\n    }\r\n    \r\n    /**\r\n     * @function saveToGameAPI\r\n     * @description  This function saves information to the gameapi\r\n     */\r\n    this.saveAnswerToGameAPI = function(questionNum, responseArray, callbackFunction){\r\n        //user_id, question_id, response, selecedQuestion) {\r\n        var data = {\r\n\t\t\tuser_id: storageController.studentID,\r\n\t\t\tquestion_id: questionNum,\r\n            response: responseArray.toString(), \r\n\t\t\tname: '',\r\n\t\t\temail: '',\r\n\t\t\tcourse_name: LaunchConfig.course.id, \r\n\t\t\tvariation:languageConfig.defaultLanguage,\r\n\t\t\tversion: LaunchConfig.course.version\r\n\t\t};\r\n        console.log('GameAPIController::saveAnswerToGameAPI', data);\r\n\t\t$.ajax({\r\n\t\t\ttype: 'POST',\r\n\t\t\turl: gameAPIConfig.rootURL + 'addAnswer',\r\n//\t\t\tdataType: 'json',\r\n\t\t\tdata: data, // URI encode data for request\r\n\t\t\tsuccess: function(response, xhr, type, textStatus) {\r\n\t\t\t\tconsole.log(response);//, xhr, type, textStatus);\r\n                if (callbackFunction){\r\n                    self.getAnswerFromGameAPI(questionNum, callbackFunction);\r\n                } \r\n\t\t\t},\r\n\t\t\terror: function(xhr, type, textStatus, errorThrown) {\r\n\t\t\t\tconsole.log(xhr, type, errorThrown, textStatus);\r\n\t\t\t}\r\n\t\t});\r\n    }\r\n    \r\n    this.getAnswerFromGameAPI = function(questionNum, callbackFunction){\r\n        console.log('GameAPIController::getAnswerFromGameAPI', questionNum);\r\n        var data = {\r\n            course_name: LaunchConfig.course.id, \r\n\t\t\tvariation:languageConfig.defaultLanguage,\r\n\t\t\tversion: LaunchConfig.course.version\r\n\t\t};\r\n\t\t$.ajax({\r\n\t\t\ttype: 'POST',\r\n\t\t\turl: gameAPIConfig.rootURL + 'answer/'+questionNum,\r\n\t\t\tdata: data, // URI encode data for request\r\n//\t\t\tdataType: 'json',\r\n\t\t\tsuccess: function(response){\r\n\t\t\t\t//console.log('Success: ', response);\r\n                var questionAPIData = JSON.parse(response);\r\n                self.gameAPIAnswers[questionNum] = questionAPIData;\r\n                \r\n                //self.gameAPIAnswers = JSON.parse(response);\r\n                \r\n                if (callbackFunction){\r\n                    callbackFunction(questionAPIData);\r\n                } \r\n\t\t\t},\r\n\t\t\terror: function(xhr, type){\r\n\t\t\t   //console.log(xhr, type);\r\n\t\t\t}\r\n\t\t});\r\n    }\r\n    \r\n    this.getAnswersFromGameAPI = function(callbackFunction){\r\n        //console.log('AssessmentController::getAnswersFromGameAPI');\r\n        //user_id, question_id, response, selecedQuestion) {\r\n        var data = {\r\n            course_name: LaunchConfig.course.id, \r\n\t\t\tvariation:languageConfig.defaultLanguage,\r\n\t\t\tversion: LaunchConfig.course.version\r\n\t\t};\r\n\t\t$.ajax({\r\n\t\t\ttype: 'POST',\r\n\t\t\turl: gameAPIConfig.rootURL + 'answers',\r\n\t\t\tdata: data, // URI encode data for request\r\n//\t\t\tdataType: 'json',\r\n\t\t\tsuccess: function(response){\r\n                \r\n                self.gameAPIAnswers = JSON.parse(response);\r\n                if (self.gameAPIAnswers == null){\r\n                    self.gameAPIAnswers = [];\r\n                }\r\n                \r\n                if (callbackFunction){\r\n                    callbackFunction(response);\r\n                } \r\n\t\t\t},\r\n\t\t\terror: function(xhr, type){\r\n\t\t\t   console.log(xhr, type);\r\n\t\t\t}\r\n\t\t});\r\n    }\r\n    \r\n    init();\r\n}","var FeedbackController = function() {\r\n    var self = this;\r\n    // this.$instruction;\r\n    \r\n    this.$feedbackAnim;\r\n\r\n    // this.init = init;\r\n    // this.change = change;\r\n    \r\n    // this.prevInstruction = '';\r\n    \r\n    \r\n    // function init(){\r\n        \r\n    // }\r\n\r\n    // init();\r\n\r\n    this.initFeedback = function($el, $feedback){\r\n        if (!$feedback){\r\n            $feedback = $el.closest('.slide').find('.feedback');\r\n        }\r\n        // add the accessible role to the feedback\r\n        // $feedback.attr('role', 'alert');\r\n        $feedback.attr('tabindex', '-1');\r\n    }\r\n\r\n    this.showFeedback = function($el, $feedback, revealType){\r\n        if (!revealType){\r\n            revealType = 'slideDown';\r\n        }\r\n        if (!$feedback){\r\n            $feedback = $el.closest('.slide').find('.feedback');\r\n        }\r\n        // perform the reveal - default is slideDown\r\n        $feedback[revealType]({\r\n            start: function(){\r\n                var slideObj = contentController.slideArray[$el.closest('.slide').data('slide')];\r\n                // let's tell any components they are now displayed\r\n                slideObj.showElementContents($(this));\r\n            },\r\n            complete: function(){\r\n                navigationController.scrollIntoView($(this));\r\n            }\r\n        });\r\n\r\n        $feedback.focus();\r\n    }\r\n\r\n    this.hideFeedback = function($el, $feedback){\r\n        if (!$feedback){\r\n            $feedback = $el.closest('.slide').find('.feedback');\r\n        }\r\n        $feedback.slideUp({\r\n            start: function(){\r\n            },\r\n            complete: function(){\r\n                $(this).find('.feedbackRetry').hide(); \r\n            }\r\n        });\r\n    }\r\n\r\n    /*\r\n    this.showCorrectAnimation = function(){\r\n        if (!self.$feedbackAnim){\r\n            var htmlStr = '<div class=\"feedback-anim\">';\r\n            htmlStr += '<div class=\"feedback-anim-inner\">';\r\n                htmlStr += svgUtils.createSVG('tick');\r\n            htmlStr += '</div>';\r\n\r\n            self.$feedbackAnim = $(htmlStr);\r\n\r\n            $('.ui-container').append(self.$feedbackAnim);\r\n        } \r\n\r\n        var timeline = gsap.timeline();\r\n        timeline.from(self.$feedbackAnim, {scale: 0, easing:'back.out', onComplete: function(){\r\n            // draw SVG\r\n            svgUtils.animateSVG('tick', self.$feedbackAnim);\r\n        }});\r\n        timeline.to(self.$feedbackAnim, {scale: 1.5, opacity: 0, delay: 2, easing:'ease.in'});\r\n\r\n    }*/\r\n};","function CourseEvent(){\r\n\t/**COURSE EVENT*/\r\n\tthis.PAGE_LOAD_START=\"pageLoadStart\";\r\n\tthis.PAGE_LOAD_COMPLETE=\"pageLoadComplete\";\r\n\tthis.PAGE_CHANGE = \"pageChange\";\r\n    \r\n    this.SLIDE_SHOW_CONTENT = \"slideShowContent\";\r\n    this.SLIDE_HIDE_CONTENT = \"slideHideContent\";\r\n    \r\n    this.COURSE_DATA_LOAD_COMPLETE=\"courseDataLoadComplete\";\r\n    this.CONTENT_DATA_LOAD_COMPLETE=\"contentDataLoadComplete\";\r\n    this.CURRENT_CONTENT_DATA_LOAD_COMPLETE=\"currentContentDataLoadComplete\";\r\n    \r\n    this.XMLDATA_LOAD_START=\"xmlDataLoadStart\";\r\n    this.XMLDATA_LOAD_COMPLETE=\"xmlDataLoadComplete\";\r\n    \r\n\tthis.TEMPLATES_LOAD_START=\"templatesLoadStart\";\r\n\tthis.TEMPLATES_LOAD_COMPLETE=\"templatesLoadComplete\";\r\n\t\r\n    this.XMLDATA_LANG_LOAD_START=\"onLanguageLoadStart\";\t\t\r\n    this.XMLDATA_LANG_LOAD_COMPLETE=\"onLanguageLoadComplete\";\t\t\r\n\t\r\n    this.PAGE_REPLAY=\"pageReplay\";\r\n    \r\n    this.SLIDE_LOAD_START=\"slideLoadStart\";\r\n    this.SLIDE_LOAD_COMPLETE=\"slideLoadComplete\";\r\n    this.SLIDE_COMPLETE=\"slideComplete\";\r\n    \r\n\tthis.PREV_BTN_CLICK=\"prevBtnClick\";\r\n\tthis.NEXT_BTN_CLICK=\"nextBtnClick\";\r\n\t\r\n    this.PLAYED_MEDIA=\"playedMedia\";\r\n\tthis.PAUSED_MEDIA=\"pausedMedia\";\r\n\tthis.ENDED_MEDIA=\"endedMedia\";\r\n\tthis.CLEAR_MEDIA=\"clearMedia\";\r\n\tthis.AUDIO_ON=\"audioOn\";\r\n\tthis.AUDIO_OFF=\"audioOff\";\r\n\tthis.TRANSCRIPT_ON=\"transcriptOn\";\r\n\tthis.TRANSCRIPT_OFF=\"transcriptOff\";\r\n\tthis.TRANSCRIPT_UPDATE=\"transcriptUpdate\";\r\n\tthis.CLOSECOURSE_YES=\"closeCourseYes\";\r\n\tthis.CLOSECOURSE_NO=\"closeCourseNo\";\r\n\tthis.PAGE_PLAY_EXTERNAL=\"pagePlayExternal\";\r\n\tthis.PAGE_PAUSE_EXTERNAL=\"pagePauseExternal\";\r\n\t\r\n\tthis.ON_BRANDING_RENDER_COMPLETE=\"onBrandingRenderComplete\";\r\n\tthis.KEY_UP=\"keyUp\";\r\n\tthis.KEY_DOWN=\"keyDown\";\r\n\tthis.PAGE_SWIPE=\"pageSwipe\";\r\n\r\n    this.DEVICE_BREAKPOINT_CHANGED = \"deviceBreakpointChanged\";\r\n\r\n    this.COMPONENT_COMPLETE=\"componentComplete\";\r\n\r\n    this.VIDEO_COMPLETE=\"videoComplete\";\r\n\t\r\n}","var DebugController = function (opts) {\r\n    var self = this;\r\n    this.$debug;\r\n    this.$slideSelect;\r\n\r\n    this.init = init;\r\n    this.update = update;\r\n\r\n    function init() {\r\n        self.$debug = $('.debug');\r\n\r\n        self.$debug.html(getHTML());\r\n\r\n        // find the slide select dropdown\r\n        self.$slideSelect = self.$debug.find('select');\r\n\r\n        // get the role names\r\n        var rolesArray = courseData.getRoles();\r\n        var abbrArray = rolesArray.map(obj => obj.abbr).filter(element => {\r\n            return element !== undefined;\r\n        });\r\n        // console.log('DebugController abbrArray', abbrArray);\r\n\r\n        for (var i = 0; i < navigationController.pageArray.length; i++) {\r\n            for (var j = 0; j < navigationController.pageArray[i].slides.length; j++) {\r\n                // lets check if the slide has any roles and display these in the dropdown\r\n                var slideRoleArray = [];\r\n                if (abbrArray.length){\r\n                    if (navigationController.pageArray[i].slides[j].roles.length != rolesArray.length) {\r\n                        for (var k = 0; k < navigationController.pageArray[i].slides[j].roles.length; k++) {\r\n                            if (rolesArray[navigationController.pageArray[i].slides[j].roles[k]].abbr){\r\n                                // push the role abbreviation if found\r\n                                slideRoleArray.push(rolesArray[navigationController.pageArray[i].slides[j].roles[k]].abbr);\r\n                            } \r\n                        }\r\n                    }                \r\n                \r\n                    slideRoleArray = checkRoleAbbreviationsForSlide(abbrArray, slideRoleArray);\r\n                    \r\n                } else {\r\n                    // no roles so just push the slide roles numbers\r\n                    slideRoleArray = navigationController.pageArray[i].slides[j].roles;\r\n                }\r\n\r\n                var xmlPathArray = navigationController.pageArray[i].slides[j].xmlPath.replace('.xml', '').split('/');\r\n                // remove the first item(s) for the xmlPath\r\n                const xmlPath = xmlPathArray.length > 2 ? xmlPathArray.slice(2).join('/') : xmlPathArray.slice(1).join('/');\r\n                // create the ref\r\n                var ref = 'm' + navigationController.pageArray[i].module + 'p' + navigationController.pageArray[i].page + 's' + j;\r\n                // add the slide to the dropdown\r\n                self.$slideSelect.append('<option value=\"' + ref + '\" data-module=\"' + navigationController.pageArray[i].module + '\"data-page=\"' + navigationController.pageArray[i].page + '\" data-slide=\"' + j + '\">' + ref + ' | ' + xmlPath + (slideRoleArray.length ? ' (' + slideRoleArray.join(',')+')' : '') + '</option>');\r\n            }\r\n        }\r\n\r\n        self.$slideSelect.on('change', function () {\r\n            // navigationController.changePageToFile($(\"option:selected\", this).val());\r\n            var $option = $(\"option:selected\", this);\r\n            navigationController.changePageToData($option.data('module'), $option.data('page'), $option.data('slide'));\r\n        });\r\n\r\n        if (navigationConfig.pageLock) {\r\n            self.$debug.find('.pageLockToggle').addClass('locked');\r\n        }\r\n        self.$debug.find('.pageLockToggle').on('click', function () {\r\n            navigationConfig.pageLock = !navigationConfig.pageLock;\r\n            $(this).toggleClass('locked');\r\n            navigationController.replayPage();\r\n        });\r\n\r\n        // use the ?animdebug= parameter from the URL - show animation debug?\r\n        var animDebugURLParameter = parseInt(utils.getURLParameter('animdebug'));\r\n        if (!isNaN(animDebugURLParameter)) {\r\n            $('body').addClass('anim-debug-on');\r\n            self.$debug.find('.animToggle').addClass('active');\r\n        }\r\n        self.$debug.find('.animToggle').on('click', function () {\r\n            $('body').toggleClass('anim-debug-on');\r\n            $(this).toggleClass('active');\r\n            navigationController.replayPage();\r\n        });\r\n    }\r\n\r\n    function getHTML() {\r\n\r\n        var htmlStr = '<div class=\"debug-container container\" aria-hidden=\"true\">';\r\n        htmlStr += '<div class=\"row\">';\r\n        htmlStr += '<div class=\"col-sm-12\">';\r\n        htmlStr += 'DEBUG: ';\r\n        htmlStr += '<a class=\"debug_btn_Back debug_Btn\" href=\"javascript:void(0);\" title=\"Go to previous page\">Back</a>';\r\n        htmlStr += ' | ';\r\n        htmlStr += '<a class=\"debug_btn_Reload debug_Btn\" href=\"javascript:void(0);\" title=\"Reload browser and return at current page\">Reload</a>';\r\n        htmlStr += ' | ';\r\n        htmlStr += '<a class=\"debug_btn_Next debug_Btn\" href=\"javascript:void(0);\" title=\"Go to next page\">Next</a>';\r\n        htmlStr += ' | ';\r\n        htmlStr += 'Template: <span class=\"slide_template\"></span>';\r\n        htmlStr += ' | ';\r\n        htmlStr += 'Slide: ';\r\n        htmlStr += '<select></select>';\r\n        htmlStr += '<a class=\"debug_Btn pageLockToggle\" href=\"javascript:void(0);\" title=\"Toggle page lock on/off\"></a>';\r\n        htmlStr += '<a class=\"debug_Btn animToggle\" href=\"javascript:void(0);\" title=\"Toggle animation debug on/off\"></a>';\r\n        htmlStr += '<div class=\"debug-icon-wrapper\">';\r\n        if (liveEditConfig.enabled) {\r\n            htmlStr += '<div class=\"icon-liveedit active\" title=\"LiveEdit enabled\"></div>';\r\n        } else {\r\n            htmlStr += '<div class=\"icon-liveedit\" title=\"LiveEdit disabled\"></div>';\r\n        }\r\n        if (LaunchConfig.cdn.enabled && !LaunchConfig.cdn.updatesOnly) {\r\n            htmlStr += '<div class=\"icon-livecdn active\" title=\"LiveContent enabled\"></div>';\r\n        } else {\r\n            htmlStr += '<div class=\"icon-livecdn\" title=\"LiveContent disabled\"></div>';\r\n        }\r\n        if (LaunchConfig.cdn.enabled && LaunchConfig.cdn.updatesOnly) {\r\n            htmlStr += '<div class=\"icon-liveupdate active\" title=\"LiveUpdate enabled\"></div>';\r\n        } else {\r\n            htmlStr += '<div class=\"icon-liveupdate\" title=\"LiveUpdate disabled\"></div>';\r\n        }\r\n        htmlStr += '</div>';\r\n\r\n        htmlStr += '</div>';\r\n        htmlStr += '</div>';\r\n        htmlStr += '</div>';\r\n\r\n        return htmlStr;\r\n    }\r\n\r\n    function update() {\r\n        //var locationStr = window.location.substr(0, window.location.indexOf('?'));\r\n        var searchParams = location.search.split('&');\r\n        // console.log('DebugController', searchParams)\r\n\r\n        var pageFound = false;\r\n        var langFound = false;\r\n        for (var i = 0; i < searchParams.length; i++) {\r\n            if (searchParams[i].indexOf('page=') != -1) {\r\n                // only update the page number - keep other URL search paramaters\r\n                var tmp = searchParams[i].split('=');\r\n                tmp[1] = navigationController.currentPage;\r\n                searchParams[i] = tmp.join('=');\r\n                pageFound = true;\r\n            }\r\n            if (searchParams[i].indexOf('lang=') != -1) {\r\n                searchParams[i] = 'lang=' + currentLanguage;\r\n                langFound = true;\r\n            }\r\n        }\r\n\r\n        if (!pageFound) {\r\n            searchParams.push('page=' + navigationController.currentPage);\r\n        }\r\n        if (!langFound && currentLanguage != languageConfig.defaultLanguage) {\r\n            // allow refresh in current language\r\n            searchParams.push('lang=' + currentLanguage);\r\n        }\r\n        // console.log('DebugController', location.pathname, searchParams.join('&'))\r\n        self.$debug.find('.debug_btn_Reload').attr('href', location.protocol + '//' + location.host + location.pathname + searchParams.join('&'));\r\n        //'?debug=1&page='+navigationController.currentPage);\r\n\r\n        self.$debug.find('.slide_template').html(navigationController.pageArray[navigationController.currentPage].slides[0].template);\r\n        var currentPos = navigationController.pageArray[navigationController.currentPage];\r\n        var ref = 'm' + currentPos.module + 'p' + currentPos.page + 's' + 0;\r\n        self.$slideSelect.val(ref);\r\n    }\r\n\r\n    this.showDebug = function (arg) {\r\n        arg = arg == undefined ? true : arg;\r\n\r\n        if (arg) {\r\n            $('body').addClass('debug-on');\r\n            self.$debug.removeClass('hidden');\r\n        } else {\r\n            $('body').removeClass('debug-on');\r\n            self.$debug.addClass('hidden');\r\n        }\r\n    }\r\n\r\n    this.hideDebug = function (arg) {\r\n        self.showDebug(false);\r\n    }\r\n\r\n    function checkRoleAbbreviationsForSlide(abbrArray, slideRoleArray) {\r\n        // Check if there are any items in abbrArray that are not present in slideRoleArray\r\n        const matchingItems = abbrArray.filter(item => {\r\n            const prefix = item.split(\"-\")[0]; // Get the prefix before the dash\r\n            return (\r\n                slideRoleArray.indexOf(item) === -1 && // Exclude items already present in slideRoleArray\r\n                slideRoleArray.some(element => element.startsWith(prefix + '-')) // Check if there are matching items in slideRoleArray\r\n            );\r\n        });\r\n\r\n        // remove any duplicates\r\n        matchingItems - _.uniq(matchingItems);\r\n\r\n        if (matchingItems.length > 0) {\r\n            // found other items so keep as is\r\n            return slideRoleArray;\r\n        } else {\r\n            var returnArray = _.uniq(slideRoleArray.map(item => item.split('-')[0]));\r\n            // remove any duplicates\r\n            returnArray - _.uniq(returnArray);\r\n            return returnArray;// Return just the prefixes from slideRoleArray\r\n        }\r\n    }\r\n};","// this file is created by a gulp task\nconst InlineSVG = {\"play\":\"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"42\\\" height=\\\"42\\\" viewBox=\\\"0 0 42 42\\\"> <defs> <style> </style> </defs> <g id=\\\"play\\\" transform=\\\"translate(14973 12212)\\\"> <path id=\\\"play-2\\\" data-name=\\\"play\\\" d=\\\"M8,7.571V25.7a1.746,1.746,0,0,0,2.695,1.47L24.94,18.106a1.75,1.75,0,0,0,0-2.958L10.695,6.1A1.746,1.746,0,0,0,8,7.571Z\\\" transform=\\\"translate(-14967 -12207.318)\\\"/> </g></svg>\",\"audio\":\"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 100 100\\\"> <polygon class=\\\"cls-2\\\" points=\\\"48.14 83.65 24.68 65.19 11.47 60.57 11.47 39.04 25.06 34.42 48.14 15.96 48.14 83.65\\\"/> <path id=\\\"wave1\\\" d=\\\"M56.42,32.11A21.84,21.84,0,0,1,57,68\\\"/> <path id=\\\"wave2\\\" d=\\\"M67.19,23.78c5.81,5.6,9.66,15.39,9.66,26.54,0,10.79-3.62,20.33-9.11,26\\\"/> <path id=\\\"wave3\\\" d=\\\"M78.65,85.48c6.08-8.9,9.88-21.36,9.88-35.16,0-14.12-4-26.86-10.34-35.8\\\"/> <line id=\\\"crossLeft\\\" x1=\\\"90.39\\\" y1=\\\"31.48\\\" x2=\\\"56.24\\\" y2=\\\"68.72\\\"/> <line id=\\\"crossRight\\\" x1=\\\"56.24\\\" y1=\\\"31.48\\\" x2=\\\"90.39\\\" y2=\\\"68.72\\\"/></svg>\",\"exit\":\"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 100 100\\\"> <line class=\\\"cls-2\\\" x1=\\\"19.51\\\" y1=\\\"82.14\\\" x2=\\\"84.3\\\" y2=\\\"17.36\\\"/> <line class=\\\"cls-2\\\" x1=\\\"84.3\\\" y1=\\\"82.14\\\" x2=\\\"19.51\\\" y2=\\\"17.36\\\"/></svg>\",\"help\":\"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 100 100\\\"> <path class=\\\"cls-2\\\" d=\\\"M34.52,38.09c0-7.92,9.33-16.19,17.89-12.15,8.72,4.12,8.61,13.61,2.76,19.12-4.7,4.42-9.61,5.88-9.3,20.39\\\"/> <line class=\\\"cls-2\\\" x1=\\\"40.91\\\" y1=\\\"74.04\\\" x2=\\\"48.91\\\" y2=\\\"74.04\\\"/> <circle class=\\\"cls-2\\\" cx=\\\"46.91\\\" cy=\\\"49.75\\\" r=\\\"38.14\\\"/></svg>\",\"language\":\"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 100 100\\\"> <circle class=\\\"cls-1\\\" cx=\\\"49.82\\\" cy=\\\"42.77\\\" r=\\\"28.8\\\"/> <path class=\\\"cls-1\\\" d=\\\"M78.62,66.17A37.19,37.19,0,0,1,67.16,76.46a34.75,34.75,0,0,1-17.34,4.62c-20.08,0-36.36-17.15-36.36-38.31A38.81,38.81,0,0,1,30.33,10.42a38.15,38.15,0,0,1,3.6-2.12\\\"/> <line class=\\\"cls-1\\\" x1=\\\"30.33\\\" y1=\\\"91.98\\\" x2=\\\"67.54\\\" y2=\\\"91.98\\\"/> <line class=\\\"cls-1\\\" x1=\\\"48.5\\\" y1=\\\"80.5\\\" x2=\\\"48.5\\\" y2=\\\"93.5\\\"/></svg>\",\"menu\":\"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 100 100\\\"> <line class=\\\"menu-item\\\" x1=\\\"30\\\" y1=\\\"25\\\" x2=\\\"91\\\" y2=\\\"25\\\"/> <line class=\\\"menu-bullet\\\" x1=\\\"8\\\" y1=\\\"25\\\" x2=\\\"15\\\" y2=\\\"25\\\"/> <line class=\\\"menu-item\\\" x1=\\\"30\\\" y1=\\\"49\\\" x2=\\\"91\\\" y2=\\\"49\\\"/> <line class=\\\"menu-bullet\\\" x1=\\\"8\\\" y1=\\\"49\\\" x2=\\\"15\\\" y2=\\\"49\\\"/> <line class=\\\"menu-item\\\" x1=\\\"30\\\" y1=\\\"74\\\" x2=\\\"91\\\" y2=\\\"74\\\"/> <line class=\\\"menu-bullet\\\" x1=\\\"8\\\" y1=\\\"74\\\" x2=\\\"15\\\" y2=\\\"74\\\"/></svg>\",\"resource\":\"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 100 100\\\"> <polygon class=\\\"cls-2\\\" points=\\\"10.89 74.19 50.26 86.68 88.92 74.19 88.92 12.82 50.26 25.31 10.89 12.82 10.89 74.19\\\"/> <line class=\\\"cls-2\\\" x1=\\\"50.04\\\" y1=\\\"23.87\\\" x2=\\\"50.04\\\" y2=\\\"85.08\\\"/></svg>\",\"bridge\":\"<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\"?><svg id=\\\"Layer_134\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 100 100\\\"> <polygon class=\\\"cls-1\\\" points=\\\"53.02 34.93 47.01 34.93 44.41 65.07 55.59 65.07 53.02 34.93\\\"/> <polygon class=\\\"cls-1\\\" points=\\\"12.02 34.93 6.01 34.93 3.41 65.07 14.59 65.07 12.02 34.93\\\"/> <polygon class=\\\"cls-1\\\" points=\\\"94.02 34.93 88.01 34.93 85.41 65.07 96.59 65.07 94.02 34.93\\\"/> <line class=\\\"cls-1\\\" x1=\\\"53.54\\\" y1=\\\"41.01\\\" x2=\\\"87.37\\\" y2=\\\"41.01\\\"/> <line class=\\\"cls-1\\\" x1=\\\"12.54\\\" y1=\\\"41.01\\\" x2=\\\"46.37\\\" y2=\\\"41.01\\\"/> <path class=\\\"cls-1\\\" d=\\\"M13.42,51.57c4.45-1.56,17.94-5.37,31.71,.2\\\"/> <path class=\\\"cls-1\\\" d=\\\"M54.42,51.57c4.45-1.56,17.94-5.37,31.71,.2\\\"/> </svg>\",\"bulb\":\"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 100 100\\\"> <g id=\\\"bulb\\\"> <path class=\\\"cls-2\\\" d=\\\"M46.12,95.44a1,1,0,0,1-.49-.14l-4.84-2.9a1,1,0,0,1-.46-.76l-.68-1.45-2.72.41h-.15a1,1,0,0,1-.63-.24,1,1,0,0,1-.34-.73v-5.8a1,1,0,0,1,.14-.49l.28-.48L36,82.38a1,1,0,0,1-.14-.48V73.2a1,1,0,0,1,.28-.67l.67-.69-.69-.68a1,1,0,0,1-.29-.69c0-5-3.08-12.16-6.72-15.74a29.12,29.12,0,0,1-8.8-20.95,29.49,29.49,0,0,1,59,0,29.12,29.12,0,0,1-8.8,20.95c-3.64,3.57-6.72,10.79-6.72,15.74a1,1,0,0,1-.37.75l-.76.62.62.75a1,1,0,0,1,.23.61V78a.89.89,0,0,1-.13.48L63,79l.28.48a.94.94,0,0,1,.14.48v5.8a1,1,0,0,1-.82,1l-1.9.28-.19,1.27a1,1,0,0,1-.19,1.08l-5.8,5.8a1,1,0,0,1-.68.28Z\\\"/> <line class=\\\"cls-2\\\" x1=\\\"36.46\\\" y1=\\\"72.24\\\" x2=\\\"61.59\\\" y2=\\\"72.24\\\"/> <line class=\\\"cls-2\\\" x1=\\\"36.46\\\" y1=\\\"82.87\\\" x2=\\\"63.53\\\" y2=\\\"79\\\"/> <line class=\\\"cls-2\\\" x1=\\\"36.46\\\" y1=\\\"89.64\\\" x2=\\\"63.53\\\" y2=\\\"85.77\\\"/> </g></svg>\",\"bullhorn\":\"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 100 100\\\"> <g id=\\\"Layer_15\\\" data-name=\\\"Layer 15\\\"> <rect class=\\\"cls-2\\\" x=\\\"13\\\" y=\\\"26\\\" width=\\\"28\\\" height=\\\"36\\\"/> <polyline class=\\\"cls-2\\\" points=\\\"20.5 62.5 20.5 83.5 32.5 83.5 32.5 62.5\\\"/> <polyline class=\\\"cls-2\\\" points=\\\"13.5 30.5 6.5 30.5 6.5 56.5 13.5 56.5\\\"/> <path class=\\\"cls-2\\\" d=\\\"M42.5,30.5h3.84a4.37,4.37,0,0,0,2.45-.75L68.5,16.5v54L48.27,57.22a4.37,4.37,0,0,0-2.41-.72H42.5\\\"/> <path class=\\\"cls-2\\\" d=\\\"M67.5,35.5H71A4.53,4.53,0,0,1,75.5,40V48A4.53,4.53,0,0,1,71,52.5H67.5\\\"/> <line class=\\\"cls-2\\\" x1=\\\"81.5\\\" y1=\\\"43.5\\\" x2=\\\"94.5\\\" y2=\\\"43.5\\\"/> <line class=\\\"cls-2\\\" x1=\\\"80.36\\\" y1=\\\"33.24\\\" x2=\\\"91.64\\\" y2=\\\"26.78\\\"/> <line class=\\\"cls-2\\\" x1=\\\"80.36\\\" y1=\\\"53.78\\\" x2=\\\"91.64\\\" y2=\\\"60.24\\\"/> </g></svg>\",\"callout\":\"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 100 100\\\"> <polygon class=\\\"cls-2\\\" points=\\\"93.4 66.5 45.74 66.5 31.4 81.5 30.77 66.5 6.4 66.5 6.4 18.5 93.4 18.5 93.4 66.5\\\"/> <line class=\\\"cls-2\\\" x1=\\\"17.9\\\" y1=\\\"31.5\\\" x2=\\\"81.9\\\" y2=\\\"31.5\\\"/> <line class=\\\"cls-2\\\" x1=\\\"17.9\\\" y1=\\\"42.5\\\" x2=\\\"81.9\\\" y2=\\\"42.5\\\"/> <line class=\\\"cls-2\\\" x1=\\\"17.9\\\" y1=\\\"53.5\\\" x2=\\\"81.9\\\" y2=\\\"53.5\\\"/> </svg>\",\"compass\":\"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 100 100\\\"> <circle class=\\\"cls-2\\\" cx=\\\"50.02\\\" cy=\\\"49.84\\\" r=\\\"35.8\\\"/> <circle class=\\\"cls-2\\\" cx=\\\"50.02\\\" cy=\\\"49.84\\\" r=\\\"46.75\\\"/> <line class=\\\"cls-2\\\" x1=\\\"50.05\\\" y1=\\\"15.36\\\" x2=\\\"50.05\\\" y2=\\\"24.33\\\"/> <line class=\\\"cls-2\\\" x1=\\\"50.05\\\" y1=\\\"75.36\\\" x2=\\\"50.05\\\" y2=\\\"84.33\\\"/> <line class=\\\"cls-2\\\" x1=\\\"84.54\\\" y1=\\\"49.84\\\" x2=\\\"75.57\\\" y2=\\\"49.84\\\"/> <line class=\\\"cls-2\\\" x1=\\\"24.54\\\" y1=\\\"49.84\\\" x2=\\\"15.57\\\" y2=\\\"49.84\\\"/> <polygon class=\\\"cls-2\\\" points=\\\"62.32 37.35 43.25 43.03 37.57 62.09 57.04 56.82 62.32 37.35\\\"/> <line class=\\\"cls-2\\\" x1=\\\"43.25\\\" y1=\\\"43.03\\\" x2=\\\"57.28\\\" y2=\\\"56.83\\\"/> </svg>\",\"computer\":\"<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\"?><svg id=\\\"Layer_95\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 100 100\\\"> <rect class=\\\"cls-1\\\" x=\\\"5.68\\\" y=\\\"72.26\\\" width=\\\"88.93\\\" height=\\\"12.12\\\"/> <rect class=\\\"cls-1\\\" x=\\\"12.5\\\" y=\\\"27.26\\\" width=\\\"75.28\\\" height=\\\"44.99\\\"/> <rect class=\\\"cls-1\\\" x=\\\"33.65\\\" y=\\\"18.12\\\" width=\\\"32.99\\\" height=\\\"63.28\\\" transform=\\\"translate(99.9 -.38) rotate(90)\\\"/> <line class=\\\"cls-1\\\" x1=\\\"45.93\\\" y1=\\\"78.32\\\" x2=\\\"54.36\\\" y2=\\\"78.32\\\"/> </svg>\",\"datachart\":\"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 100 100\\\"> <polyline class=\\\"cls-2\\\" points=\\\"79.14 87.91 3.97 87.91 3.97 12.74\\\"/> <circle class=\\\"cls-2\\\" cx=\\\"29.29\\\" cy=\\\"55.02\\\" r=\\\"6.3\\\"/> <circle class=\\\"cls-2\\\" cx=\\\"45.47\\\" cy=\\\"65.5\\\" r=\\\"6.3\\\"/> <circle class=\\\"cls-2\\\" cx=\\\"15.57\\\" cy=\\\"74.51\\\" r=\\\"6.3\\\"/> <line class=\\\"cls-2\\\" x1=\\\"19.2\\\" y1=\\\"69.36\\\" x2=\\\"25.66\\\" y2=\\\"60.17\\\"/> <line class=\\\"cls-2\\\" x1=\\\"49.09\\\" y1=\\\"60.35\\\" x2=\\\"55.84\\\" y2=\\\"50.75\\\"/> <line class=\\\"cls-2\\\" x1=\\\"40.18\\\" y1=\\\"62.07\\\" x2=\\\"34.57\\\" y2=\\\"58.44\\\"/> <circle class=\\\"cls-2\\\" cx=\\\"63.92\\\" cy=\\\"40.64\\\" r=\\\"12.94\\\"/> <line class=\\\"cls-2\\\" x1=\\\"72.95\\\" y1=\\\"49.9\\\" x2=\\\"79.01\\\" y2=\\\"55.96\\\"/> <polygon class=\\\"cls-2\\\" points=\\\"94.92 66.61 89.56 71.85 76.85 59.15 82.21 53.91 94.92 66.61\\\"/> </svg>\",\"eye\":\"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 100 100\\\"> <path class=\\\"cls-2\\\" d=\\\"M97,50S77.19,74.49,50.5,74.54,3.41,50.19,3.41,50.19,23.81,25.7,50.5,25.65,97,50,97,50Z\\\"/> <circle class=\\\"cls-2\\\" cx=\\\"50.19\\\" cy=\\\"50.09\\\" r=\\\"19.05\\\"/> <circle class=\\\"cls-2\\\" cx=\\\"50.19\\\" cy=\\\"50.09\\\" r=\\\"10.43\\\"/> </svg>\",\"magnify\":\"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 100 100\\\"> <rect class=\\\"cls-2\\\" x=\\\"66.24\\\" y=\\\"52.83\\\" width=\\\"9.11\\\" height=\\\"35.66\\\" transform=\\\"translate(-29.23 70.75) rotate(-45)\\\"/> <circle class=\\\"cls-2\\\" cx=\\\"35.65\\\" cy=\\\"35.52\\\" r=\\\"22\\\" transform=\\\"translate(-12.87 22.15) rotate(-29.49)\\\"/> <line class=\\\"cls-2\\\" x1=\\\"50.41\\\" y1=\\\"50.81\\\" x2=\\\"58.45\\\" y2=\\\"58.86\\\"/> </svg>\",\"microscope\":\"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 100 100\\\"> <path class=\\\"cls-2\\\" d=\\\"M66.44,84.19,73,96.79H20.18l8-15.92,8-.1V66.51H50v14.2c10.65-2.54,18.59-12.83,18.55-25.16S60.55,33,50,30.44v6.75l2,4.6H34.18l2-4.74V3.51H50V17.18c17.11,2.87,30.24,18.44,30.3,37.21A38.16,38.16,0,0,1,66.44,84.19Z\\\"/> <line class=\\\"cls-2\\\" x1=\\\"31.24\\\" y1=\\\"3.51\\\" x2=\\\"53.88\\\" y2=\\\"3.51\\\"/> <line class=\\\"cls-2\\\" x1=\\\"28.24\\\" y1=\\\"66.51\\\" x2=\\\"55.88\\\" y2=\\\"66.51\\\"/> <circle class=\\\"cls-2\\\" cx=\\\"43.5\\\" cy=\\\"87.77\\\" r=\\\"3.38\\\"/> </svg>\",\"morterboard\":\"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 100 100\\\"> <polygon class=\\\"cls-2\\\" points=\\\"46.74 11.5 4.74 35.5 47.74 59.5 90.74 35.5 46.74 11.5\\\"/> <circle class=\\\"cls-2\\\" cx=\\\"47.74\\\" cy=\\\"35.5\\\" r=\\\"5\\\"/> <path class=\\\"cls-2\\\" d=\\\"M53.74,35.5h34s3,.5,2.9,1.38c-.39,5.81-1.9,28.28-1.9,32.62,0,5,7.72,5,7,0-1-7-5-32-5-32\\\"/> <path class=\\\"cls-2\\\" d=\\\"M74.74,44.5V61a27.5,27.5,0,0,1-27.5,27.5h0A27.5,27.5,0,0,1,19.74,61V44.5\\\"/> </svg>\",\"pencil\":\"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 100 100\\\"> <path class=\\\"cls-2\\\" d=\\\"M71.12,7.12,92.38,28.37l-51.1,51.1L10.22,91.74a1.22,1.22,0,0,1-1.6-1.55L19.93,58.12Z\\\"/> <line class=\\\"cls-2\\\" x1=\\\"19.93\\\" y1=\\\"58.12\\\" x2=\\\"41.28\\\" y2=\\\"79.47\\\"/> <line class=\\\"cls-2\\\" x1=\\\"12.05\\\" y1=\\\"80.29\\\" x2=\\\"24.75\\\" y2=\\\"86\\\"/> <line class=\\\"cls-2\\\" x1=\\\"77.86\\\" y1=\\\"13.86\\\" x2=\\\"26.76\\\" y2=\\\"64.96\\\"/> <line class=\\\"cls-2\\\" x1=\\\"85.41\\\" y1=\\\"21.4\\\" x2=\\\"34.31\\\" y2=\\\"72.5\\\"/> </svg>\",\"plaster\":\"<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\"?><svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 100 100\\\"> <rect class=\\\"dn\\\" x=\\\"3.23\\\" y=\\\"31.53\\\" width=\\\"93.45\\\" height=\\\"36.11\\\" rx=\\\"17.53\\\" ry=\\\"17.53\\\"/> <g> <rect class=\\\"dl\\\" x=\\\"38.29\\\" y=\\\"39.86\\\" width=\\\"23.33\\\" height=\\\"19.44\\\"/> <g> <rect class=\\\"do\\\" x=\\\"26.35\\\" y=\\\"44.38\\\" width=\\\"3.47\\\" height=\\\"3.47\\\"/> <rect class=\\\"do\\\" x=\\\"18.01\\\" y=\\\"44.38\\\" width=\\\"3.47\\\" height=\\\"3.47\\\"/> <rect class=\\\"do\\\" x=\\\"18.01\\\" y=\\\"51.32\\\" width=\\\"3.47\\\" height=\\\"3.47\\\"/> <rect class=\\\"do\\\" x=\\\"26.35\\\" y=\\\"51.32\\\" width=\\\"3.47\\\" height=\\\"3.47\\\"/> </g> <g> <rect class=\\\"do\\\" x=\\\"78.43\\\" y=\\\"44.38\\\" width=\\\"3.47\\\" height=\\\"3.47\\\"/> <rect class=\\\"do\\\" x=\\\"70.1\\\" y=\\\"44.38\\\" width=\\\"3.47\\\" height=\\\"3.47\\\"/> <rect class=\\\"do\\\" x=\\\"70.1\\\" y=\\\"51.32\\\" width=\\\"3.47\\\" height=\\\"3.47\\\"/> <rect class=\\\"do\\\" x=\\\"78.43\\\" y=\\\"51.32\\\" width=\\\"3.47\\\" height=\\\"3.47\\\"/> </g> </g></svg>\",\"quality\":\"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 100 100\\\"> <path class=\\\"cls-2\\\" d=\\\"M94.57,50,84,39,86.06,23.8,71,21.11,63.78,7.6,50,14.29,36.22,7.6,29,21.11,13.94,23.8,16,39,5.43,50,16,61,13.94,76.2,29,78.89,36.22,92.4,50,85.71,63.78,92.4,71,78.89,86.06,76.2,84,61ZM68.86,76,62.38,88.1,50,82.09l-12.38,6L31.14,76,17.59,73.55l1.88-13.63L9.94,50l9.53-9.92L17.59,26.45,31.14,24,37.62,11.9l12.38,6,12.38-6L68.86,24l13.55,2.42L80.53,40.08,90.06,50l-9.53,9.92,1.88,13.63Zm-21.92-26-6.56-6.56-8.29,8.28L46.94,66.49l22-22-8.28-8.28Zm0,12L36.7,51.64,40.38,48l6.56,6.57L60.68,40.79l3.68,3.68Z\\\"/> </svg>\",\"target\":\"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 100 100\\\"> <circle class=\\\"cls-2\\\" cx=\\\"55.85\\\" cy=\\\"56.75\\\" r=\\\"6.17\\\"/> <circle class=\\\"cls-3\\\" cx=\\\"55.85\\\" cy=\\\"56.75\\\" r=\\\"15.79\\\"/> <circle class=\\\"cls-3\\\" cx=\\\"55.85\\\" cy=\\\"56.75\\\" r=\\\"27.15\\\"/> <circle class=\\\"cls-3\\\" cx=\\\"55.85\\\" cy=\\\"56.75\\\" r=\\\"38.91\\\"/> <line class=\\\"cls-3\\\" x1=\\\"55.85\\\" y1=\\\"56.75\\\" x2=\\\"16.95\\\" y2=\\\"17.85\\\"/> <polygon class=\\\"cls-4\\\" points=\\\"16.91 4.47 29.39 16.72 29.33 30.19 15.92 30.19 3.44 17.94 16.95 17.85 16.91 4.47\\\"/> </svg>\",\"thumbsdown\":\"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 100 100\\\"> <path class=\\\"cls-2\\\" d=\\\"M91.61,32.86a.17.17,0,0,0,0,.25,7.78,7.78,0,0,1,3.72,6.59A8.45,8.45,0,0,1,92.5,46a9.88,9.88,0,0,1-2.25,1.49.16.16,0,0,0-.07.23,9.1,9.1,0,0,1,1.48,5.16,9.52,9.52,0,0,1-2,5.91,7.69,7.69,0,0,1-6.18,2.92H58.89c2.69,5.1,7.85,15.53,8.62,21.75a9.31,9.31,0,0,1-4,9.41,11.86,11.86,0,0,1-4.73,1.82l-1.5.19-6.41-15L34.21,65.16l-8.68-11.5h-14l-3,0-.2-43H19.69l13.52-5H79.53c5,0,7.63,4.54,7.63,8.82a22.45,22.45,0,0,1-.56,3.88.24.24,0,0,0,.24.3c4,.17,6.7,3.56,6.82,8.17A9.31,9.31,0,0,1,91.61,32.86Z\\\"/> </svg>\",\"thumbsup\":\"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 100 100\\\"> <path class=\\\"cls-2\\\" d=\\\"M91.61,66.8a.17.17,0,0,1,0-.25A7.78,7.78,0,0,0,95.37,60a8.45,8.45,0,0,0-2.87-6.25,9.88,9.88,0,0,0-2.25-1.49.16.16,0,0,1-.07-.23,9.12,9.12,0,0,0,1.48-5.16,9.5,9.5,0,0,0-2-5.91A7.69,7.69,0,0,0,83.53,38H58.89c2.69-5.11,7.85-15.53,8.62-21.75a9.31,9.31,0,0,0-4-9.41A11.86,11.86,0,0,0,58.78,5l-1.5-.19-6.41,15L34.21,34.5,25.53,46h-17l-.2,43H19.69l13.52,5H79.53c5,0,7.63-4.55,7.63-8.82a22.73,22.73,0,0,0-.56-3.89.25.25,0,0,1,.24-.3c4-.16,6.7-3.55,6.82-8.16A9.31,9.31,0,0,0,91.61,66.8Z\\\"/> </svg>\",\"warning\":\"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 100 100\\\"> <circle id=\\\"dot\\\" class=\\\"st2\\\" cx=\\\"50\\\" cy=\\\"72.4\\\" r=\\\"4\\\"/> <path id=\\\"exclamation\\\" class=\\\"st2\\\" d=\\\"M53.1,37l-1.6,27.4c0,0.8-0.8,1.5-1.6,1.4c-0.8,0-1.4-0.7-1.4-1.4L46.9,37c-0.1-1.7,1.2-3.1,2.9-3.2 c1.7-0.1,3.1,1.2,3.2,2.9C53.1,36.8,53.1,36.9,53.1,37z\\\"/> <path id=\\\"triangle\\\" class=\\\"st3\\\" d=\\\"M47.8,8.9L4.1,84.5c-1,1.7,0.2,3.9,2.2,3.9h87.4c2,0,3.2-2.1,2.2-3.9L52.2,8.9 C51.2,7.2,48.8,7.2,47.8,8.9z\\\"/></svg>\",\"arrow-down\":\"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 100 100\\\"> <path class=\\\"path\\\" d=\\\"M5,50 L50,95 L95,50 M50,5 L50,95\\\"/></svg>\",\"arrow-up\":\"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 100 100\\\"> <path class=\\\"path\\\" d=\\\"M5,50 L50,5 L95,50 M50,5 L50,95\\\"/></svg>\",\"bullhornmute\":\"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 100 100\\\"> <rect class=\\\"cls-2\\\" x=\\\"13\\\" y=\\\"26\\\" width=\\\"28\\\" height=\\\"36\\\"/> <polyline class=\\\"cls-2\\\" points=\\\"20.5 62.5 20.5 83.5 32.5 83.5 32.5 62.5\\\"/> <polyline class=\\\"cls-2\\\" points=\\\"13.5 30.5 6.5 30.5 6.5 56.5 13.5 56.5\\\"/> <path class=\\\"cls-2\\\" d=\\\"M42.5,30.5h3.84a4.37,4.37,0,0,0,2.45-.75L68.5,16.5v54L48.27,57.22a4.37,4.37,0,0,0-2.41-.72H42.5\\\"/> <path class=\\\"cls-2\\\" d=\\\"M67.5,35.5H71A4.53,4.53,0,0,1,75.5,40V48A4.53,4.53,0,0,1,71,52.5H67.5\\\"/> <line x1=\\\"80\\\" y1=\\\"33\\\" x2=\\\"96\\\" y2=\\\"57\\\"/> <line x1=\\\"80\\\" y1=\\\"57\\\" x2=\\\"96\\\" y2=\\\"33\\\"/></svg>\",\"casestudy\":\"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 100 100\\\"> <line class=\\\"cls-2\\\" x1=\\\"14.5\\\" y1=\\\"26.5\\\" x2=\\\"44.5\\\" y2=\\\"33.5\\\"/> <line class=\\\"cls-2\\\" x1=\\\"14.5\\\" y1=\\\"36.5\\\" x2=\\\"44.5\\\" y2=\\\"43.5\\\"/> <line class=\\\"cls-2\\\" x1=\\\"14.5\\\" y1=\\\"46.5\\\" x2=\\\"44.5\\\" y2=\\\"53.5\\\"/> <line class=\\\"cls-2\\\" x1=\\\"14.5\\\" y1=\\\"56.5\\\" x2=\\\"44.5\\\" y2=\\\"63.5\\\"/> <line class=\\\"cls-2\\\" x1=\\\"14.5\\\" y1=\\\"66.5\\\" x2=\\\"44.5\\\" y2=\\\"73.5\\\"/> <line class=\\\"cls-2\\\" x1=\\\"85.5\\\" y1=\\\"26.5\\\" x2=\\\"55.5\\\" y2=\\\"33.5\\\"/> <line class=\\\"cls-2\\\" x1=\\\"85.5\\\" y1=\\\"36.5\\\" x2=\\\"55.5\\\" y2=\\\"43.5\\\"/> <line class=\\\"cls-2\\\" x1=\\\"85.5\\\" y1=\\\"46.5\\\" x2=\\\"55.5\\\" y2=\\\"53.5\\\"/> <line class=\\\"cls-2\\\" x1=\\\"85.5\\\" y1=\\\"56.5\\\" x2=\\\"55.5\\\" y2=\\\"63.5\\\"/> <line class=\\\"cls-2\\\" x1=\\\"85.5\\\" y1=\\\"66.5\\\" x2=\\\"55.5\\\" y2=\\\"73.5\\\"/> <polygon class=\\\"cls-2\\\" points=\\\"50.75 26.5 9.75 17.5 9.75 73.5 50.75 82.5 90.75 73.5 90.75 17.5 50.75 26.5\\\"/> <line class=\\\"cls-2\\\" x1=\\\"50.25\\\" y1=\\\"26.37\\\" x2=\\\"50.25\\\" y2=\\\"81.5\\\"/> </svg>\",\"checklist_warning\":\"<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\"?><svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 100 100\\\"> <g> <path class=\\\"dl\\\" d=\\\"M38.51,45.65l.73,46.39c0,.97,.79,1.76,1.76,1.76h44.1c.97,0,1.76-.79,1.76-1.76l.95-60.71c0-.97-.79-1.76-1.76-1.76H45.16\\\"/> <path class=\\\"dl\\\" d=\\\"M73.89,28.41l1.86-10.33c.16-.88-.52-1.69-1.41-1.69h-22.57c-.89,0-1.57,.81-1.41,1.69l1.86,10.33\\\"/> <g> <line class=\\\"dl\\\" x1=\\\"54.12\\\" y1=\\\"41.86\\\" x2=\\\"79.38\\\" y2=\\\"41.86\\\"/> <line class=\\\"dl\\\" x1=\\\"46.12\\\" y1=\\\"41.86\\\" x2=\\\"49.38\\\" y2=\\\"41.86\\\"/> </g> <g> <line class=\\\"dl\\\" x1=\\\"54.12\\\" y1=\\\"51.86\\\" x2=\\\"79.38\\\" y2=\\\"51.86\\\"/> <line class=\\\"dl\\\" x1=\\\"46.12\\\" y1=\\\"51.86\\\" x2=\\\"49.38\\\" y2=\\\"51.86\\\"/> </g> <g> <line class=\\\"dl\\\" x1=\\\"54.12\\\" y1=\\\"61.86\\\" x2=\\\"79.38\\\" y2=\\\"61.86\\\"/> <line class=\\\"dl\\\" x1=\\\"46.12\\\" y1=\\\"61.86\\\" x2=\\\"49.38\\\" y2=\\\"61.86\\\"/> </g> <g> <line class=\\\"dl\\\" x1=\\\"54.12\\\" y1=\\\"71.86\\\" x2=\\\"79.38\\\" y2=\\\"71.86\\\"/> <line class=\\\"dl\\\" x1=\\\"46.12\\\" y1=\\\"71.86\\\" x2=\\\"49.38\\\" y2=\\\"71.86\\\"/> </g> <g> <line class=\\\"dl\\\" x1=\\\"54.12\\\" y1=\\\"81.86\\\" x2=\\\"79.38\\\" y2=\\\"81.86\\\"/> <line class=\\\"dl\\\" x1=\\\"46.12\\\" y1=\\\"81.86\\\" x2=\\\"49.38\\\" y2=\\\"81.86\\\"/> </g> </g> <g> <path class=\\\"dm\\\" d=\\\"M44.69,41.9H5.25c-1.53,0-2.48-1.67-1.7-2.99L23.27,3.86c.77-1.28,2.63-1.28,3.39,0l19.72,35.05c.79,1.32-.16,2.99-1.7,2.99Z\\\"/> <circle class=\\\"dm\\\" cx=\\\"24.95\\\" cy=\\\"34.2\\\" r=\\\"1.48\\\"/> <polygon class=\\\"do\\\" points=\\\"26.45 28.67 23.49 28.67 22.49 14.52 27.45 14.52 26.45 28.67\\\"/> </g></svg>\",\"chevron-down\":\"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 100 100\\\"> <path class=\\\"path\\\" d=\\\"M5,25 L50,75 L95,25\\\"/></svg>\",\"chevron-left\":\"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 100 100\\\"> <path class=\\\"path\\\" d=\\\"M75,5 L25,50 L75,95\\\"/></svg>\",\"chevron-right\":\"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 100 100\\\"> <path class=\\\"path\\\" d=\\\"M25,5 L75,50 L25,95\\\"/></svg>\",\"chevron-up\":\"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 100 100\\\"> <path class=\\\"path\\\" d=\\\"M5,75 L50,25 L95,75\\\"/></svg>\",\"clipboard\":\"<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\"?><svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 99 99\\\"> <g> <path class=\\\"cls-1\\\" d=\\\"M49.75,21.39H26.01c-.97,0-1.76,.79-1.76,1.76l.95,60.71c0,.97,.79,1.76,1.76,1.76h22.79\\\"/> <path class=\\\"cls-1\\\" d=\\\"M49.25,21.39h23.74c.97,0,1.76,.79,1.76,1.76l-.95,60.71c0,.97-.79,1.76-1.76,1.76h-22.79\\\"/> </g> <path class=\\\"cls-1\\\" d=\\\"M38.66,20.23l-1.86-10.33c-.16-.88,.52-1.69,1.41-1.69h22.57c.89,0,1.57,.81,1.41,1.69l-1.86,10.33\\\"/> <g> <g> <line class=\\\"cls-1\\\" x1=\\\"58.13\\\" y1=\\\"33.68\\\" x2=\\\"32.87\\\" y2=\\\"33.68\\\"/> <line class=\\\"cls-1\\\" x1=\\\"66.13\\\" y1=\\\"33.68\\\" x2=\\\"62.87\\\" y2=\\\"33.68\\\"/> <line class=\\\"cls-1\\\" x1=\\\"66.13\\\" y1=\\\"43.68\\\" x2=\\\"62.87\\\" y2=\\\"43.68\\\"/> </g> <line class=\\\"cls-1\\\" x1=\\\"58.13\\\" y1=\\\"43.68\\\" x2=\\\"32.87\\\" y2=\\\"43.68\\\"/> <g> <line class=\\\"cls-1\\\" x1=\\\"58.13\\\" y1=\\\"53.68\\\" x2=\\\"32.87\\\" y2=\\\"53.68\\\"/> <line class=\\\"cls-1\\\" x1=\\\"66.13\\\" y1=\\\"53.68\\\" x2=\\\"62.87\\\" y2=\\\"53.68\\\"/> </g> <g> <line class=\\\"cls-1\\\" x1=\\\"58.13\\\" y1=\\\"63.68\\\" x2=\\\"32.87\\\" y2=\\\"63.68\\\"/> <line class=\\\"cls-1\\\" x1=\\\"66.13\\\" y1=\\\"63.68\\\" x2=\\\"62.87\\\" y2=\\\"63.68\\\"/> </g> <g> <line class=\\\"cls-1\\\" x1=\\\"58.13\\\" y1=\\\"73.68\\\" x2=\\\"32.87\\\" y2=\\\"73.68\\\"/> <line class=\\\"cls-1\\\" x1=\\\"66.13\\\" y1=\\\"73.68\\\" x2=\\\"62.87\\\" y2=\\\"73.68\\\"/> </g> </g></svg>\",\"cloud\":\"<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\"?><svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 99 99\\\"> <path class=\\\"cls-1\\\" d=\\\"M68.85,37.55c-2.13,0-4.17,.34-6.09,.94-.11,.03-.4-.24-.44-.42-1.87-8.24-9.62-14.42-18.91-14.42-10.69,0-19.35,8.17-19.35,18.25,0,.68-.6,1.95-.97,1.95-8.84,0-16.01,6.76-16.01,15.1s7.17,15.1,16.01,15.1h45.75c10.69,0,19.35-8.17,19.35-18.25s-8.66-18.25-19.35-18.25Z\\\"/></svg>\",\"document\":\"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 100 100\\\"> <polygon class=\\\"cls-2\\\" points=\\\"85.63 92.25 14.38 92.25 14.38 7.75 69.61 7.75 85.63 23.7 85.63 92.25\\\"/> <polyline class=\\\"cls-2\\\" points=\\\"69.15 7.75 69.15 24.23 85.63 24.23\\\"/> <line class=\\\"cls-2\\\" x1=\\\"22.19\\\" y1=\\\"24.23\\\" x2=\\\"59.66\\\" y2=\\\"24.23\\\"/> <line class=\\\"cls-2\\\" x1=\\\"22.19\\\" y1=\\\"37.65\\\" x2=\\\"77.81\\\" y2=\\\"37.65\\\"/> <line class=\\\"cls-2\\\" x1=\\\"22.19\\\" y1=\\\"51.01\\\" x2=\\\"77.81\\\" y2=\\\"51.01\\\"/> <line class=\\\"cls-2\\\" x1=\\\"22.19\\\" y1=\\\"64.37\\\" x2=\\\"77.81\\\" y2=\\\"64.37\\\"/> <line class=\\\"cls-2\\\" x1=\\\"22.19\\\" y1=\\\"77.73\\\" x2=\\\"77.81\\\" y2=\\\"77.73\\\"/> </svg>\",\"facehappy\":\"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 100 100\\\"> <circle class=\\\"cls-2\\\" cx=\\\"50.5\\\" cy=\\\"49.5\\\" r=\\\"34.5\\\"/> <ellipse cx=\\\"39\\\" cy=\\\"39\\\" rx=\\\"4.5\\\" ry=\\\"7\\\"/> <ellipse cx=\\\"62\\\" cy=\\\"39\\\" rx=\\\"4.5\\\" ry=\\\"7\\\"/> <path class=\\\"cls-2\\\" d=\\\"M29,60c10,11,29,14,42,0\\\"/> </svg>\",\"facesad\":\"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 100 100\\\"> <circle class=\\\"cls-2\\\" cx=\\\"50.5\\\" cy=\\\"49.5\\\" r=\\\"34.5\\\"/> <ellipse cx=\\\"39\\\" cy=\\\"39\\\" rx=\\\"4.5\\\" ry=\\\"7\\\"/> <ellipse cx=\\\"62\\\" cy=\\\"39\\\" rx=\\\"4.5\\\" ry=\\\"7\\\"/> <path class=\\\"cls-2\\\" d=\\\"M29,69.41c10-11,29-14,42,0\\\"/> </svg>\",\"faceunsure\":\"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 100 100\\\"> <circle class=\\\"cls-2\\\" cx=\\\"50.5\\\" cy=\\\"49.5\\\" r=\\\"34.5\\\"/> <ellipse cx=\\\"39\\\" cy=\\\"39\\\" rx=\\\"4.5\\\" ry=\\\"7\\\"/> <ellipse cx=\\\"62\\\" cy=\\\"39\\\" rx=\\\"4.5\\\" ry=\\\"7\\\"/> <path class=\\\"cls-2\\\" d=\\\"M29,64.41C41,61,57,61,71,64.41\\\"/> </svg>\",\"flag\":\"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\" viewBox=\\\"0 0 100 100\\\"> <g class=\\\"cls-1\\\"> <line class=\\\"cls-2\\\" x1=\\\"16.41\\\" y1=\\\"16.53\\\" x2=\\\"31.98\\\" y2=\\\"92.57\\\"/> </g> <path d=\\\"M86.68,52.6c-18.33-13.87-39.23-.68-54.91.09-1.12.06-2.56,0-2.56,0L21.88,16.9a3.73,3.73,0,0,1,1.11.17c16.25,5.66,37.32-13.18,56.34-1.88L87,52.6S88.14,53,86.68,52.6Z\\\"/> </svg>\",\"flip\":\"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 100 100\\\"> <path class=\\\"cls-2\\\" d=\\\"M72.44,35h8.38A14.36,14.36,0,0,1,95.14,49.36v.92A14.36,14.36,0,0,1,80.82,64.6h-62A14.36,14.36,0,0,1,4.47,50.28v-.92A14.36,14.36,0,0,1,18.79,35H33.05\\\"/> <polyline class=\\\"cls-2\\\" points=\\\"88.06 22.46 72.96 35.04 88.06 47.61\\\"/> <polyline class=\\\"cls-2\\\" points=\\\"66.49 72.7 66.49 79.52 33.15 93.71 33.15 6.21 66.49 20.41 66.49 56.52\\\"/> </svg>\",\"gears\":\"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 100 100\\\"> <path class=\\\"cls-2\\\" d=\\\"M58.51,73.5l.22-.73,8.41-2.45v-6L58.6,61.82l-.23-.72a21,21,0,0,0-1.53-3.61l-.37-.67,4.1-7.47-4.25-4.26-7.56,4.15-.66-.35a21.29,21.29,0,0,0-4-1.58l-.74-.22L41.1,39.16h-6l-2.34,8-.72.23a20.6,20.6,0,0,0-4.11,1.81l-.68.39-7.1-3.9L15.87,50l4,7.34-.34.66A21.61,21.61,0,0,0,18,62.16l-.2.77L9.94,65.21v6l8.21,2.39.23.69a21.5,21.5,0,0,0,1.76,3.84l.4.69-4,7.35,4.25,4.25,7.76-4.26.65.32a20.88,20.88,0,0,0,3.63,1.35l.77.21L36,96.36h6l2.54-8.71.68-.24a20.33,20.33,0,0,0,3.34-1.48l.68-.38L57,89.79l4.25-4.25-4.38-8,.33-.66A21.09,21.09,0,0,0,58.51,73.5Z\\\"/> <circle class=\\\"cls-3\\\" cx=\\\"38.54\\\" cy=\\\"67.76\\\" r=\\\"9.41\\\"/> <path class=\\\"cls-3\\\" d=\\\"M83.38,30.9l.17-.57,6.53-1.9V23.77l-6.63-1.94-.18-.55a15.81,15.81,0,0,0-1.19-2.8L81.8,18,85,12.16l-3.3-3.3-5.86,3.22-.52-.28a16.69,16.69,0,0,0-3.06-1.22l-.58-.17L69.87,4.26H65.21L63.39,10.5l-.56.17a16.27,16.27,0,0,0-3.19,1.41l-.53.3-5.51-3-3.3,3.29,3.13,5.7-.27.51a16.56,16.56,0,0,0-1.23,3.24l-.16.6L45.7,24.46v4.67L52.07,31l.18.53a16,16,0,0,0,1.36,3l.32.54-3.13,5.7L54.1,44l6-3.3.51.25A16.25,16.25,0,0,0,63.44,42l.59.16,1.88,6.45h4.66l2-6.76.53-.18a16.1,16.1,0,0,0,2.59-1.15l.53-.3,6,3.29,3.3-3.3-3.4-6.19.26-.51A16.24,16.24,0,0,0,83.38,30.9Z\\\"/> <circle class=\\\"cls-3\\\" cx=\\\"67.89\\\" cy=\\\"26.45\\\" r=\\\"7.3\\\"/> </svg>\",\"handshake\":\"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 100 100\\\"> <path class=\\\"cls-2\\\" d=\\\"M96.06,33.7,78.93,50.84l-8.57,15S57.51,54.05,56.44,53s-2.14-8.57-2.14-8.57H48.94s-4.28,5.36-6.42,6.43-9.64,1.07-9.64,0S45.73,36.92,45.73,36.92H62.86L82.14,18.71Z\\\"/> <line class=\\\"cls-2\\\" x1=\\\"69.29\\\" y1=\\\"30.49\\\" x2=\\\"84.28\\\" y2=\\\"45.48\\\"/> <rect class=\\\"cls-2\\\" x=\\\"1.25\\\" y=\\\"31.48\\\" width=\\\"36.41\\\" height=\\\"8.57\\\" transform=\\\"translate(-19.6 24.27) rotate(-45.06)\\\"/> <polyline class=\\\"cls-2\\\" points=\\\"12.13 49.91 18.19 55.96 38.99 35.11 32.93 29.06\\\"/> <line class=\\\"cls-2\\\" x1=\\\"37.16\\\" y1=\\\"36.92\\\" x2=\\\"48.94\\\" y2=\\\"36.92\\\"/> <line class=\\\"cls-2\\\" x1=\\\"20.03\\\" y1=\\\"55.12\\\" x2=\\\"27.53\\\" y2=\\\"62.62\\\"/> <path class=\\\"cls-2\\\" d=\\\"M53.88,59.61l16.6,16.72a3.22,3.22,0,0,1,0,4.55h0a3.21,3.21,0,0,1-4.54,0L49.32,64.14\\\"/> <path class=\\\"cls-2\\\" d=\\\"M69.29,64.76,72.5,68a3.54,3.54,0,0,1,.1,5.41h0a4.51,4.51,0,0,1-4.65.5\\\"/> <path class=\\\"cls-2\\\" d=\\\"M64.93,80.14A3.21,3.21,0,0,1,64,83h0a3.21,3.21,0,0,1-4.54,0L47.87,72.38\\\"/> <path class=\\\"cls-2\\\" d=\\\"M48,74s1.55-1.45-1-4c-1.5-1.5-4.14-.18-5.35.57a.27.27,0,0,1-.41-.31C43,68,39,64,34.5,67.69c-.15.12-.37,0-.32-.24A3.69,3.69,0,0,0,33,64a4.65,4.65,0,0,0-7,0q-3,3,0,6c.78.78,3.38,1,5,.52a.28.28,0,0,1,.34.4A3.18,3.18,0,0,0,32,75a3.7,3.7,0,0,0,3.26,1.21.5.5,0,0,1,.57.57A4.82,4.82,0,0,0,37,81c1.13,1.13,3.21.13,4.3-.53a.37.37,0,0,1,.55.36c-.18,1.28-.28,3.74,1.15,5.17,2.28,2.28,5.72-.64,7.24-2.17a.49.49,0,0,1,.84.28c.2,1.47.83,3.89,2.92,3.89,3,0,5.41-4.59,4-6\\\"/> <line class=\\\"cls-2\\\" x1=\\\"50\\\" y1=\\\"84\\\" x2=\\\"55\\\" y2=\\\"79\\\"/> <line class=\\\"cls-2\\\" x1=\\\"41\\\" y1=\\\"81\\\" x2=\\\"49\\\" y2=\\\"73\\\"/> <line class=\\\"cls-2\\\" x1=\\\"35\\\" y1=\\\"77\\\" x2=\\\"43\\\" y2=\\\"69\\\"/> <line class=\\\"cls-2\\\" x1=\\\"30\\\" y1=\\\"72\\\" x2=\\\"35\\\" y2=\\\"67\\\"/> </svg>\",\"ldquo\":\"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 100 100\\\"> <path class=\\\"cls-2\\\" d=\\\"M37.89,87.78H3v-25Q3,47.64,5.64,38.88a36.54,36.54,0,0,1,9.88-15.72A50.5,50.5,0,0,1,33.91,12.22l6.84,14.42q-10.44,3.48-15,9.69T21,52.86h16.9Z\\\"/> <path class=\\\"cls-2\\\" d=\\\"M96.17,87.78H61.25v-25q0-15.28,2.67-24a36.36,36.36,0,0,1,9.94-15.66A51.25,51.25,0,0,1,92.19,12.22L99,26.64q-10.44,3.48-15,9.69T79.27,52.86h16.9Z\\\"/></svg>\",\"padlock\":\"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 100 115.8\\\"> <rect x=\\\"2.5\\\" y=\\\"44.4\\\" class=\\\"st0\\\" width=\\\"96\\\" height=\\\"69\\\"/> <path class=\\\"lock\\\" d=\\\"M18.8,45.2V33.7c0-17.3,14.1-31.4,31.4-31.4h0c17.3,0,31.4,14.1,31.4,31.4v11.5\\\"/> <path class=\\\"keyhole\\\" d=\\\"M61.6,68.4c0-6.1-5-11.1-11.1-11.1s-11.1,5-11.1,11.1c0,4.2,2.4,7.9,5.9,9.8c0,0,0.1,0,0.1,0.1l0,22.3h10.1 l0-22.3C59.2,76.4,61.6,72.7,61.6,68.4z\\\"/></svg>\",\"presentation\":\"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 100 100\\\"> <rect class=\\\"cls-2\\\" x=\\\"5.15\\\" y=\\\"7.36\\\" width=\\\"90.32\\\" height=\\\"6.32\\\"/> <rect class=\\\"cls-2\\\" x=\\\"5.15\\\" y=\\\"61.36\\\" width=\\\"90.32\\\" height=\\\"6.32\\\"/> <polyline class=\\\"cls-2\\\" points=\\\"55.8 67.68 59.8 94.64 37.59 94.64 41.59 67.68\\\"/> <line class=\\\"cls-2\\\" x1=\\\"7.86\\\" y1=\\\"13.68\\\" x2=\\\"7.86\\\" y2=\\\"61.36\\\"/> <line class=\\\"cls-2\\\" x1=\\\"92.86\\\" y1=\\\"13.68\\\" x2=\\\"92.86\\\" y2=\\\"61.36\\\"/> <polyline class=\\\"cls-2\\\" points=\\\"65.73 35.15 41.99 49.35 35.78 38.96 59.52 24.76\\\"/> <line class=\\\"cls-2\\\" x1=\\\"38.88\\\" y1=\\\"44.15\\\" x2=\\\"23.85\\\" y2=\\\"53.14\\\"/> <line class=\\\"cls-2\\\" x1=\\\"70.72\\\" y1=\\\"25.12\\\" x2=\\\"61.61\\\" y2=\\\"30.56\\\"/> <line class=\\\"cls-2\\\" x1=\\\"67.32\\\" y1=\\\"18.61\\\" x2=\\\"75.1\\\" y2=\\\"31.62\\\"/> <line class=\\\"cls-2\\\" x1=\\\"56.7\\\" y1=\\\"20.02\\\" x2=\\\"68.58\\\" y2=\\\"39.9\\\"/> <line class=\\\"cls-2\\\" x1=\\\"56.11\\\" y1=\\\"32.1\\\" x2=\\\"57.69\\\" y2=\\\"34.76\\\"/> <line class=\\\"cls-2\\\" x1=\\\"49.67\\\" y1=\\\"35.95\\\" x2=\\\"51.26\\\" y2=\\\"38.61\\\"/> <line class=\\\"cls-2\\\" x1=\\\"43.23\\\" y1=\\\"39.8\\\" x2=\\\"44.82\\\" y2=\\\"42.45\\\"/> </svg>\",\"rdquo\":\"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 100 100\\\"> <path class=\\\"cls-1\\\" d=\\\"M4.69,14.81H39.54v25q0,15.13-2.6,23.81a36.23,36.23,0,0,1-9.86,15.69,50.45,50.45,0,0,1-18.42,11L1.84,75.83q10.54-3.48,15-9.68t4.71-16.49H4.69Z\\\"/> <path class=\\\"cls-1\\\" d=\\\"M63.23,14.81H98.08v25q0,15.13-2.67,23.81a36.54,36.54,0,0,1-9.92,15.69,50.79,50.79,0,0,1-18.29,11L60.38,75.83q10.41-3.48,14.94-9.68T80,49.66H63.23Z\\\"/></svg>\",\"reference\":\"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 100 100\\\"> <path class=\\\"cls-2\\\" d=\\\"M17.49,90.85V9.43a6.88,6.88,0,0,1,6.88-6.88l52.18,0,0,81.77H24.11a6.61,6.61,0,0,0-6.62,6.61h0a6.62,6.62,0,0,0,6.62,6.62h58.4V6.59\\\"/> <line class=\\\"cls-2\\\" x1=\\\"25.27\\\" y1=\\\"90.65\\\" x2=\\\"78.13\\\" y2=\\\"90.65\\\"/> <rect class=\\\"cls-2\\\" x=\\\"29.98\\\" y=\\\"19.5\\\" width=\\\"34.76\\\" height=\\\"22.3\\\"/> <line class=\\\"cls-2\\\" x1=\\\"41.96\\\" y1=\\\"57.5\\\" x2=\\\"52.75\\\" y2=\\\"57.5\\\"/> <line class=\\\"cls-2\\\" x1=\\\"37.17\\\" y1=\\\"50.79\\\" x2=\\\"57.55\\\" y2=\\\"50.79\\\"/> <line class=\\\"cls-2\\\" x1=\\\"32.85\\\" y1=\\\"64.21\\\" x2=\\\"61.86\\\" y2=\\\"64.21\\\"/> </svg>\",\"rewind\":\"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 100 100\\\"> <polyline class=\\\"arrow\\\" points=\\\"48.71 16.09 15.29 49.5 48.7 82.89\\\"/> <polyline class=\\\"arrow\\\" points=\\\"83.71 16.09 50.29 49.5 83.7 82.89\\\"/></svg>\",\"speechboxes\":\"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 100 100\\\"> <polyline class=\\\"cls-2\\\" points=\\\"40.75 25.75 5.75 25.75 5.75 79.75 40.75 79.75 59.75 93.75 59.75 79.75 74.75 79.75 74.75 51.75\\\"/> <path class=\\\"cls-2\\\" d=\\\"M40.75,29.25c0,9.77,7.47,18.09,17.92,21.2.08,5.3.08,11.3.08,11.3s8-7,11.65-10.11c13.67-1.11,24.35-10.71,24.35-22.39,0-12.43-12.09-22.5-27-22.5S40.75,16.82,40.75,29.25Z\\\"/> </svg>\",\"stopcross\":\"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 100 100\\\"> <polygon id=\\\"boarder\\\" class=\\\"st2\\\" points=\\\"68.2,94.7 31.2,94.5 5.3,68.2 5.5,31.2 31.8,5.3 68.8,5.5 94.7,31.8 94.5,68.8\\\"/> <polygon id=\\\"cross\\\" class=\\\"st2\\\" points=\\\"74.4,35.8 64.2,25.6 50,39.8 35.8,25.6 25.6,35.8 39.8,50 25.6,64.2 35.8,74.4 50,60.2 64.2,74.4 74.4,64.2 60.2,50\\\"/></svg>\",\"stophand\":\"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 100 100\\\"> <path id=\\\"hand\\\" class=\\\"st2\\\" d=\\\"M26.6,56.1c0,0,0-38.9,0-42.7c0-7.5,10.1-10.1,13.8-2.5c0-11.3,16.3-12.6,16.3,1.3 c0-10.1,15.1-10.1,15.1,0c0,3.1,0,6.3,0,15.1c0-10.1,15.1-10.1,15.1,1.3c0,13.8,0,32.7,0,41.5S78.1,97.5,53,97.5 s-27.6-8.8-30.2-13.8S10.3,56.1,7.8,51C2.8,41,16.6,36,21.6,46C24.1,51,26.6,56.1,26.6,56.1z\\\"/> <path id=\\\"finger1\\\" class=\\\"st2\\\" d=\\\"M40.5,8.3c0,2.5,0,40.2,0,40.2\\\"/> <path id=\\\"finger2\\\" class=\\\"st2\\\" d=\\\"M56.8,8.3c0,2.5,0,40.2,0,40.2\\\"/> <path id=\\\"finger3\\\" class=\\\"st2\\\" d=\\\"M71.9,13.4c0,2.5,0,40.2,0,40.2\\\"/></svg>\",\"tickdisc\":\"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 100 100\\\"> <circle class=\\\"\\\" cx=\\\"50\\\" cy=\\\"50\\\" r=\\\"45\\\"/> <path class=\\\"tickdisc path\\\" d=\\\"M15,60 L40,85 L85,20\\\"/></svg>\",\"webcast\":\"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 100 100\\\"> <rect class=\\\"cls-2\\\" x=\\\"7.24\\\" y=\\\"14.18\\\" width=\\\"85.26\\\" height=\\\"63.85\\\"/> <polygon class=\\\"cls-2\\\" points=\\\"60.42 85.03 60.42 78.03 39.32 78.03 39.32 85.03 23.72 89.03 23.72 93.15 76.02 93.15 76.02 89.03 60.42 85.03\\\"/> <line class=\\\"cls-2\\\" x1=\\\"7.25\\\" y1=\\\"71.3\\\" x2=\\\"92.49\\\" y2=\\\"71.3\\\"/> <ellipse class=\\\"cls-2\\\" cx=\\\"49.87\\\" cy=\\\"34.76\\\" rx=\\\"10.65\\\" ry=\\\"12.21\\\"/> <path class=\\\"cls-2\\\" d=\\\"M34.92,70.37v-10A8.68,8.68,0,0,1,43.6,51.7H56.14a8.68,8.68,0,0,1,8.68,8.68v10\\\"/> </svg>\"}","var InstructionController = function(opts) {\r\n    var self = this;\r\n    this.$instruction;\r\n    \r\n    this.init = init;\r\n    this.change = change;\r\n    \r\n    this.prevInstruction = '';\r\n    \r\n    init();\r\n    \r\n    function init(){\r\n        self.$instruction = $('.instructionText');\r\n    }\r\n    \r\n    function change(_text){\r\n        //console.log('instructionController::change',_text);\r\n        \r\n        if(_text != self.prevInstruction){\r\n            self.$instruction.fadeTo(300, 0, function(){\r\n                //$(this).css(\"visibility\", \"hidden\");   \r\n                self.$instruction.html(_text);\r\n                self.$instruction\r\n                    .css('opacity', 0)\r\n                    //.css('visibility', 'visible')\r\n                    .fadeTo(300, 1);\r\n            }); // duration, opacity, callback\r\n        }\r\n        self.prevInstruction = _text;\r\n    }\r\n};","/**\r\n * @fileoverview This Plug-in is used to create the Modal. \r\n * @author \r\n * @version 2.0\r\n */\r\n\r\n(function( $ ){\r\n    var $el;\r\n    var options;\r\n\tvar methods = {\r\n        init : function( _options ) {\r\n\r\n            var defaults = {\r\n                $el: null,\r\n                class: '',\r\n                color: 'blue',\r\n                data: {},\r\n                onClose: null\r\n            };\r\n\r\n            options = $.extend(defaults, _options);\r\n\r\n            var htmlStr = '';\r\n            var componentController;\r\n            if (options.data.components){\r\n                componentController = new ComponentController()\r\n                componentController.init();\r\n                htmlStr = componentController.generateComponents(options.data.components[0]);\r\n            } else {\r\n                htmlStr = htmlUtils.getHTMLText(options.data);\r\n            }\r\n            \t\r\n            var html = getModalHTML();\r\n            if (html != ''){\r\n                $(\"#content-wrapper\").append(html);\r\n\r\n            }\r\n            //var navTextXML=xmlData.navigationTextXML;\r\n\r\n            $('#modal').removeClass().addClass('modal fade');\r\n            // removed color for HSBC\r\n            // $('#modal').addClass(options.color);\r\n            // if (options.data.class){\r\n            //     $('#modal').addClass(options.data.class);\r\n            // }\r\n            $('#modal .modal-dialog').removeClass().addClass('modal-dialog modal-lg '+options.class);\r\n            \r\n            if (options.data.title){\r\n                $('#modal .modal-title').html(htmlUtils.getHTMLText(options.data.title[0]));\r\n                // $('#modal .modal-title').focus(); // removed from Atos report\r\n            } else {\r\n                $('#modal .modal-title').html('');                \r\n            }\r\n\r\n            $('#modal .modal-body').html(htmlStr);\r\n\r\n            if (componentController){\r\n                componentController.setupComponents();\r\n            }\r\n\r\n\r\n            $('#modal .btn.closeBtn .btnText').html(htmlUtils.getHTMLText(courseData.data.settings[0].navigation[0].btn_Close[0]));\r\n            // $('#modal .btn.closeBtn').on(\"click\", function () {\r\n            //     if (options.onClose)\r\n            //     options.onClose();\r\n                \r\n            //     //return false;\r\n            // });\r\n\r\n            /*$('.ExitText').html(navTextXML.closeCourse[0].text[0].Text); \r\n            $('.ExitYes .btntext').html(navTextXML.closeCourse[0].buttonText[0].text[0].Text); \r\n            $('.ExitNo .btntext').html(navTextXML.closeCourse[0].buttonText[0].text[1].Text);\r\n\r\n            if(html!=\"\"){\r\n                $('.ExitYes').bind(\"click\", function(){\r\n                    $('.ExitYes').trigger(courseEvent.CLOSECOURSE_YES);\r\n                });\r\n                $('.ExitNo').bind(\"click\", function(){\r\n                    $('.ExitNo').trigger(courseEvent.CLOSECOURSE_NO);\r\n                $('.Exitparent').hide();\r\n                });\r\n            }\t\t\t\r\n            $('.Exitparent').hide();\r\n            updatePageLayOut();\t\t\t*/\r\n            \r\n            // add event listeners for modal show\r\n            $('#modal').on('show.bs.modal', onShow);\r\n\r\n            $(window).resize(function(){\t\t\r\n                \r\n                if (componentController){\r\n                    componentController.resizeContent();\r\n                }\r\n                $.Modal('resize');\r\n\r\n            });\r\n            setTimeout(function(){\r\n//                console.log('delay 2000')\r\n                // componentController.setupComplete();\r\n                if (componentController){\r\n                    componentController.displayComponents();\r\n                }\r\n//                $(window).trigger('resize');\r\n                //$.Modal('resize');\r\n            },250);\r\n        },\r\n        show : function() { \r\n            //var navTextXML=xmlData.navigationTextXML;\r\n            /*$('.ExitYes .btntext').html(navTextXML.closeCourse[0].buttonText[0].text[0].Text); \r\n            $('.ExitNo .btntext').html(navTextXML.closeCourse[0].buttonText[0].text[1].Text);\t\t\t\r\n           $('.Exitparent').show(); */\r\n            console.log('MODAL SHOW');\r\n           \r\n        },\r\n        hide : function() { \r\n            //$('.Exitparent').hide(); \r\n            console.log('MODAL HIDE');\r\n            \r\n\r\n        },\r\n        resize : function() { \r\n          //$('.Exitparent').hide(); \r\n            // resize all help rows to be same size\r\n            $('.helpRow').each(function () {\r\n                var $helpItems = $(this).find('.helpitem');\r\n                var maxHeight = 0;\r\n                $helpItems.height('auto');\r\n                $helpItems.each(function () {\r\n                    maxHeight = Math.max(maxHeight, $(this).height())\r\n                });\r\n                $helpItems.height(maxHeight);\r\n            });\t\r\n        }\r\n    }\r\n\r\n    function onShow(e){\r\n        console.log('MODAL onShow');\r\n\r\n        if (!$el){\r\n            $el = $(e.relatedTarget);\r\n        }\r\n\r\n        $('#modal').off('show.bs.modal', onShow);\r\n        $('#modal').on('hidden.bs.modal', onHide);\r\n        \r\n        // hide the main content when modal is shown\r\n        $('.ui-container').attr('aria-hidden', 'true');\r\n    }\r\n\r\n    function onHide(e){\r\n        console.log('MODAL onHide');\r\n\r\n        if ($el){\r\n            $el.focus();\r\n        }\r\n\r\n        $('#modal').off('hidden.bs.modal', onHide);\r\n\r\n        // unhide the main content when modal is shown\r\n        $('.ui-container').attr('aria-hidden', 'false');\r\n        \r\n        if (options.onClose){\r\n            options.onClose();\r\n            options.onClose = null;\r\n        }\r\n    }    \r\n\r\n\tfunction updatePageLayOut(){\r\n\t\t\r\n\t}\r\n\t/**\r\n\t * This Plug-in contains a set of methods that are used to create the Exit window.\r\n\t * @class This Plug-in is used to create the Exit window.\r\n\t * @param text {String} Exit message text.\r\n\t * @param yes {String} Yes button text.\r\n\t * @param no {String} No button text.\r\n\t * @param onYes {callback} Executes when user selects Yes.\r\n\t * @param onNo {String} Executes when user selects No.\r\n\t * @example\r\n\t * How to Use this plug-in\r\n\t\t $.Exit({\r\n\t\t\t\ttext:\"Exit message\",\r\n\t\t\t\tyes:\"Yes\",\r\n\t\t\t\tno:\"No\",\r\n\t\t\t\tonYes:function(){\r\n\t\t\t\t\r\n\t\t\t\t},\r\n\t\t\t\tonNo:function(){\r\n\t\t\t\t\t\r\n\t\t\t\t}\t\t\t\r\n\t\t\t});\r\n\t */\r\n\t$.fn.Modal = function( method ) {\t\t\r\n\t\tif ( methods[method] ) {\r\n\t\t  return methods[ method ].apply( this, Array.prototype.slice.call( arguments, 1 ));\r\n\t\t} else if ( typeof method === 'object' || ! method ) {\r\n\t\t  return methods.init.apply( this, arguments );\r\n\t\t} else {\r\n\t\t  $.error( 'Method ' +  method + ' does not exist on Modal JS' );\r\n\t\t}    \r\n\t\r\n\t};\t\r\n\t$.extend({Modal: $.fn.Modal});\r\n\t\r\n\t/**\r\n\t * @function getModalHTML\r\n\t * @description This function returns Exit html structure.\r\n\t * @returns data {String}\r\n\t */ \r\n\tgetModalHTML = function() { \r\n//\t\tvar htmlStr ='<div class=\"Exitparent\"><div class=\"ExitPopWindow roundedBorder\" ><div class=\"ExitText\" tabindex=\"1\" ></div><a class=\"roundedBorder ExitYes a-button\" href=\"javascript:void(0);\" tabindex=\"2\" ><span class=\"btntext \">Yes</span></a><a class=\"roundedBorder ExitNo a-button\" href=\"javascript:void(0);\" tabindex=\"3\" ><span class=\"btntext\">No</span></a></div></div>';\r\n        var htm = ''\r\n        //<!-- Modal -->\r\n            htm+='<div id=\"modal\" class=\"modal fade\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"infoModalLabel\">';\r\n                htm+='<div class=\"modal-dialog\" role=\"document\">';\r\n                    htm+='<div class=\"modal-content\">';\r\n                        htm+='<button class=\"btn closeBtn btn-close-container\" data-dismiss=\"modal\" aria-label=\"'+courseData.data.settings[0].navigation[0].btn_Close[0].Text+'\">';\r\n                            htm+='<div class=\"btn-close\">';\r\n                                htm+= svgUtils.createSVG('cross')\r\n                            htm+='</div>';\r\n                        htm+='</button>';\r\n                        htm+='<div class=\"modal-header\">';\r\n                            htm+='<h2 class=\"modal-title\" id=\"infoModalLabel\"></h2>';\r\n                        htm+='</div>';\r\n                    htm+='<div class=\"modal-body\">';\r\n                    htm+='</div>';\r\n                    htm+='<div class=\"modal-footer\">';\r\n                        // htm+='<button class=\"btn closeBtn\" data-dismiss=\"modal\"><div class=\"btnText\">'+htmlUtils.getHTMLText(courseData.data.settings[0].navigation[0].btn_Close[0])+'</button>';\r\n                    htm+='</div>';\r\n                htm+='</div>';\r\n            htm+='</div>';\r\n        \r\n        if ($('.modal#modal').length > 0){\r\n            return \"\";\r\n\t\t}else{\r\n            return htm;  \r\n\t\t}\r\n\t};\r\n\r\n})( jQuery );","function NavigationButton(){\r\n    var self = this;\r\n\r\n\tthis.TRANSCRIPT_ON_CLASS=\"transcriptOn\";\r\n\tthis.TRANSCRIPT_OFF_CLASS=\"transcriptOff\";\r\n\tthis.AUDIO_ON_CLASS =\"audioOn\";\r\n\tthis.AUDIO_OFF_CLASS =\"audioOff\";\r\n\t\r\n    this.DISABLED =\"disabled\";\r\n\tthis.SELECTED =\"selected\";\r\n    \r\n\tthis.DEBUG_NEXT_BUTTON =\".debug_btn_Next\";\r\n\tthis.DEBUG_BACK_BUTTON =\".debug_btn_Back\";\r\n\t\r\n\tthis.LOGO_BUTTON =\".navbar-brand\";\r\n\tthis.HOME_BUTTON =\".btn_Home\";\r\n\tthis.MENU_BUTTON =\".btn_Menu\";\r\n\tthis.REPLAY_BUTTON =\".btn_Replay\";\r\n\tthis.NEXT_BUTTON =\".btn_Next\";\r\n\tthis.BACK_BUTTON =\".btn_Back\";\r\n\tthis.GLOSSARY_BUTTON =\".btn_Glossary\";\r\n\tthis.RESOURCE_BUTTON =\".btn_Resource\";\r\n\tthis.HELP_BUTTON =\".btn_Help\";\r\n\tthis.EXIT_BUTTON =\".btn_Exit\";\r\n\tthis.LANGUAGE_BUTTON =\".btn_Language\";\r\n\tthis.SEARCH_BUTTON =\".btn_Search\";\r\n\tthis.SEARCHGO_BUTTON =\".btn_SearchGo\";\r\n\tthis.AUDIO_BUTTON =\".btn_Audio\";\r\n    \r\n\tthis.SEARCH_INPUT =\".search-input\";\r\n    \r\n\tthis.CONTACT_BUTTON =\".btn_Contact\";\r\n\tthis.DOWNLOAD_COC_BUTTON =\".btn_coc_download\";\r\n    \r\n    this.updateNavButtons = function(){\r\n        $(navigationButton.HOME_BUTTON+' .btn_text').html(courseData.getBtnText('Home'));\r\n        $(navigationButton.MENU_BUTTON+' .btn_text').html(courseData.getBtnText('Menu'));\r\n        $(navigationButton.REPLAY_BUTTON+' .btn_text').html(courseData.getBtnText('Replay'));\r\n        $(navigationButton.NEXT_BUTTON+' .btn_text').html(courseData.getBtnText('Next'));\r\n        $(navigationButton.BACK_BUTTON+' .btn_text').html(courseData.getBtnText('Back'));\r\n        $(navigationButton.GLOSSARY_BUTTON+' .btn_text').html(courseData.getBtnText('Glossary'));\r\n        $(navigationButton.RESOURCE_BUTTON+' .btn_text').html(courseData.getBtnText('Resource'));\r\n        $(navigationButton.HELP_BUTTON+' .btn_text').html(courseData.getBtnText('Help'));\r\n        $(navigationButton.EXIT_BUTTON+' .btn_text').html(courseData.getBtnText('Exit'));\r\n        \r\n        $(navigationButton.SEARCH_BUTTON+' .btn_text').html(courseData.getBtnText('Search'));\r\n        $(navigationButton.SEARCH_INPUT).attr(\"placeholder\", courseData.getBtnText('Search'));\r\n        $(navigationButton.SEARCHGO_BUTTON+' .btn_text').html(courseData.getBtnText('SearchGo'));\r\n        \r\n        $(navigationButton.LANGUAGE_BUTTON+' .btn_text').html(courseData.getBtnText('Language'));\r\n        \r\n        $(navigationButton.AUDIO_BUTTON+' .btn_text').html(courseData.getBtnText('AudioOn'));\r\n        \r\n        /* if (!navigationConfig.buttons.home){\r\n            $(navigationButton.HOME_BUTTON).hide();\r\n        }\r\n        if (!navigationConfig.buttons.menu){\r\n            $(navigationButton.MENU_BUTTON).hide();\r\n        }\r\n        \r\n        if (!navigationConfig.buttons.back){\r\n            $(navigationButton.BACK_BUTTON).hide();\r\n        }\r\n        if (!navigationConfig.buttons.replay){\r\n            $(navigationButton.REPLAY_BUTTON).hide();\r\n        }\r\n        if (!navigationConfig.buttons.next){\r\n            $(navigationButton.NEXT_BUTTON).hide();\r\n        } */\r\n        self.hideNavButton('home');\r\n        self.hideNavButton('menu');\r\n        self.hideNavButton('back');\r\n        self.hideNavButton('replay');\r\n        self.hideNavButton('next');\r\n\r\n        if (!componentConfig.glossary){\r\n            $(navigationButton.GLOSSARY_BUTTON).hide();\r\n        } else {\r\n            self.hideNavButton('glossary');\r\n        }\r\n        if (!componentConfig.help){\r\n            $(navigationButton.HELP_BUTTON).hide();\r\n        } else {\r\n            self.hideNavButton('help');\r\n        }\r\n        if (!componentConfig.resource){\r\n            $(navigationButton.RESOURCE_BUTTON).hide();\r\n        } else {\r\n            self.hideNavButton('resource');\r\n        }\r\n        if (!componentConfig.exit){\r\n            $(navigationButton.EXIT_BUTTON).hide();\r\n        } else {\r\n            self.hideNavButton('exit');\r\n        }\r\n        if (!componentConfig.progress){\r\n            $('#userProgress').hide();\r\n        }\r\n        if (!componentConfig.search){\r\n            $('.search-dropdown').hide();\r\n        }\r\n        if (!courseConfig.audio){\r\n            $(navigationButton.AUDIO_BUTTON).hide();\r\n        } else {        \r\n            self.hideNavButton('audio');\r\n        }\r\n       \r\n    }\r\n\r\n    this.hideNavButton = function(btnName){\r\n        if (navigationConfig.nav.top){\r\n            // top nav is active\r\n            if (navigationConfig.nav.top.buttons[btnName]){\r\n                // button is active - lets add a class to the body to say this nav feature is active\r\n                $('body').addClass('nav-top-active');\r\n            } else {\r\n                // console.log('NavigationButton::hide top nav button: '+btnName);\r\n                $('.navbar '+navigationButton[btnName.toUpperCase()+'_BUTTON']).hide();\r\n            }\r\n        }\r\n        if (navigationConfig.nav.bottom){\r\n            // bottom nav is active\r\n            if (navigationConfig.nav.bottom.buttons[btnName]){\r\n                // button is active - lets add a class to the body to say this nav feature is active\r\n                $('body').addClass('nav-bottom-active');\r\n            } else {\r\n                // console.log('NavigationButton::hide bottom nav button: '+btnName);\r\n                $('.bottomNavigation '+navigationButton[btnName.toUpperCase()+'_BUTTON']).hide();\r\n            }\r\n        }\r\n    }\r\n}","var NavigationController = function() {\r\n    var self = this;\r\n        \r\n    this.pageArray = [];\r\n    this.prevPage = 0;\r\n    this.currentPage = 0;\r\n    this.currentSlide = 0;\r\n    this.moduleIndex = 0;\r\n    this.pageIndex = 0;\r\n    this.numSlides = 0;\r\n\r\n    this.locationHash = '';\r\n    \r\n    this.rolesArray = [];\r\n    this.defaultRoles = [];\r\n    this.roles = [];\r\n    this.historyArray = [];\r\n    \r\n    this.introModuleNum = 0;\r\n    this.menuModuleNum = 0;\r\n    this.menuPageIndex = 0;\r\n    \r\n    var ALLOW_PREV_PAGE_CHANGE = true;\r\n    var ALLOW_NEXT_PAGE_CHANGE = true;\r\n\r\n    // Private functions\r\n    function init() {\r\n        //console.log('NavigationController::init', self.pageArray.length);\r\n        \r\n        self.introModuleNum = courseData.getIntroModuleNum();\r\n        self.menuModuleNum = courseData.getMenuModuleNum();\r\n        \r\n        var slideCount = 0;\r\n        for (var i = 0; i < courseData.getNumModules(); i++ ){\r\n            var moduleData = courseData.getModuleData(i);\r\n            var moduleRoles = (moduleData.roles ? moduleData.roles.split(',').toNumberArray() : []);\r\n            //var module = hidden\r\n            for (var j = 0; j < courseData.getNumPages(i); j++ ){\r\n                var pageData = courseData.getPageData(i,j);\r\n                var pageRoles = (pageData.roles ? pageData.roles.split(',').toNumberArray() : moduleRoles);\r\n                \r\n                var slidesArray = [];\r\n                //console.log('module', i, 'page:', j);\r\n                for (var k = 0; k < courseData.getNumSlides(i,j); k++ ){\r\n                    \r\n                    var slideData = courseData.getSlideData(i,j,k);\r\n                    var xmlPath = courseData.getXMLPath(i,j,k);\r\n                    var slideLanguages = activeLanguages.slice();\r\n                    var slideRoles = (slideData.roles ? slideData.roles.split(',').toNumberArray() : pageRoles);\r\n                    //console.log(activeLanguages, slideLanguages);\r\n                    if (slideData.langs){\r\n                        slideData.langs = slideData.langs.split(',');\r\n                        var removeLanguages = false;\r\n                        for (var l = 0; l < slideData.langs.length; l++ ){\r\n                            if (slideData.langs[l].indexOf('!') != -1){\r\n                                removeLanguages = true;\r\n                                // not this language\r\n                                slideLanguages.splice(slideLanguages.indexOf(slideData.langs[l].split('!').join('')), 1);\r\n                            } \r\n                            if (!removeLanguages){\r\n                                // didn't remove any - let's use the ones identified only\r\n                                slideLanguages = slideData.langs.slice();\r\n                            }\r\n                        }\r\n                    } \r\n                        //? slideData.langs.split(',') : activeLanguages;\r\n//                    if (slideData.langs)\r\n                    var slideObj = {\r\n                        id: slideCount,\r\n                        xmlPath: xmlPath,\r\n                        xmlFilename: xmlPath.substr(xmlPath.lastIndexOf('/')+1, xmlPath.length).split('.xml').join(''),\r\n                        xmlLoaded: false,\r\n                        template: courseData.getTemplateName(i,j,k),\r\n                        navData: slideData,\r\n                        roles: slideRoles,\r\n                        langs: slideLanguages,\r\n                        mandatory: slideData.mandatory ? utils.xmlAttributeToJSON(slideData.mandatory) : true\r\n                    };\r\n\r\n                    // console.log('ROLES - slide', i, j, k, slideObj.roles)\r\n                    slidesArray.push(slideObj);\r\n                    slideCount++;\r\n                }\r\n\r\n                var pageObj = {\r\n                    module: i, \r\n                    page: j, \r\n                    mandatory: pageData.mandatory ? utils.xmlAttributeToJSON(pageData.mandatory) : true,\r\n                    optional: false,\r\n                    completeModuleOnCompletion: (pageData.completeModuleOnCompletion) ? true : false,\r\n                    roles: pageRoles,\r\n                    slides: slidesArray\r\n                }\r\n\r\n                // set to true if mandatory condition met\r\n                pageObj.optional = pageObj.mandatory == false;\r\n\r\n                self.pageArray.push(pageObj);\r\n                \r\n                if (i == self.menuModuleNum){\r\n                    self.menuPageIndex = self.pageArray.length-1;\r\n                }\r\n            }\r\n        }   \r\n        \r\n        $( window ).on('scroll', function () {\r\n            self.checkForScroll();\r\n        });\r\n        \r\n        $('.fixedNavigation .scroll-arrow').on('click', function(){\r\n            var $scrollStops = $('.scrollStop');\r\n            var canScrollViewportHeightInterval = false;\r\n            //$slides.\r\n            // get slide in view\r\n            $scrollStops.each(function(index){\r\n                //var viewportTop = utils.getViewportTop(); //window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop;\r\n                //var viewportBottom = viewportTop + $(window).height();\r\n                //var elOffsetTop = utils.findElementTotalOffset($el[0]).top;\r\n                \r\n                \r\n                var top = Math.round(utils.findElementTotalOffset($(this)[0]).top);//-$('#navbar').height();\r\n                var scrollTop = Math.round($(window).scrollTop())+self.getNavbarHeight();\r\n                var viewportHeight = Math.round($(window).height());\r\n                var scrollStopHeight = Math.round($(this).height());\r\n                // console.log('Slide '+index, top, scrollTop);\r\n                if (top > scrollTop){\r\n                    // jump to top of slide view\r\n                    //$(\"html, body\").animate({ scrollTop: top});\r\n                    // if (top+scrollStopHeight < scrollTop+viewportHeight){\r\n                    //     // already in view\r\n                    // } else {\r\n                        self.autoScroll(top);\r\n                        return false;\r\n                    // }\r\n                } else if (canScrollViewportHeightInterval){\r\n                    var newTop = top;\r\n                    while (newTop <= scrollTop){\r\n                        newTop += viewportHeight;\r\n                        //console.log(newTop, top+scrollStopHeight-viewportHeight);   \r\n                        //newTop = Math.min(newTop, top+scrollStopHeight-viewportHeight);   \r\n                    }\r\n                    //console.log(newTop);\r\n//                    if (top+scrollStopHeight-viewportHeight > scrollTop){\r\n                    if (top+scrollStopHeight-viewportHeight < newTop){\r\n                        newTop = Math.min(newTop, top+scrollStopHeight-viewportHeight);   \r\n                        //console.log(newTop);   \r\n                    }\r\n                    \r\n                    if (newTop > scrollTop){\r\n                        //$(\"html, body\").animate({ scrollTop: newTop});\r\n                        self.autoScroll(newTop);\r\n                        return false;\r\n                    }\r\n//                    if (top+viewportHeight > scrollTop){\r\n//                        // jump to bottom of slide view\r\n//                        $(\"html, body\").animate({ scrollTop: top+viewportHeight});\r\n//                        return false;\r\n//                    } else if (top+scrollStopHeight-viewportHeight > scrollTop){\r\n//                        // jump to bottom of slide view\r\n//                        $(\"html, body\").animate({ scrollTop: top+scrollStopHeight-viewportHeight});\r\n//                        return false;\r\n//                    }\r\n                }\r\n            });\r\n            \r\n            //$(\"html, body\").animate({ scrollTop: $slide.next().offset().top});    \r\n        })\r\n        \r\n        window.addEventListener('popstate', function (e){\r\n            //console.log('history onpopstate', e.state);\r\n            if (e.state != null){\r\n                //console.log('history onpopstate', e.state.page, self.currentPage);\r\n                //if (e.state.page != self.currentPage){\r\n                //}\r\n                document.title = e.state.title;\r\n                changePage(e.state.page, false);\r\n            }\r\n            //var pageURLParameter = parseInt(utils.getURLParameter('page'));\r\n            //console.log('history changePage', pageURLParameter)\r\n//            if (!isNaN(pageURLParameter)){\r\n//                changePage(pageURLParameter, false);\r\n//            }\r\n        });\r\n    }\r\n    \r\n    \r\n    function changePage(arg, _addToHistory){\r\n        // console.log('NavigationController::changePage');\r\n        if (liveEditConfig.enabled){\r\n            if (liveEditReq.liveEditLoaded && !liveEditController.allowNavigation()){\r\n                return false;\r\n            }\r\n        }\r\n\r\n        $(document).trigger(courseEvent.PAGE_CHANGE);\r\n        \r\n        var addToHistory = (_addToHistory != undefined && _addToHistory != null) ? _addToHistory : true;\r\n        if (self.currentPage == arg && addToHistory){\r\n            addToHistory = 'replace';\r\n        }\r\n        //console.log('NavigationController::changePage', arg, self.currentPage, addToHistory);\r\n        \r\n        self.allowPreviousDefaultAction(true);\r\n        self.allowNextDefaultAction(true);\r\n        self.pulsateNextButton(false);\r\n        \r\n        if (arg >= 0 && arg < self.pageArray.length){\r\n\r\n            var pageObj = self.pageArray[arg];\r\n            \r\n            if (storageController.isModuleLocked(pageObj.module) && !navigationConfig.developerUnlock &&!navigationConfig.debug){\r\n                // we can't go to this page\r\n                console.log('Module locked: '+pageObj.module, self.currentPage, self.menuPageIndex)\r\n                // check if menu page is locked\r\n                if (!storageController.isModuleLocked(self.pageArray[self.menuPageIndex].module)){\r\n                    if (self.currentPage != self.menuPageIndex){ \r\n                        // redirect to menu\r\n                        self.showMenu();\r\n                    }\r\n                } else {\r\n                    changePage(0);\r\n                }\r\n                return false;\r\n            } \r\n\r\n            self.prevPage = self.currentPage;\r\n            self.currentPage = arg;\r\n\r\n            var pageObj = self.pageArray[self.currentPage];\r\n            \r\n            if (!self.canWeReturnToPage(self.currentPage) && storageController.isPageComplete(self.currentPage)){\r\n                // we can't go to this page - redirect to menu\r\n                self.showMenu();\r\n                return false;\r\n            }            \r\n            \r\n            \r\n            self.moduleIndex = pageObj.module;\r\n            self.pageIndex = pageObj.page;\r\n            self.numSlides = pageObj.slides.length;\r\n            \r\n            // check current page - if multi language only - let's remove\r\n            if (!multiLanguage){\r\n                if (courseData.getPageData(self.moduleIndex, self.pageIndex).multiLanguageOnly == \"true\"){\r\n                    // skip this page\r\n                    changePage(arg+1, _addToHistory);\r\n                    return false;\r\n                }\r\n            }\r\n            \r\n            self.historyArray.push(self.currentPage);\r\n\r\n            // disable navigation\r\n            if (self.currentPage == self.menuPageIndex){\r\n                //$(navigationButton.MENU_BUTTON).disable();\t\r\n                $(navigationButton.NEXT_BUTTON).disable();\t\r\n                $(navigationButton.BACK_BUTTON).disable();\t\r\n            } else {\r\n                // back button\r\n                if (self.currentPage > 1 || self.currentPage > 0 && multiLanguage){\r\n                    $(navigationButton.BACK_BUTTON).enable();\t\r\n                    $(navigationButton.DEBUG_BACK_BUTTON).enable();\t\r\n                } else {\r\n                    $(navigationButton.BACK_BUTTON).disable();\t\r\n                    $(navigationButton.DEBUG_BACK_BUTTON).disable();\t\r\n                }\r\n                // next button\r\n                $(navigationButton.NEXT_BUTTON).disable();\t    \r\n                if (self.currentPage < self.pageArray.length){\r\n                    $(navigationButton.DEBUG_NEXT_BUTTON).enable();\t\r\n                } else {\r\n                    $(navigationButton.DEBUG_NEXT_BUTTON).disable();\t    \r\n                }\r\n                //$(navigationButton.MENU_BUTTON).enable();\t\r\n            }\r\n\r\n            //console.log(1);\r\n            \r\n            if (navigationConfig.browserNavigation && addToHistory){    \r\n                //console.log('history NavigationController::changePage', arg, self.currentPage, addToHistory);\r\n                // let's add to history\r\n                // var url = window.location.href.split('?')[0]+'?lang='+currentLanguage+'&page='+self.currentPage;\r\n\r\n                var urlQueryStr = location.search.substring(1);\r\n                // this will allow any params to persist, or be overwritten\r\n                var decodedURI = decodeURI(urlQueryStr).replace(/\"/g, '\\\\\"').replace(/&/g, '\",\"').replace(/=/g,'\":\"')\r\n                var urlQueryObj = JSON.parse('{' + (decodedURI == '' ? decodedURI : '\"' + decodedURI + '\"') + '}')\r\n\r\n                if ($('body').hasClass('debug-on')){\r\n                    urlQueryObj['debug'] = '1';\r\n                }\r\n                if ($('body').hasClass('slidemapping')){\r\n                    urlQueryObj['mapping'] = '1';\r\n                }\r\n                urlQueryObj['lang'] = currentLanguage;\r\n                urlQueryObj['page'] = self.currentPage;\r\n\r\n                var url = window.location.href.split('?')[0]+'?'+$.param(urlQueryObj);\r\n\r\n                var page = self.currentPage;\r\n                var title = courseData.getCourseTitle();\r\n                var stateObj = {page: page, title: title};\r\n                if (addToHistory == 'replace'){\r\n                    history.replaceState(stateObj, title, url);                    \r\n                } else {\r\n                    history.pushState(stateObj, title, url);                    \r\n                }\r\n                \r\n                if (courseConfig.googleAnalytics.enabled){\r\n                    gtag('config', gtagID, {\r\n                        'page_path': url, \r\n                        'anonymize_ip': courseConfig.googleAnalytics.anonymize_ip\r\n                    });\r\n                }\r\n                //},'', window.location.href.split('?')[0]+'?page='+self.currentPage);\r\n            }\r\n            contentController.changePage();\r\n        } else if (arg < 0){\r\n            //console.log(2);\r\n            self.currentPage = 0;\r\n        } else if (arg >= self.pageArray.length){\r\n            //console.log(3)\r\n            self.currentPage = self.pageArray.length-1;\r\n        }\r\n        \r\n        //uiController.updateUI();\r\n\r\n        var pageData = courseData.getPageData(self.moduleIndex, self.pageIndex);\r\n        \r\n        if (navigationConfig.navbar == false || (navigationConfig.hideNavOnFirstPage && self.currentPage == 0)){\r\n            $('body').addClass('nav-hidden');    \r\n            $('body').removeClass('nav-visible');   \r\n            uiController.hideNav();\r\n        } else if (navigationConfig.navbar == true){\r\n            $('body').addClass('nav-visible');    \r\n            $('body').removeClass('nav-hidden');    \r\n            uiController.showNav();\r\n        }\r\n        \r\n        console.log('footer', pageData.footer);\r\n        if (pageData.footer == undefined || pageData.footer == \"false\"){\r\n            $('body').addClass('footer-hidden');    \r\n            $('body').removeClass('footer-visible'); \r\n        } else {\r\n            $('body').addClass('footer-visible');\r\n            $('body').removeClass('footer-hidden footer-light footer-dark');\r\n            if (pageData.footer == \"light\"){\r\n                $('body').addClass('footer-light');\r\n            }\r\n            if (pageData.footer == \"dark\"){\r\n                $('body').addClass('footer-dark');\r\n            }\r\n        }\r\n\r\n        storageController.setLocation(self.currentPage);\r\n        storageController.saveData();\r\n    }\r\n    \r\n    // Public methods\r\n    this.init = function(){\r\n        init();\r\n    }\r\n    \r\n    this.initRoles = function(){\r\n        // get roles\r\n        //console.log('initRoles', courseData.getNumRoles());\r\n        var roles = courseData.getRoles();\r\n        for (var i = 0; i < roles.length; i++){\r\n                \r\n            self.rolesArray.push(roles[i].role || i);\r\n            if (roles[i].default == 'true'){\r\n                self.defaultRoles.push(roles[i].role || i);\r\n            }\r\n        }\r\n\r\n        self.defaultRoles = self.defaultRoles.length == 0 ? self.rolesArray.slice() : self.defaultRoles;\r\n\r\n        // set roles from URL\r\n        var roleURLParameter = parseInt(utils.getURLParameter('role'));\r\n        if (!isNaN(roleURLParameter)){\r\n            roles = [Number(roleURLParameter)];\r\n        } else{\r\n            roles = storageController.getRoles();\r\n        }\r\n        \r\n        if (roles.length == 0){\r\n            roles = self.defaultRoles.slice();\r\n        }\r\n        // console.log('initRoles', roles, self.roles, self.rolesArray, self.defaultRoles);\r\n        self.setRoles(roles);\r\n    }\r\n    \r\n    this.setRoles = function(roles){\r\n        if (roles.constructor !== Array){\r\n            roles = [roles];\r\n        }\r\n        // make sure we're using a number array\r\n        roles = roles.toNumberArray();\r\n        // console.log('setRoles', roles);\r\n\r\n        // remove any roles from body\r\n        $('body').removeClass(utils.getWordsByFragment($('body')[0].className, 'userrole').join(' '));\r\n        \r\n        if (roles.length == 0){\r\n            self.roles = self.defaultRoles.slice();\r\n        } else {\r\n            self.roles = roles.slice();\r\n        }\r\n                \r\n        // add to the body\r\n        for (var i = 0; i < roles.length; i++){\r\n            $('body').addClass('userrole'+roles[i]);\r\n        }\r\n                \r\n        storageController.setRoles(navigationController.roles);\r\n    }\r\n    \r\n    this.isValidRole = function (roles){\r\n        if (roles.constructor !== Array){\r\n            roles = [roles];\r\n        }\r\n        if (roles.length == 0){\r\n            // if no roles sent - assume that visible for all so a valid role\r\n            return true;\r\n        }\r\n        roles = roles.toNumberArray();\r\n        // console.log('NavigationController:isValidRole 2', roles, self.roles);\r\n        // for (var i=0; i<roles.length;i++) roles[i] = parseInt(roles[i]);\r\n        \r\n        var found = false;\r\n        for (var i = 0; i < roles.length; i++){\r\n            if (self.roles.indexOf(roles[i]) != -1){\r\n                found = true;\r\n                break;\r\n            }\r\n        }\r\n        \r\n        // console.log('NavigationController:isValidRole', found, roles, self.roles);\r\n        return found;\r\n    }\r\n\r\n    this.isModuleValidForRole = function (moduleIndex){\r\n        var isValid = false;\r\n        for (var i = 0; i < self.pageArray.length && !isValid; i++){\r\n            if (self.pageArray[i].module == moduleIndex){\r\n                // check for slide within page\r\n                for (var j = 0; j < self.pageArray[i].slides.length; j++){\r\n                    if (self.isValidRole(self.pageArray[i].slides[j].roles)){\r\n                        isValid = true;\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return isValid;\r\n    }\r\n\r\n    this.isModulePageValidForRole = function (moduleIndex, pageIndex){        \r\n        var isValid = false;\r\n        for (var i = 0; i < self.pageArray.length && !isValid; i++){\r\n            if (self.pageArray[i].module == moduleIndex && self.pageArray[i].page == pageIndex){\r\n                // check for slide within page\r\n                for (var j = 0; j < self.pageArray[i].slides.length; j++){\r\n                    if (self.isValidRole(self.pageArray[i].slides[j].roles)){\r\n                        isValid = true;\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return isValid;\r\n    }\r\n\r\n    this.isPageValidForRole = function (pageIndex){        \r\n        var isValid = false;\r\n        \r\n        // check for slide within page\r\n        for (var i = 0; i < self.pageArray[pageIndex].slides.length; i++){\r\n            if (self.isValidRole(self.pageArray[pageIndex].slides[i].roles)){\r\n                isValid = true;\r\n                break;\r\n            }\r\n        }\r\n        return isValid;\r\n    }\r\n\r\n    // this function will return the first page that is valid for the current role\r\n    this.getFirstPageValidForRole = function (moduleIndex){\r\n        var page = -1;\r\n        for (var i = 0; i < self.pageArray.length; i++){\r\n            if (moduleIndex == undefined || self.pageArray[i].module == moduleIndex){\r\n                // check for slide within page\r\n                for (var j = 0; j < self.pageArray[i].slides.length; j++){\r\n                    if (self.isValidRole(self.pageArray[i].slides[j].roles)){       \r\n                        // if in the same module then return the module page number or if moduleIndex not provided then return the course page number\r\n                        return moduleIndex == undefined ? i : self.pageArray[i].page;\r\n                    }\r\n\r\n                }\r\n            }\r\n        }\r\n        return page;\r\n    }\r\n\r\n    // this function will return the last page that is valid for the current role\r\n    this.getLastPageValidForRole = function (moduleIndex){\r\n        var page = -1;\r\n        for (var i = self.pageArray.length-1; i >= 0; i--){\r\n            if (moduleIndex == undefined || self.pageArray[i].module == moduleIndex){\r\n                // check for slide within page\r\n                for (var j = 0; j < self.pageArray[i].slides.length; j++){\r\n                    if (self.isValidRole(self.pageArray[i].slides[j].roles)){     \r\n                        // if in the same module then return the module page number or if moduleIndex not provided then return the course page number                   \r\n                        return moduleIndex == undefined ? i : self.pageArray[i].page;\r\n                    }\r\n\r\n                }\r\n            }\r\n        }\r\n        return page;\r\n    }\r\n    \r\n    this.changePage = function(arg, addToHistory) {\r\n        changePage(arg, addToHistory);\r\n    }\r\n    \r\n//    this.changePageTo = function(arg, addToHistory) {\r\n//        changePage(arg, addToHistory);\r\n//    }\r\n    \r\n    this.changePageToFile = function(arg) {\r\n        var found = false;\r\n        var page = self.currentPage;\r\n        for (var i = 0; i < self.pageArray.length && !found; i++ ){\r\n            for (var j = 0; j < self.pageArray[i].slides.length; j++ ){\r\n                if (self.pageArray[i].slides[j].xmlFilename == arg){\r\n                    found = true;\r\n                    page = i;\r\n                    self.currentSlide = j;\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        changePage(page);\r\n    }\r\n    \r\n    this.changePageToData = function(moduleIndex, pageIndex, slideIndex) {\r\n        moduleIndex = parseInt(moduleIndex);\r\n        pageIndex = parseInt(pageIndex);\r\n        slideIndex = parseInt(slideIndex);\r\n        //console.log('NavigationController:changePageToData', moduleIndex, pageIndex, slideIndex);\r\n        var found = false;\r\n        var page = self.currentPage;\r\n        self.currentSlide = 0;\r\n        for (var i = 0; i < self.pageArray.length && !found; i++ ){\r\n            if (self.pageArray[i].module == moduleIndex){\r\n                if (self.pageArray[i].page == pageIndex){\r\n                    page = i;\r\n                    if (slideIndex <= self.pageArray[i].slides.length){\r\n                        found = true;\r\n                        self.currentSlide = slideIndex;\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        //console.log('NavigationController:changePageToData', found, page, self.currentSlide);\r\n        changePage(page);\r\n    }\r\n    \r\n    this.debugNextPage = function() {\r\n        var nextPageIndex = self.currentPage+1;\r\n        while (!navigationController.isPageValidForRole(nextPageIndex) && nextPageIndex < self.pageArray.length){\r\n            nextPageIndex ++;\r\n        }\r\n        changePage(nextPageIndex);\r\n    }\r\n    \r\n    // \r\n    this.debugPreviousPage = function() {\r\n        var prevPageIndex = self.currentPage-1;\r\n        while (!navigationController.isPageValidForRole(prevPageIndex) && prevPageIndex > 0){\r\n            prevPageIndex --;\r\n        }\r\n        changePage(prevPageIndex);\r\n    }\r\n    \r\n    // \r\n    this.nextPage = function() {\r\n        $(document).trigger(courseEvent.NEXT_BTN_CLICK);\r\n        // console.log('nextPage:ALLOW_NEXT_PAGE_CHANGE', ALLOW_NEXT_PAGE_CHANGE);\r\n        if (ALLOW_NEXT_PAGE_CHANGE){\r\n            //var \r\n            var showMenu = false;\r\n            for (var i = self.currentPage+1; i < self.pageArray.length; i++){\r\n                // console.log(self.currentPage+1, self.pageArray[i]);\r\n\r\n                if (!courseConfig.redirectToMenuOnModuleComplete){\r\n                    // go to next page\r\n\r\n                } else if (self.pageArray[i].module == self.pageArray[self.currentPage].module){\r\n                    // make sure we're in the same module\r\n                    \r\n                } else {\r\n                    showMenu = true;\r\n                    break;\r\n                }\r\n                // is page valid for role?\r\n                if (!navigationController.isValidRole(self.pageArray[i].roles)){\r\n                    self.currentPage = i;\r\n                    self.nextPage();\r\n                    break;\r\n                }\r\n\r\n                if (!self.canWeReturnToPage(i) && storageController.isPageComplete(i)){\r\n                    // do nothing - we dont want to go to this page\r\n                    //console\r\n                } else {\r\n                    changePage(i);\r\n                    break;\r\n                }\r\n            }\r\n\r\n            if (showMenu){\r\n                self.showMenu();\r\n            }\r\n            \r\n        }\r\n        self.allowNextDefaultAction(true);\r\n    }\r\n    \r\n    // \r\n    this.previousPage = function() {\r\n        $(document).trigger(courseEvent.PREV_BTN_CLICK);\r\n        if (ALLOW_PREV_PAGE_CHANGE){\r\n            var prevPageNum = self.currentPage-1;\r\n\r\n            if (navigationConfig.useHistory && self.historyArray.length > 1) {\r\n                //console.log('back', self.historyArray);\r\n                self.historyArray.pop();\r\n                prevPageNum = self.historyArray.pop();\r\n            }\r\n\r\n            // is page valid for role?\r\n            if (!navigationController.isValidRole(self.pageArray[prevPageNum].roles)){\r\n                self.currentPage = prevPageNum;\r\n                self.previousPage();\r\n                return false;\r\n            }\r\n            \r\n            changePage(prevPageNum);\r\n        }\r\n        self.allowPreviousDefaultAction(true);\r\n    }\r\n\r\n    this.canWeReturnToPage = function(pageIndex){\r\n        return !(courseData.getModuleData(self.pageArray[pageIndex].module).return === \"false\" || courseData.getPageData(self.pageArray[pageIndex].module, self.pageArray[pageIndex].page).return === \"false\");\r\n    }\r\n    \r\n    this.replayPage = function() {\r\n        changePage(self.currentPage,false);\r\n    }\r\n    \r\n    this.gotoModule = function(moduleIndex) {\r\n        self.changePageToData(moduleIndex, 0, 0);\r\n    }\r\n    \r\n    this.gotoPage = function(arg) {\r\n        changePage(arg);\r\n    }\r\n    \r\n    this.showMenu = function() {\r\n        changePage(self.menuPageIndex);\r\n    }\r\n    \r\n    this.pageComplete = function(){\r\n        courseData.updateMenu();\r\n                \r\n        storageController.checkCourseComplete();\r\n        \r\n        self.enableNextButton(true);\r\n        storageController.saveData();\r\n    }\r\n    \r\n    this.enableNextButton = function(arg){\r\n        //console.log('enableNextButton', self.currentPage, self.pageArray.length)\r\n        if (arg){\r\n            if (self.currentPage < self.getLastPageValidForRole() && self.currentPage != self.menuPageIndex){\r\n                $(navigationButton.NEXT_BUTTON).enable();\t\r\n                self.pulsateNextButton(arg);\r\n            } else {\r\n                $(navigationButton.NEXT_BUTTON).disable();\t    \r\n            }\r\n        } else {\r\n            $(navigationButton.NEXT_BUTTON).disable();\r\n        }\r\n    }\r\n    this.pulsateNextButton = function(arg){\r\n        if (arg){\r\n            $(navigationButton.NEXT_BUTTON).addClass('pulse');\t\r\n        } else {\r\n            $(navigationButton.NEXT_BUTTON).removeClass('pulse');\t\r\n        }\r\n    }\r\n    \r\n    this.allowPreviousDefaultAction = function(arg){\r\n        ALLOW_PREV_PAGE_CHANGE = arg;\r\n    }\r\n    \r\n    this.allowNextDefaultAction = function(arg){\r\n        ALLOW_NEXT_PAGE_CHANGE = arg;\r\n    }\r\n    \r\n    this.updateBookmark = function() {\r\n        \r\n    }\r\n    \r\n    this.getBookmark = function() {\r\n        \r\n    }\r\n    \r\n    this.updateData = function() {\r\n        \r\n    }\r\n    \r\n    this.getData = function() {\r\n        \r\n    }\r\n    \r\n    this.confirmExitCourse = function(messageRef, callback){\r\n        messageRef = messageRef || 'exit';\r\n        //console.trace('confirmExitCourse')\r\n        $.Alert({\r\n            title: courseData.getMessageText(messageRef,'title'),\r\n            message: courseData.getMessageText(messageRef,'message'),\r\n            confirm: courseData.getMessageText(messageRef,'confirm'),\r\n            cancel: courseData.getMessageText(messageRef,'cancel'),\r\n            onConfirm:function(){\r\n                if (callback){\r\n                    callback();\r\n                }\r\n                addTrackDataTrace('NavigationController::confirmExitCourse confirm - calling navigationController.exitCourse()');\r\n                userInitiatedWindowClose = true;\r\n                navigationController.exitCourse();\r\n            }\t\r\n        });\r\n    }\r\n    \r\n    this.exitCourse = function(){\r\n        addTrackDataTrace('NavigationController::exitCourse called');\r\n        if (courseConfig.launchInNewWindow){\r\n            window.top.close();\r\n        } else{\r\n            window.close(); // not working on Cornerstone\r\n            window.top.close();\r\n        }\r\n    }\r\n    \r\n    this.scrollIntoView = function($el, block, opts){\r\n\r\n        opts = opts || {};\r\n\r\n        console.log('NavigationController::scrollIntoView', $el);\r\n        \r\n        \r\n        // doesnt work well in IE - doesnt support smooth\r\n//        $el[0].scrollIntoView({behavior: \"smooth\", block: 'end'});\r\n        // works in IE\r\n//        $el[0].scrollIntoView(false);\r\n        //$el[0].scrollIntoView({block: 'end'});\r\n\r\n        // block: \"start\" | \"end\" | \"center\" | \"nearest\"\r\n        \r\n        block = block || 'end';\r\n        var scrollTop = block == 'end' ? undefined : $el;\r\n\r\n        opts.$el = $el;\r\n\r\n        if (block){            \r\n            var viewportTop = utils.getViewportTop(); //window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop;\r\n            var viewportBottom = viewportTop + $(window).height();\r\n            var elOffsetTop = utils.findElementTotalOffset($el[0]).top;\r\n            var elBottom = elOffsetTop+$el.outerHeight();//-self.getNavbarHeight()+$el.outerHeight()+30;\r\n            console.log('scrollIntoView', {elOffsetTop: elOffsetTop, elBottom:elBottom, window: $(window).height(), navbar: self.getNavbarHeight(), elHeight: $el.outerHeight()});\r\n            \r\n\r\n            // window.scrollTo({\r\n            //     behavior: 'smooth',\r\n            //     top:\r\n            //     $el[0].getBoundingClientRect().top -\r\n            //       document.body.getBoundingClientRect().top - $('#navbar').height(),\r\n            //   })\r\n\r\n\r\n            if (block == 'end'){\r\n                if (elBottom > viewportBottom){\r\n                    scrollTop = elBottom-$(window).height()+self.getNavbarHeight()+1;\r\n                }\r\n\r\n\r\n    //            if (scrollTop < viewportTop){\r\n    //                type = 'top';\r\n    //            }\r\n            }\r\n        }\r\n        //if (type == \"top\"){\r\n        //    scrollTop = elOffsetTop+10-$('#navbar').height();\r\n        //}\r\n        // console.log('scrollIntoView', type, viewportTop, viewportBottom, 'el', elOffsetTop, elBottom, scrollTop)\r\n\r\n\r\n        if (scrollTop){\r\n            console.log('scrollIntoView', scrollTop, block)\r\n            this.autoScroll(scrollTop, opts);\r\n            // this.autoScroll($el);\r\n        }\r\n    }\r\n    /*\r\n    function scrollToElement($el, type){\r\n        //if (!$el.visible()){\r\n            //console.log('scrollIntoView not in viewport')\r\n            // The element is not visible, do something else\r\n            if (type == undefined){\r\n               type = \"bottom\";\r\n            }\r\n            //console.log('scrollToElement', type, $el.attr('class'));\r\n            var scrollTop;\r\n            \r\n            var viewportTop = getViewportTop(); //window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop;\r\n            var viewportBottom = viewportTop + $(window).height();\r\n            var elOffsetTop = findElementTotalOffset($el[0]).top;\r\n                        \r\n            if (type == \"bottom\"){\r\n                scrollTop = elOffsetTop-$('.navbar-header').height()+$el.outerHeight()+30-($(window).height()-$('.navbar-header').height());\r\n                if (scrollTop < viewportTop){\r\n                    type = \"top\";\r\n                }\r\n            }\r\n            if (type == \"top\"){\r\n                scrollTop = elOffsetTop+10-$('.navbar-header').height();\r\n            }\r\n            //console.log(type, elOffsetTop, scrollTop);\r\n            \r\n            autoScroll(scrollTop, $el);\r\n//            $el.addClass('animating');\r\n//            $('html').addClass('autoScroll'); \r\n//            $('html, body').finish().animate({scrollTop:scrollTop}, 1000, function() { \r\n//                $('html').removeClass('autoScroll');\r\n//                //alert(\"Finished animating\");\r\n//                $el.removeClass('animating');\r\n//                templateMediator.checkPageRequiresScroll();\r\n//            });\r\n       // }\r\n    }*/\r\n    \r\n    \r\n    this.autoScroll = function(scrollTop, opts){\r\n        //var viewportTop = getViewportTop(); //window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop;\r\n        //console.log(viewportTop, scrollTop);\r\n        /*if ($el){\r\n            $el.addClass('autoScrollTo');\r\n        }\r\n        $('html, body').stop().animate({\r\n            scrollTop: scrollTop,\r\n            duration: 1000,\r\n            start:function(){\r\n                $('html').addClass('autoScroll'); \r\n            }, \r\n            complete: function() { \r\n                if ($el){\r\n                    $el.removeClass('autoScrollTo');\r\n                }\r\n                $('html').removeClass('autoScroll');\r\n                \r\n            }            \r\n        });*/\r\n        // let's replace with gsap ScrollTo plugin\r\n        var defaults = {\r\n            duration: 1,\r\n            y: scrollTop, //$el ? $el : scrollTop,\r\n            offsetY: 0, \r\n            autoKill: true,\r\n            ease: 'power2'\r\n        }\r\n        var options = $.extend(defaults, opts);\r\n        \r\n        var offsetY = self.getNavbarHeight();\r\n        if (navigationConfig.debug){\r\n            // console.log('debug', navigationConfig.debug, offsetY, $('.debug .debug-container').height());\r\n            offsetY += $('.debug .debug-container').outerHeight();\r\n        }\r\n        console.log('autoScroll', options);\r\n        gsap.to(window, {duration: options.duration, scrollTo: {\r\n            y: options.y, \r\n            offsetY: offsetY+options.offsetY,\r\n            autoKill: options.autoKill\r\n        }, ease: options.ease, onComplete: function(){\r\n            options.$el.focus();\r\n        }});\r\n    }\r\n\r\n    this.getNavbarHeight = function(){\r\n        var offsetY = $('#navbar').outerHeight();\r\n        if (navigationConfig.debug){\r\n            // console.log('debug', navigationConfig.debug, offsetY, $('.debug .debug-container').height());\r\n            offsetY += $('.debug .debug-container').outerHeight();\r\n        }\r\n        return offsetY;\r\n    }\r\n                            \r\n    this.checkForScroll = function(){\r\n        //console.log('checkForScroll', $(window).scrollTop() + $(window).height(), utils.getDocHeight());\r\n        var totalDocHeight = utils.getDocHeight()-parseInt($('.pageContainer').css('padding-bottom'))-50-20;\r\n        // if ($(window).scrollTop() + $(window).height() >= totalDocHeight) {\r\n        //     $('.fixedNavigation .scroll-arrow').fadeOut();\r\n        // } else {\r\n        //     $('.fixedNavigation .scroll-arrow').fadeIn();\r\n        // }\r\n        var componentCheck = contentController.checkFirstIncompleteComponentInView();\r\n        // console.log('checkForScroll', componentCheck);\r\n        if (componentCheck == 'below' || componentCheck == 'partbelow'){\r\n            $('.fixedNavigation .scroll-arrow').fadeIn();\r\n        } else {\r\n            $('.fixedNavigation .scroll-arrow').fadeOut();\r\n        }\r\n    }\r\n    \r\n    this.getModulePageIndex = function(module, page){\r\n        for (var i = 0; i < self.pageArray.length; i++ ){\r\n            if (self.pageArray[i].module == module && self.pageArray[i].page == page){\r\n                return i;                \r\n            }\r\n        }\r\n        return false;\r\n    }\r\n\r\n    this.updateCourseTitle = function(str){\r\n        var courseTitle = courseData.getCourseTitle();\r\n\r\n        // Replace <br> or <br/> with a space\r\n        courseTitle = courseTitle.replace(/<br\\s*\\/?>/g, ' ');\r\n        // Remove other HTML tags\r\n        courseTitle = courseTitle.replace(/<[^>]*>/g, '');\r\n\r\n        if (str){\r\n            document.title = str + ' | ' + courseTitle;\r\n        } else {\r\n            document.title = courseTitle;\r\n        }\r\n    }\r\n    \r\n    // Lastly, call init so we're ready to go as soon as the controller is created\r\n    init();\r\n}","var NavigationEvents = function(opts) {\r\n    var self = this;\r\n\r\n    this.init = init;\r\n    \r\n    var keys = [];\r\n    var islogPop = false;\r\n    \r\n    // init();\r\n    \r\n    function init(){\r\n        $(navigationButton.DEBUG_NEXT_BUTTON).on(\"click\", onDebugNextClick);\t\r\n        $(navigationButton.DEBUG_BACK_BUTTON).on(\"click\", onDebugBackClick);\t\r\n        \r\n        $(navigationButton.NEXT_BUTTON).on(\"click\", onNextClick);\t\r\n        $(navigationButton.REPLAY_BUTTON).on(\"click\", onReplayClick);\t\r\n        $(navigationButton.BACK_BUTTON).on(\"click\", onBackClick);\t\r\n        \r\n        $(navigationButton.EXIT_BUTTON).on(\"click\", onExitClick);\r\n\r\n        $(navigationButton.AUDIO_BUTTON).on(\"click\", onAudioClick);\r\n        \r\n        //register key handeling:\r\n\t\t$(document).keydown(function(e){\r\n            // console.log(e.keyCode);\r\n            keys[e.keyCode] = true;\r\n\t\t\tonkeyDown();\r\n        });\r\n        $(document).keyup(function(e){\r\n            keys[e.keyCode] = false;\r\n        });\r\n        \r\n        $(window).on('blur', function() {\r\n            // This is a fix to the bug where after opening the communcation log and closing it, any key pressed would trigger the log to open again.\r\n            keys = keys.map(value => {\r\n                if(value === true || value === false){\r\n                    return false;\r\n                } else {\r\n                    return value;\r\n                }\r\n            });\r\n        });\r\n    }\r\n    \r\n    function onDebugNextClick(){\r\n        if ($(this).hasClass(navigationButton.DISABLED)){\r\n            return false;\r\n        }\r\n        \r\n        navigationController.debugNextPage();\r\n    }\r\n    \r\n    function onDebugBackClick(){\r\n        if ($(this).hasClass(navigationButton.DISABLED)){\r\n            return false;\r\n        }\r\n        \r\n        navigationController.debugPreviousPage();\r\n    }\r\n    \r\n    function onMenuClick(){\r\n        if ($(this).hasClass(navigationButton.DISABLED)){\r\n            return false;\r\n        }\r\n        \r\n        navigationController.showMenu();\r\n    }\r\n    \r\n    function onNextClick(){\r\n        if ($(this).hasClass(navigationButton.DISABLED)){\r\n            return false;\r\n        }\r\n        \r\n        navigationController.nextPage();\r\n    }\r\n    \r\n    function onReplayClick(){\r\n        if ($(this).hasClass(navigationButton.DISABLED)){\r\n            return false;\r\n        }\r\n        \r\n        navigationController.replayPage();\r\n    }\r\n    \r\n    function onBackClick(){\r\n        if ($(this).hasClass(navigationButton.DISABLED)){\r\n            return false;\r\n        }\r\n        \r\n        navigationController.previousPage();\r\n    }\r\n    \r\n    function onAudioClick(){\r\n        if ($(this).hasClass(navigationButton.DISABLED)){\r\n            return false;\r\n        }\r\n        //console.log('onAudioClick');\r\n        audioController.muteAudio();\r\n\r\n        var btnText;\r\n        var $audioTooltip = $(navigationButton.AUDIO_BUTTON).closest('[data-toggle=\"tooltip\"]');\r\n        if(audioController.isMuted){\r\n            $(this).addClass('muted');\r\n            uiController.audioIconSVGTimeline.play();\r\n            btnText = courseData.getBtnText('AudioOff');\r\n            $(document).trigger(courseEvent.AUDIO_OFF);\r\n        } else{\r\n            $(this).removeClass('muted');\r\n            uiController.audioIconSVGTimeline.reverse();\r\n            btnText = courseData.getBtnText('AudioOn');\r\n            $(document).trigger(courseEvent.AUDIO_ON);\r\n        }\r\n        $(navigationButton.AUDIO_BUTTON+' .btn_text').html(btnText);\r\n        // update the tooltip text\r\n        $audioTooltip.attr('title', btnText); \r\n        $audioTooltip.attr('data-original-title', btnText);\r\n        $audioTooltip.tooltip('show');\r\n    }\r\n\r\n    function onExitClick(){\r\n        if ($(this).hasClass(navigationButton.DISABLED)){\r\n            return false;\r\n        }\r\n        \r\n        navigationController.confirmExitCourse();\r\n    }\r\n    \r\n    function onkeyDown(){\r\n        // console.log(keys[17], keys[16], keys[67]);\r\n        // 16 = SHIFT & 73 = I\r\n        // 17 = CTRL & 16 = SHIFT & 67 = C\r\n\t \tif (courseConfig.lmsLogEnabled && keys[17] && keys[16] && keys[67] && !islogPop){\r\n//\t\t\tkeys[16]=false;\r\n//\t\t\tkeys[73]=false;\r\n\t\t\tloadCommunicationWin();\t\r\n            return false;\r\n\t\t}\r\n    }\r\n}","function Slide(){\r\n    var self = this;\r\n    var $pageContainer = $('.pageContainer');\r\n    this.currentPage;\r\n    this.slideNum;\r\n    this.slideID;\r\n    this.navXMLData;\r\n    this.langXMLData;\r\n    this.data;\r\n    this.$slide;\r\n    this.templateObject;\r\n    this.xmlFilename;\r\n    this.saveData;\r\n    this.preloadImagesArray = [];\r\n    \r\n    this.componentController;\r\n    \r\n    this.loaded = false;\r\n    this.complete = false;\r\n    this.viewed = false;\r\n    this.templateComplete = false;\r\n    this.componentsComplete = false;\r\n    this.slideCompletionDelay = navigationConfig.slideCompletionDelay*1000;\r\n    this.slideCompletionDelayPassed = (this.slideCompletionDelay > 0) ? false : true;\r\n    \r\n    this.fullheight = false;\r\n    \r\n    this.hidden = true;\r\n    this.mandatory = false;\r\n    this.shownByComponent = false;\r\n    this.hiddenForCurrentRole = true;\r\n    this.hiddenForCurrentLanguage = true;\r\n    \r\n    this.init = init;\r\n    this.preloadImage = preloadImage;\r\n    this.slideReady = slideReady;\r\n    this.slideLoaded = slideLoaded;\r\n//    this.slideElementsAnimInComplete = slideElementsAnimInComplete;\r\n    this.slideComponentsComplete = slideComponentsComplete;\r\n    this.slideContentComplete = slideContentComplete;\r\n    this.checkComplete = checkComplete;\r\n    this.showContent = showContent;\r\n    this.hideContent = hideContent;\r\n    this.showElementContents = showElementContents;\r\n    this.hideElementContents = hideElementContents;\r\n    this.generateComponents = generateComponents;\r\n    this.getSaveData = getSaveData;\r\n    this.setSaveData = setSaveData;\r\n    this.unloadContent = unloadContent;\r\n    this.resizeContent = resizeContent;\r\n    this.breakpointChanged = breakpointChanged;\r\n    this.resumeContent = resumeContent;\r\n    this.isHiddenForUser = isHiddenForUser;\r\n\tthis.isLastSlide = isLastSlide;\r\n    \r\n    function init(_slideNum){\r\n        self.slideNum = _slideNum;\r\n        self.slideID = 'm'+navigationController.moduleIndex+'p'+navigationController.pageIndex+'s'+self.slideNum;\r\n        //console.log('Slide::init', _slideNum);\r\n        \r\n        self.currentPage = navigationController.currentPage;\r\n        self.pageData = navigationController.pageArray[self.currentPage];\r\n        self.slideData = navigationController.pageArray[self.currentPage].slides[self.slideNum];\r\n        self.id = navigationController.pageArray[self.currentPage].slides[self.slideNum].id;\r\n                \r\n//        console.log('Slide::init slideData', self.slideData);\r\n        //self.navXMLData = xmlData.navXML.module[navigationController.moduleIndex].page[navigationController.pageIndex].slide[self.slideNum];\r\n        //self.langXMLData = xmlData.langXML.module[navigationController.moduleIndex].page[navigationController.pageIndex].slide[self.slideNum];\r\n        self.navXMLData = courseData.getSlideData(navigationController.moduleIndex, navigationController.pageIndex, self.slideNum); \r\n        self.langXMLData = courseData.getSlideLangData(navigationController.moduleIndex, navigationController.pageIndex, self.slideNum); \r\n        self.template = navigationController.pageArray[self.currentPage].slides[self.slideNum].template;//self.navXMLData.template;\r\n        //console.log('self.xmlFilename', self.xmlFilename);\r\n        self.title = ''\r\n        if (self.langXMLData.title) {\r\n            self.title = (self.langXMLData.title[0].Text) ? self.langXMLData.title[0].Text : self.title;\r\n        } \r\n        \r\n//        console.log('Slide::init langXMLData', self.langXMLData.test[0].Text)\r\n        if (navigationConfig.debug){\r\n            debugController.update();\r\n        }\r\n        \r\n        //self.hidden = (self.navXMLData.hide == \"1\") ? true : false;\r\n        if (!navigationConfig.pageLock){\r\n            self.mandatory = (self.navXMLData.mandatory == \"true\") ? true : false;\r\n        } else {\r\n            self.mandatory = (self.navXMLData.mandatory == \"false\") ? false : true;\r\n\r\n        }\r\n        // is this slide shown by component? If so dont auto show.\r\n        self.shownByComponent = (self.navXMLData.shownByComponent == \"true\") ? true : false;\r\n        if (!navigationConfig.pageLock){\r\n            self.shownByComponent = false;\r\n        }\r\n        \r\n        // console.log('Slide::init template', self.template);\r\n        // self.templateObject = eval(\"new \"+self.template+\"()\");\t\r\n        self.templateObject = new AvailableClasses.templates[self.template];\r\n        \r\n        // if loading css\r\n        //self.$slide = $('<div id=\"slide'+self.slideNum+'\" class=\"slide\"><div id=\"cssContainer'+self.slideNum+'\" class=\"cssContainer\"></div><div class=\"template '+self.template+'\"></div></div>');\r\n        \r\n        var classStr = '';\r\n//        if (self.langXMLData.fullheight){\r\n//            self.fullheight = true;\r\n//            classStr += ' fullheight';\r\n//        }\r\n//        if (self.langXMLData.fullheight){\r\n//            classStr += ' fullheight';\r\n//        }\r\n        \r\n        if (self.langXMLData.class){\r\n            classStr += ' '+self.langXMLData.class;\r\n        }\r\n        \r\n        self.langXMLData.nodeName = 'slide';\r\n        var htmlStr = '<div id=\"slide'+self.slideNum+'\" class=\"slide scrollStop '+htmlUtils.getClasses(self.langXMLData)+'\" data-slide=\"'+self.slideNum+'\" '+htmlUtils.getAttributes(self.langXMLData)+' role=\"region\" tabindex=\"-1\" aria-label=\"\">';\r\n            htmlStr += '<div class=\"template '+self.template+'\">';\r\n                htmlStr += '<div class=\"content-bkg\"></div>';\r\n                htmlStr += '<div class=\"content-wrap\">';\r\n                htmlStr += '</div>';\r\n            htmlStr += '</div>';\r\n        htmlStr += '</div>';\r\n        \r\n        self.$slide = $(htmlStr);\r\n        $pageContainer.append(self.$slide);\r\n        \r\n        loadSlide();\r\n    }\r\n    \r\n    function loadSlide(){\r\n\r\n        $(document).trigger(courseEvent.SLIDE_LOAD_START, [self]);\r\n        \r\n        utils.testConnection();\r\n        //console.log('Slide::loadSlide', navigationController.moduleIndex, navigationController.pageIndex, self.slideNum); \r\n        //console.log('Slide::loadSlide', self.pageData.module, self.pageData.page, self.slideNum); \r\n        self.data = courseData.getSlideLangData(navigationController.moduleIndex, navigationController.pageIndex, self.slideNum); \r\n        //console.log('Slide::loadSlide', self.data.test[0].Text)\r\n        loadTemplateHTML();\r\n    }\r\n    \r\n    function loadTemplateXML(){\r\n        //console.log(xmlData.langPath+self.navXMLData.xmlPath)\r\n        \r\n        // load XML data\r\n        utils.loadXMLData(langPath+'xml/'+self.navXMLData.xmlPath, function(_xml){\r\n            self.data = _xml;\r\n            \r\n            //console.log('1 loadSlide', _xml);\r\n            //console.log('2 loadSlide', courseData.getSlideLangData(navigationController.moduleIndex, navigationController.pageIndex, self.slideNum));\r\n            //var classStr = self.xmlData.\r\n            self.$slide.find('.template').addClass('slide'+self.xmlFilename);\r\n            \r\n            loadTemplateHTML();\r\n        });\r\n    }\r\n    \r\n    function loadTemplateHTML(){\r\n        if (self.template == 'CUSTOM'){\r\n            self.$slide.find('.template .content-wrap').html('<div class=\"content-wrap-inner\"></div>');\r\n            self.templateObject.init(self);\r\n        } else {\r\n            // load any HTML templates\r\n            self.$slide.find('.template .content-wrap').load(utils.getURL('content/templates/html/'+self.template+'.html'), function(response, status, xhr) {\r\n                //console.log('ContentController::loadTemplateHTML', status);\r\n                if (status == \"success\") {\t\r\n\r\n                    // if loading css\r\n                    //loadTemplateCSS();\r\n                    self.templateObject.init(self);\r\n                }\r\n            });\r\n        }\r\n    }\r\n    \r\n//    function loadTemplateCSS(){\r\n//        window.loadFile(['content/templates/css/'+self.template+'.css'], 'slidecss', 'cssContainer'+self.slideNum, function () {\r\n//            self.templateObject.init(self);\r\n//\t\t});\t        \r\n//    }\r\n    \r\n    function preloadImage(src){\r\n        src = utils.getImagePath(src);\r\n        if (self.preloadImagesArray.indexOf(src) == -1){\r\n            self.preloadImagesArray.push(src);\r\n        }\r\n    }\r\n    \r\n    function slideReady(){\r\n        // console.log('Slide::slideReady', self.slideNum);\r\n        \r\n        // slide background image\r\n        var $bkgContainer = self.$slide.find('.template .content-bkg');\r\n        $bkgContainer.addClass('no-bkg');\r\n\r\n        if (self.data.contentBackground){\r\n            self.setSlideBackground(self.data.contentBackground[0]);\r\n        }\r\n\r\n        if (self.componentController){\r\n            self.componentController.setupComponents();\r\n        }\r\n\r\n        // find any background images applied in CSS or any images\r\n        self.$slide.find('*').each(function(){\r\n            var bkgImage = $(this).css('background-image').replace('url(','').replace(')','').replace(/\\\"/gi, \"\");;\r\n            // check if any <img> tags have a src attribute\r\n            var imageSrc = (this.nodeName == 'IMG') ? $(this).attr('src') : undefined;\r\n            if (bkgImage != 'none'){\r\n                // make sure we dont have a gradient in the background-image \r\n                if (bkgImage.indexOf('gradient(') == -1) {\r\n                    preloadImage(bkgImage);\r\n                }\r\n            } else if (imageSrc){\r\n                // console.log('SRC:', this.nodeName, imageSrc);\r\n                // preload any image src\r\n                preloadImage(imageSrc);\r\n            }\r\n        });\r\n\r\n        // if not set, update slide aria-label to the highest heading level\r\n        // console.log('heading aria', self.$slide.attr('aria-label'))\r\n        var ariaLabel = self.title;\r\n        if (ariaLabel == ''){\r\n            var $heading = self.$slide.find(':header').first();\r\n            ariaLabel = $heading.text();\r\n        }\r\n        if (ariaLabel != ''){\r\n            // we have a title, so create the aria-label\r\n            ariaLabel = courseData.getAccessibleLabel('articleTitleContent').split('{title}').join(ariaLabel);\r\n        } else {\r\n            ariaLabel = courseData.getAccessibleLabel('articleContent');\r\n        }\r\n\r\n        self.$slide.attr('aria-label', ariaLabel);\r\n        // || courseData.getAccessibleLabel('articleContent')\r\n        \r\n        \r\n        self.$slide.append('<span class=\"slideMetaID\">SLIDE ID: '+self.slideID+'</span>')\r\n        \r\n//        if (self.preloadImagesArray.length > 0){\r\n//            $.imgpreload(self.preloadImagesArray, {\r\n////                each: function(){\r\n////                    console.log('Slide::image preloaded', $(this).data('loaded'));\r\n////                },\r\n//                all: function(){\r\n////                    //console.log('Slide::images preloaded');\r\n//                    slideLoaded();\r\n//                }\r\n//            });\r\n//        } else {\r\n//            slideLoaded();\r\n//        }\r\n        //console.log('IMAGES - self.preloadImagesArray.length ', self.preloadImagesArray.length )\r\n        if (self.preloadImagesArray.length > 0){\r\n            if (courseConfig.imagePreload == false){\r\n                slideLoaded();\r\n            }\r\n            $.imgpreload(self.preloadImagesArray, {\r\n                each: function(){\r\n                    //console.log('Slide::image preloaded', $(this).data('loaded'));\r\n                },\r\n                all: function(){\r\n//                    //console.log('Slide::images preloaded');\r\n\r\n                    if (courseConfig.imagePreload){\r\n                        slideLoaded();\r\n                    }\r\n                }\r\n            });\r\n        } else {\r\n            slideLoaded();\r\n        }\r\n    }\r\n    \r\n    function slideLoaded(){\r\n        //console.log('SLIDE::slideLoaded', self.currentPage, self.slideNum);\r\n        self.loaded = true;\r\n        \r\n        $(document).trigger(courseEvent.SLIDE_LOAD_COMPLETE, [self]);\r\n    }\r\n    \r\n//    function slideElementsAnimInComplete(){\r\n//        // timer to allow minimum time before slide completes\r\n//        setTimeout(function(){\r\n//            self.slideCompletionDelayPassed = true;\r\n//            self.checkComplete();\r\n//        }, self.slideCompletionDelay);\r\n//    }\r\n    \r\n    function slideComponentsComplete(){\r\n        // console.log('slideComponentsComplete', self.slideNum)\r\n        self.componentsComplete = true;\r\n        self.checkComplete();\r\n    }\r\n    \r\n    function slideContentComplete(){\r\n        self.templateComplete = true;\r\n        self.checkComplete();\r\n    }\r\n    \r\n    function checkComplete(){\r\n        //console.log('Slide:checkComplete', self.slideNum, self.templateComplete, self.componentsComplete, self.slideCompletionDelayPassed);\r\n        \r\n        if (!self.complete){\r\n            // console.log('Slide:checkComplete', self.slideNum, self.templateComplete, self.componentsComplete, self.slideCompletionDelayPassed);\r\n            var isComplete = false;\r\n            \r\n            if (self.navXMLData.reentryComplete == 'false'){\r\n                // this slide is not complete on users reentering so don't set isComplete - user must complete slide\r\n            } else if (storageController.isSlideComplete(self.currentPage, self.slideNum) || self.navXMLData.complete == \"true\" || (self.viewed && self.navXMLData.complete == \"view\")){\r\n                // console.log('Slide:checkComplete - setting complete');\r\n                isComplete = true;\r\n                // force no delay\r\n                self.slideCompletionDelayPassed = true;\r\n            }\r\n            \r\n            if (isComplete || (self.templateComplete && self.componentsComplete)){\r\n                if(self.slideCompletionDelayPassed){\r\n        //            console.log('SLIDE::checkComplete', self.currentPage, self.slideNum);\r\n                    self.complete = true;\r\n                    self.$slide.addClass('complete');\r\n\r\n                    if (courseConfig.googleAnalytics.enabled){\r\n                        gtag('event', 'Complete', {\r\n                          'event_category' : 'Slide',\r\n                          'event_label' : self.slideID//navigationController.moduleIndex+' '+navigationController.pageIndex+' '+self.slideNum\r\n                        });\r\n                    }\r\n\r\n                    storageController.setSlideComplete(self.currentPage, self.slideNum);\r\n\r\n                    if (self.componentController){                        \r\n                        // let's change any instruction to last available\r\n\t                    self.componentController.changeInstruction(99, false);\r\n                    }\r\n\r\n                    //storageController.saveData();\r\n                    \r\n                    navigationController.currentSlide = self.slideNum;\r\n                    $(document).trigger(courseEvent.SLIDE_COMPLETE);\r\n                } else {\r\n                    setTimeout(function(){\r\n                        self.slideCompletionDelayPassed = true;\r\n                        self.checkComplete();\r\n                    }, self.slideCompletionDelay);                \r\n                }\r\n            }\r\n        }\r\n    }\r\n    \r\n    function showContent(){\r\n        //console.log('Slide::showContent()', self.slideNum)\r\n        self.hidden = false;\r\n        self.$slide.fadeIn();\r\n        \r\n        if (self.componentController){\r\n            self.componentController.displayComponents();\r\n        }\r\n        \r\n        //titleController.change(self.langXMLData.Text);\r\n        if (self.data.instructionText){\r\n            instructionController.change(self.data.instructionText[0].text[0].Text);\r\n        }\r\n        \r\n        storageController.setSlideVisited(self.currentPage, self.slideNum);\r\n        \r\n        // Google analytics - track slide view\r\n        // self.$slide.on('inview_anim_complete', slideInviewAnimComplete);\r\n        // WARN - elements no longer bubble 'inview_anim_complete' event, so set viewed manually\r\n        self.viewed = true;\r\n        \r\n//        var $anims = self.$slide.find('.anim').last().on('inview_anim_complete', function(){\r\n//            setTimeout(function(){\r\n//                self.slideCompletionDelayPassed = true;\r\n//                self.checkComplete();\r\n//            }, self.slideCompletionDelay);\r\n//        });\r\n        \r\n        //if (storageController.isSlideComplete(self.currentPage, self.slideNum) || self.navXMLData.complete == \"true\"){\r\n            //console.log('Slide:slide is complete')\r\n            //self.complete = true;\r\n            checkComplete();\r\n        //}\r\n        \r\n        self.templateObject.slideDisplayed();\r\n            \r\n        $(document).trigger(courseEvent.SLIDE_SHOW_CONTENT);\r\n    }\r\n    \r\n    function hideContent(){\r\n        self.$slide.slideUp(function(){\r\n            self.hidden = true;\r\n            $(document).trigger(courseEvent.SLIDE_HIDE_CONTENT);\r\n        });\r\n    }\r\n    \r\n    function slideInviewAnimComplete(){\r\n        self.$slide.off('inview_anim_complete', slideInviewAnimComplete);\r\n        self.viewed = true;\r\n        \r\n            //self.complete = true;\r\n        checkComplete();\r\n//        gtag('event', 'screen_view', {\r\n//          'app_name': courseData.getCourseTitle(),\r\n//          'screen_name' : navigationController.moduleIndex+' '+navigationController.pageIndex+' '+self.slideNum\r\n//        });\r\n        if (courseConfig.googleAnalytics.enabled){\r\n            gtag('event', 'Viewed', {\r\n              'event_category' : 'Slide',\r\n              'event_label' : self.slideID //navigationController.moduleIndex+' '+navigationController.pageIndex+' '+self.slideNum\r\n            });\r\n        }\r\n    }\r\n    \r\n    function showElementContents($el){\r\n        // show an element and find any components within\r\n        //console.log('Slide:showElementContents', $el.find('.component:visible'));\r\n        \r\n        if (self.componentController){\r\n            self.componentController.revealComponents($el.find('.component:visible'));\r\n        }\r\n    }\r\n    \r\n    function hideElementContents($el){\r\n        // show an element and find any components within\r\n        //console.log.log('Slide:hideElementContents', $el.find('.component:visible'));\r\n        \r\n        if (self.componentController){\r\n            //self.componentController.hideComponents($el.find('.component:visible'));\r\n        }\r\n    }\r\n    \r\n    function generateComponents(node){\r\n        //console.log.log('Slide::generateComponents()', self.slideNum)\r\n        // load component controller\r\n        if (!self.componentController){            \r\n            self.componentController = new ComponentController();\r\n            self.componentController.init(self);\r\n        }\r\n        return self.componentController.generateComponents(node.components[0]);\r\n    }\r\n    \r\n    function getSaveData(){\r\n        return storageController.getSlideData(self.currentPage, self.slideNum);\r\n    }\r\n    \r\n    function setSaveData(data){\r\n        //console.log.log('Slide:setSaveData', data, self.currentPage, self.slideNum)\r\n        storageController.setSlideData(self.currentPage, self.slideNum, data);\r\n        storageController.saveData();\r\n    }    \r\n    \r\n    function unloadContent(){\r\n        if (self.componentController){\r\n            self.componentController.unloadContent();\r\n        }\r\n        \r\n        if (self.templateObject.unloadContent){\r\n            self.templateObject.unloadContent();\r\n        }\r\n    }\r\n    function resizeContent(){        \r\n        //self.$slide.css('min-height')\r\n        \r\n        self.$slide.find('.templateBackgroundFixed').height(self.$slide.find('.template').height());\r\n        \r\n        if (self.componentController){\r\n            self.componentController.resizeContent();\r\n        }\r\n        \r\n        if (self.templateObject.updateLayout){\r\n            self.templateObject.updateLayout();\r\n        }\r\n    }\r\n\r\n    function breakpointChanged(){\r\n        if (self.componentController){\r\n            self.componentController.breakpointChanged();\r\n        }\r\n        if (self.templateObject.breakpointChanged){\r\n            self.templateObject.breakpointChanged();\r\n        }\r\n    }\r\n\r\n    function resumeContent(){        \r\n        if (self.componentController){\r\n            self.componentController.resumeContent();\r\n        }\r\n    }\r\n    \r\n    function isHiddenForUser(){\r\n        return (this.hiddenForCurrentRole || this.hiddenForCurrentLanguage);\r\n    }\r\n\r\n    function isLastSlide(){\r\n        return (contentController.lastSlideNum == self.slideNum); \r\n    }\r\n    \r\n    this.setSlideBackground = function(xmlRef){\r\n        var remainingBreakpoints = Object.keys(responsiveUtils.getBreakpoints());\r\n\r\n        if (xmlRef.img){\r\n            if (xmlRef.img.length){\r\n                for (var i = 0; i < xmlRef.img.length; i++){\r\n                    var breakpoints = xmlRef.img[i].breakpoints ? xmlRef.img[i].breakpoints.toLowerCase().split(',') :  Object.keys(responsiveUtils.getBreakpoints());\r\n                    self.addSlideDeviceBackground(xmlRef.img[i], breakpoints);\r\n                    remainingBreakpoints = _.difference(remainingBreakpoints, breakpoints);\r\n                }\r\n            }\r\n        } \r\n        // console.log('Slide::setSlideBackground remainingBreakpoints', remainingBreakpoints);\r\n\r\n        var $bkgContainer = self.$slide.find('.template .content-bkg');\r\n        for (var i = 0; i < remainingBreakpoints.length; i++){\r\n            $bkgContainer.addClass('no-bkg-'+remainingBreakpoints[i]);\r\n        }\r\n    }\r\n\r\n    this.addSlideDeviceBackground = function(imgXMLRef, breakpoints){\r\n        // console.log('Slide::content-bkg', 'addSlideDeviceBackground');\r\n        \r\n\r\n        var $bkgContainer = self.$slide.find('.template .content-bkg');\r\n\r\n        var classArr = [];\r\n        for (var i = 0; i < breakpoints.length; i++){\r\n            classArr.push('visible-'+breakpoints[i]);\r\n        }\r\n\r\n        var $bkgElement = $('<div class=\"'+classArr.join(' ')+'\"></div>')\r\n        $bkgContainer.append($bkgElement);\r\n        \r\n        var imgPath = imgXMLRef.path;\r\n        //console.log('Slide::addSlideDeviceBackground imgPath', imgPath)\r\n        if (imgPath){\r\n            var cssObj = {'backgroundImage': 'url('+utils.getImagePath(imgPath)+')'};\r\n            var bgPosition = imgXMLRef.position;\r\n            var bgSize = imgXMLRef.size;\r\n            var fixed = imgXMLRef.fixed;\r\n            if (bgPosition){\r\n                cssObj.backgroundPosition = bgPosition;\r\n            }\r\n            if (bgSize){\r\n                cssObj.backgroundSize = bgSize;\r\n            }\r\n            if (fixed == 'true'){\r\n                $bkgElement.addClass('backgroundFixed');\r\n            }\r\n    //                if (fixed == 'true'){\r\n    //                    //cssObj.backgroundAttachment = 'fixed';\r\n    //                    var $templateBackground = $('<div class=\"templateBackgroundFixed\"></div>');\r\n    //                    $templateBackground.css(cssObj);\r\n    //                    self.$slide.find('.template').prepend($templateBackground);\r\n    //                } else {\r\n    //                }\r\n            $bkgElement.css(cssObj);\r\n            // console.log(cssObj)\r\n\r\n            $bkgContainer.removeClass('no-bkg');\r\n\r\n        }\r\n    }\r\n}","var StorageController = function(opts) {\r\n    var self = this;\r\n\r\n    this.getScormTime = getScormTime;\r\n    \r\n    var scormController;\r\n    this.storageAPI;\r\n    \r\n    var lmsConnected = false;\r\n    var lmsDataToSave = false;\r\n\r\n    var inExitProcess = false;\r\n    \r\n    var unloaded = false;\r\n    \r\n    var STANDALONE      = 1;\r\n    var SCORM_1_2       = 2;\r\n    var SCORM_2004      = 3;\r\n    var XAPI            = 4; // Tincan / xAPI - NOT IMPLEMENTED\r\n    var LOCALSTORAGE    = 5; // use browsr local storage\r\n    \r\n    \r\n\tthis.SESSION_TIME       = \"cmi.core.session_time\";\r\n    this.LESSON_LOCATION    = \"cmi.core.lesson_location\";\r\n    this.LESSON_STATUS      = \"cmi.core.lesson_status\";\r\n    this.SUCCESS_STATUS     = \"\";\r\n    this.SUSPEND_DATA       = \"cmi.suspend_data\";\r\n    this.STUDENT_ID         = \"cmi.core.student_id\";\r\n    this.STUDENT_NAME       = \"cmi.core.student_name\";\r\n    this.STUDENT_LANG       = \"cmi.student_preference.language\";\r\n    this.STUDENT_AUDIO      = \"cmi.student_preference.audio\";\r\n    this.SCORE              = \"cmi.core.score.raw\";\r\n    this.SCORE_MAX          = \"cmi.core.score.max\";\r\n    this.SCORE_MIN          = \"cmi.core.score.min\";\r\n    this.SCORE_SCALED       = \"cmi.score.scaled\";\r\n    \r\n    var initalTime;\r\n\r\n    var saveTimeout = null,\r\n        suspendDataTimeout = null;\r\n\r\n    this.dataObj = {\r\n        completion: '',\r\n        version: '',\r\n        language: '',\r\n        audio: 1,\r\n        // captions: false,\r\n        captions: null,\r\n        roles: [],\r\n        bookmark: [],\r\n        position: {},\r\n        history: [],\r\n        slideProgress: [],\r\n        slideData: [],\r\n        menu: {\r\n            active: [],\r\n            mandatory: [],\r\n            locked: []\r\n        },\r\n        assessment: {},\r\n        cmi:{\r\n            i:{}, // cmi.interaction IDs\r\n            o:{} // cmi.objective IDs\r\n        },\r\n        custom:{},\r\n        system:{},\r\n        exit:[]\r\n    }\r\n\r\n    var commitObj = {};\r\n    \r\n    this.studentID = '';\r\n    this.studentName = '';\r\n    this.score = 0;\r\n\r\n    this.isLastSlideComplete = false;\r\n    \r\n    function init(){\r\n        console.log('StorageController::init', courseConfig.storage.complianceType)\r\n\r\n        initalTime = new Date();\r\n\r\n        switch (courseConfig.storage.complianceType){\r\n            case SCORM_1_2: \r\n            case SCORM_2004:\r\n                try{ \r\n                    if(courseConfig.storage.complianceType == SCORM_1_2){\r\n                        pipwerks.SCORM.version = \"1.2\";\r\n                    }else{\r\n                        pipwerks.SCORM.version = \"2004\";\r\n                    }\t\t\r\n\r\n                }catch(err){}\r\n                \r\n                self.storageAPI = pipwerks.SCORM;\r\n                                \r\n                break;\r\n            case XAPI: \r\n                break;\r\n        }\r\n        \r\n        if (courseConfig.storage.complianceType == SCORM_2004 || courseConfig.storage.complianceType == LOCALSTORAGE){\r\n\t\t\tself.SESSION_TIME        = \"cmi.session_time\";\r\n            self.LESSON_LOCATION     = \"cmi.location\";\r\n\t\t\tself.LESSON_STATUS       = \"cmi.completion_status\";\r\n\t\t\tself.SUCCESS_STATUS      = \"cmi.success_status\";\r\n\t\t\tself.SUSPEND_DATA        = \"cmi.suspend_data\";\r\n            self.STUDENT_ID          = \"cmi.learner_id\";\r\n\t\t\tself.STUDENT_NAME        = \"cmi.learner_name\";\r\n\t\t\tself.STUDENT_LANG        = \"cmi.learner_preference.language\";\r\n\t\t\tself.STUDENT_AUDIO       = \"cmi.learner_preference.audio_level\";\r\n\t\t\tself.SCORE               = \"cmi.score.raw\";\r\n\t\t\tself.SCORE_MAX           = \"cmi.score.max\";\r\n\t\t\tself.SCORE_MIN           = \"cmi.score.min\";\r\n    \t\tself.PROGRESS_MEASURE    = \"cmi.progress_measure\";\r\n        }\r\n        \r\n        if (courseConfig.storage.complianceType == STANDALONE) {\r\n\t\t\tlmsConnected = false;\r\n        } else {\r\n            if (courseConfig.storage.complianceType != LOCALSTORAGE){\r\n                lmsConnected = self.storageAPI.init();\r\n            \r\n\t\t    } \r\n            \r\n            self.studentID = self.getStudentID();\r\n            self.studentName = self.getStudentName();\r\n            self.score = self.getScore();\r\n            self.completionStatus = self.getComplete();\r\n            self.successStatus = self.getSuccess();\r\n            if (self.completionStatus != 'complete' && courseConfig.storage.complianceType == SCORM_2004){\r\n                //self.setSuccess('unknown');\r\n            }\r\n            \r\n            // TEST Interactions\r\n            //console.log('Interaction', self.getInteraction());\r\n            \r\n            window.onbeforeunload = unloadHandler;\r\n            window.onunload = unloadHandler;\r\n\t\t}\r\n        \r\n        console.log('StorageController::init lmsConnected', lmsConnected);\r\n        \r\n    }\r\n    \r\n    this.setLanguage = function (lang){\r\n        self.dataObj.language = lang;\r\n        switch (courseConfig.storage.complianceType){\r\n            case SCORM_1_2: \r\n            case SCORM_2004:\r\n            case LOCALSTORAGE:\r\n                setToStorageAPI(self.STUDENT_LANG, String(lang));\r\n                break;\r\n        }\r\n    }\r\n    \r\n    this.getLanguage = function (){\r\n        var lang = '';\r\n        //console.log('StorageController::getLanguage ', lang);\r\n        switch (courseConfig.storage.complianceType){\r\n            case SCORM_1_2: \r\n            case SCORM_2004:\r\n            case LOCALSTORAGE:\r\n                lang = getFromStorageAPI(self.STUDENT_LANG);\r\n                    //lang = (lang === \"\") ? languageConfig.defaultLanguage : lang;  \r\n                \r\n                break;\r\n        }\r\n        return lang;\r\n    }\r\n\r\n    this.setAudio = function (audioLevel){\r\n        self.dataObj.audio = audioLevel;\r\n        switch (courseConfig.storage.complianceType){\r\n            case SCORM_1_2: \r\n            case SCORM_2004:\r\n            case LOCALSTORAGE:\r\n                setToStorageAPI(self.STUDENT_AUDIO, String(audioLevel));\r\n                break;\r\n        }\r\n    }\r\n    \r\n    this.getAudio = function (){\r\n        var audioLevel = 1;\r\n        //console.log('StorageController::getAudio ', audioLevel);\r\n        switch (courseConfig.storage.complianceType){\r\n            case SCORM_1_2: \r\n            case SCORM_2004:\r\n            case LOCALSTORAGE:\r\n                audioLevel = getFromStorageAPI(self.STUDENT_AUDIO);\r\n                audioLevel = (audioLevel === \"\") ? 1 : audioLevel;  \r\n                break;\r\n        }\r\n        return audioLevel;\r\n    }\r\n\r\n\tthis.setCaptions = function (arg){\r\n        self.dataObj.captions = arg;\r\n        self.setData();\r\n    }\r\n    \r\n    this.getCaptions = function (){\r\n        return self.dataObj.captions;\r\n    }\r\n    \r\n    this.setRoles = function (roles){\r\n        self.dataObj.roles = roles;\r\n        self.setData();\r\n    }\r\n    \r\n    this.getRoles = function (){\r\n        return self.dataObj.roles;\r\n    }\r\n    \r\n    this.setLocation = function (location){\r\n        if (!courseConfig.storage.bookmark){\r\n            location = 0;\r\n        }\r\n        switch (courseConfig.storage.complianceType){\r\n            case SCORM_1_2: \r\n            case SCORM_2004:\r\n            case LOCALSTORAGE:\r\n                //scormController.instance.setLocation(location);\r\n                setToStorageAPI(self.LESSON_LOCATION, String(location));\r\n                break;\r\n        }\r\n        \r\n        // set bookmark as index in current module\r\n        self.dataObj.bookmark[navigationController.moduleIndex] = navigationController.pageIndex;\r\n        self.setData();\r\n    }\r\n    \r\n    this.getLocation = function (){\r\n        var location = '';\r\n        switch (courseConfig.storage.complianceType){\r\n            case SCORM_1_2: \r\n            case SCORM_2004:\r\n            case LOCALSTORAGE: \r\n//                location = scormController.instance.location();\r\n                location = getFromStorageAPI(self.LESSON_LOCATION);\r\n                location = (location === \"\") ? 0 : location;   \r\n                break;\r\n        }\r\n        return location;\r\n    }\r\n    \r\n    this.setSlideData = function(_pageIndex, _slideIndex, data){\r\n        self.dataObj.slideData[_pageIndex][_slideIndex] = data;\r\n        //console.log('setSlideData', data, self.dataObj.slideData)\r\n        self.setData();\r\n    }\r\n    \r\n    this.getSlideData = function(_pageIndex, _slideIndex){\r\n        return self.dataObj.slideData[_pageIndex][_slideIndex];\r\n    }\r\n    \r\n    this.setSlideVisited = function(_pageIndex, _slideIndex){\r\n        // if slide not complete (2) set to visited (1)\r\n        if (self.dataObj.slideProgress[_pageIndex][_slideIndex] != 2){\r\n            self.dataObj.slideProgress[_pageIndex][_slideIndex] = 1;\r\n            self.setData();\r\n        }\r\n    }\r\n    \r\n    this.isSlideVisited = function(_pageIndex, _slideIndex){\r\n        // is slide visited (1) or complete (2)\r\n        return (self.dataObj.slideProgress[_pageIndex][_slideIndex] > 0);\r\n    }\r\n    \r\n    this.setSlideComplete = function(_pageIndex, _slideIndex){\r\n        //console.log('StorageController:setSlideComplete', _pageIndex, _slideIndex);\r\n        self.dataObj.slideProgress[_pageIndex][_slideIndex] = 2;\r\n\r\n        // update submenus\r\n        courseData.updateSubmenus();\r\n\r\n        self.setData();\r\n    }\r\n    \r\n    this.isSlideComplete = function(_pageIndex, _slideIndex){\r\n        return (self.dataObj.slideProgress[_pageIndex][_slideIndex] == 2);\r\n    }\r\n\r\n    this.setSubmenuPageComplete = function(_pageIndex){\r\n\r\n        for (var i = 0; i < navigationController.pageArray[_pageIndex].slides.length; i++){\r\n            // user should have visited the slide containing the submenu\r\n            if (self.dataObj.slideProgress[_pageIndex][i] == 1 && navigationController.isValidRole(navigationController.pageArray[_pageIndex].slides[i].roles)){\r\n                self.setSlideComplete(_pageIndex, i);\r\n            }\r\n        }\r\n    }\r\n\r\n    this.initModuleMenu = function(_moduleIndex, inMenu){\r\n        if (self.dataObj.menu.active[_moduleIndex] == undefined){\r\n            self.dataObj.menu.active[_moduleIndex] = utils.booleanToInt(inMenu);\r\n            self.setData();\r\n        }\r\n    }\r\n\r\n    this.setModuleActive = function(_moduleIndex, isActive){\r\n        self.dataObj.menu.active[_moduleIndex] = utils.booleanToInt(isActive);\r\n        self.setData();\r\n    } \r\n\r\n    this.isModuleActive = function(_moduleIndex){\r\n        return (self.dataObj.menu.active[_moduleIndex] == 1);\r\n    }\r\n\r\n    this.initModuleMandatory = function(_moduleIndex, isMandatory){\r\n        if (self.dataObj.menu.mandatory[_moduleIndex] == undefined){\r\n            self.dataObj.menu.mandatory[_moduleIndex] = utils.booleanToInt(isMandatory);\r\n            self.setData();\r\n        }\r\n    }\r\n\r\n    this.setModuleMandatory = function(_moduleIndex, isMandatory){\r\n        self.dataObj.menu.mandatory[_moduleIndex] = utils.booleanToInt(isMandatory);\r\n        self.setData();\r\n    } \r\n\r\n    this.isModuleMandatory = function(_moduleIndex){\r\n        return (self.dataObj.menu.mandatory[_moduleIndex] == 1);\r\n    }    \r\n\r\n    this.initModuleLocked = function(_moduleIndex, isLocked){\r\n        if (self.dataObj.menu.locked[_moduleIndex] == undefined){\r\n            self.dataObj.menu.locked[_moduleIndex] = utils.booleanToInt(isLocked);\r\n            self.setData();\r\n        }\r\n    }\r\n    this.setModuleLocked = function(_moduleIndex, isLocked){\r\n        self.dataObj.menu.locked[_moduleIndex] = utils.booleanToInt(isLocked);\r\n        self.setData();\r\n    } \r\n\r\n    this.isModuleLocked = function(_moduleIndex){\r\n        return (self.dataObj.menu.locked[_moduleIndex] == 1);\r\n    }    \r\n    \r\n    this.getMenuData = function(){\r\n        return self.dataObj.menu ;\r\n    }\r\n        \r\n    this.isPageComplete = function(_pageIndex){\r\n        var complete = true;\r\n        \r\n        for (var i = 0; i < navigationController.pageArray[_pageIndex].slides.length; i++){\r\n            \r\n            if (self.dataObj.slideProgress[_pageIndex][i] != 2 && navigationController.isValidRole(navigationController.pageArray[_pageIndex].slides[i].roles)){\r\n                complete = false;\r\n                break;\r\n            }\r\n        }\r\n        return complete;\r\n    }\r\n    \r\n    this.isModuleComplete = function(_moduleIndex){\r\n        var complete = true;\r\n        var pageHasSetModuleComplete = false;\r\n        // check if there are any pages that set the module complete on their completion\r\n        for (var i = 0; i < navigationController.pageArray.length; i++){\r\n            if (navigationController.isValidRole(navigationController.pageArray[i].roles)){\r\n                if (navigationController.pageArray[i].module == _moduleIndex){\r\n                    if (navigationController.pageArray[i].completeModuleOnCompletion && self.isPageComplete(i)){\r\n                        pageHasSetModuleComplete = true;\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        if (!pageHasSetModuleComplete){\r\n            for (var i = 0; i < navigationController.pageArray.length; i++){\r\n                if (navigationController.pageArray[i].module == _moduleIndex){\r\n                    if (!multiLanguage){\r\n                        //console.log('isModuleComplete', _moduleIndex, i)\r\n                        if (courseData.getPageData(_moduleIndex, navigationController.pageArray[i].page).multiLanguageOnly == \"true\"){\r\n                            //skip any pages hidden for multiLanguageOnly e.g.language selection page\r\n                            continue;\r\n                        }\r\n                    }\r\n                    // check if page is mandatory - if not then skip\r\n                    if (courseData.checkMandatory(navigationController.pageArray[i])){\r\n                        // if page not complete then module not complete\r\n                        if (!self.isPageComplete(i)){\r\n                            complete = false;\r\n                            break;\r\n                        } \r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return complete;\r\n    }\r\n    \r\n    this.checkCourseComplete = function(){\r\n        // check all pages complete\r\n        var pagesComplete = false;\r\n        if (courseConfig.storage.courseCompletion == 0 || courseConfig.storage.courseCompletion == 2){\r\n            pagesComplete = true;\r\n            for (var i = 0; i < self.dataObj.slideProgress.length; i++){\r\n                if (navigationController.isValidRole(navigationController.pageArray[i].roles)){\r\n                    if (!multiLanguage){\r\n                        //console.log('isModuleComplete', _moduleIndex, i)\r\n                        if (courseData.getPageData(navigationController.pageArray[i].module, navigationController.pageArray[i].page).multiLanguageOnly == \"true\"){\r\n                            //skip any pages hidden for multiLanguageOnly e.h.language selection page\r\n                            continue;\r\n                        }\r\n                    }\r\n                    if (!self.isPageComplete(i)){\r\n                        pagesComplete = false;\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        \r\n        var scoreComplete = false;\r\n        if (courseConfig.storage.courseCompletion == 1){\r\n            // completion based on score\r\n            if (assessmentConfig.scormScoreAssessmentID != ''){\r\n                \r\n                if (assessmentConfig.assessments[assessmentConfig.scormScoreAssessmentID].enable){\r\n                    scoreComplete = (self.dataObj.assessment[assessmentConfig.scormScoreAssessmentID].perc >= assessmentConfig.assessments[assessmentConfig.scormScoreAssessmentID].passingPerc);\r\n                }\r\n            } else {\r\n                scoreComplete = (self.score == 100);\r\n            }\r\n        }        \r\n          \r\n        var complete = false;\r\n        switch (courseConfig.storage.courseCompletion){\r\n            case 0:\r\n                complete = pagesComplete;\r\n                break;\r\n            case 1:\r\n                complete = scoreComplete;\r\n                break;\r\n            case 2:\r\n                complete = pagesComplete && scoreComplete;\r\n                break;\r\n            case 3:\r\n                // use last page to check course complete\r\n                var completionSlide = {page: 0, slide: 0}\r\n                // check if there are any pages that set the course complete on their completion\r\n                for (var i = 0; i < navigationController.pageArray.length; i++){\r\n                    for (var j = 0; j < navigationController.pageArray[i].slides.length; j++){\r\n                        if (navigationController.isValidRole(navigationController.pageArray[i].slides[j].roles)){\r\n                            completionSlide = {page: i, slide: j}\r\n                            if (navigationController.pageArray[i].slides[j].navData.setsCourseComplete == 'true'){\r\n                                break;\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n                complete = (self.isSlideComplete(completionSlide.page, completionSlide.slide));\r\n                self.isLastSlideComplete = complete;\r\n                break;        \r\n        }\r\n        \r\n        //console.log('StorageController::checkCourseComplete', courseConfig.storage.courseCompletion, pagesComplete, scoreComplete, complete)\r\n        if (complete){\r\n            this.setComplete();\r\n        } \r\n    }\r\n    \r\n    this.isCourseComplete = function(){\r\n        var complete = true;\r\n        for (var i = 0; i < navigationController.pageArray.length; i++){\r\n            if (navigationController.isValidRole(navigationController.pageArray[i].roles)){\r\n                if (!multiLanguage){\r\n                    //console.log('isModuleComplete', _moduleIndex, i)\r\n                    if (courseData.getPageData(navigationController.pageArray[i].module, navigationController.pageArray[i].page).multiLanguageOnly == \"true\"){\r\n                        //skip any pages hidden for multiLanguageOnly e.h.language selection page\r\n                        continue;\r\n                    }\r\n                }\r\n                if (!self.isPageComplete(i)){\r\n                    complete = false;\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        return complete;\r\n    }\r\n    \r\n    this.setAssessmentData = function(){\r\n        // get assessment data\r\n        for (var x in assessmentConfig.assessments){\r\n            //self.dataObj.assessment[x].score = window[x+'Assessment'].score;\r\n            //self.dataObj.assessment[x].perc = window[x+'Assessment'].perc;\r\n            //self.dataObj.assessment[x].answers = window[x+'Assessment'].answerArray;\r\n            //self.dataObj.assessment[x].selected = window[x+'Assessment'].selectedArray;\r\n            //self.dataObj.assessment[x].correct = window[x+'Assessment'].correctArray;\r\n                //.push(window[x+'Assessment'].correctArray);\r\n            if (assessmentConfig.assessments[x].enable){\r\n                self.dataObj.assessment[x] = window[x+'Assessment'].getData();\r\n            }\r\n        }\r\n        \r\n        self.setData();\r\n    }\r\n    \r\n    this.setData = function (){\r\n\r\n        self.dataObj.version = LaunchConfig.course.version;        \r\n        self.dataObj.history = navigationController ? navigationController.historyArray : self.dataObj.history;\r\n        self.dataObj.custom = customDataController.data;\r\n        self.dataObj.system = getSystemInfoObject();\r\n        \r\n        var data = JSON.stringify(self.dataObj);\r\n        \r\n        //console.log('StorageController', data, data.length);\r\n        \r\n        switch (courseConfig.storage.complianceType){\r\n            case SCORM_1_2: \r\n            case SCORM_2004:\r\n            case LOCALSTORAGE:\r\n                setToStorageAPI(self.SUSPEND_DATA, data);\r\n                break;\r\n        }\r\n    }\r\n    \r\n    this.getData = function (){\r\n\t\t// check we haven't already got data\r\n        if (self.dataObj.slideProgress.length == 0){\r\n        var data = null;\r\n        switch (courseConfig.storage.complianceType){\r\n            case SCORM_1_2: \r\n            case SCORM_2004:\r\n            case LOCALSTORAGE:\r\n                data = getFromStorageAPI(self.SUSPEND_DATA);\r\n                break;\r\n        }\r\n        \r\n        //console.log('StorageController::getData', data);\r\n        \r\n        if (data != null && data != ''){\r\n            var jsonData = JSON.parse(data);\r\n            // suspend data is JSON\r\n            self.dataObj = jsonData;\r\n            \r\n            for (var x in assessmentConfig.assessments){\r\n                //window[x+'Assessment'].answerArray = self.dataObj.assessment[x].answers;\r\n                //window[x+'Assessment'].selectedArray = self.dataObj.assessment[x].selected;\r\n                //window[x+'Assessment'].correctArray = self.dataObj.assessment[x].correct;\r\n                \r\n                if (assessmentConfig.assessments[x].enable){\r\n                    window[x+'Assessment'].updateFromLMSData(self.dataObj.assessment[x]);\r\n                }\r\n            }\r\n        } else {\r\n            for (var i = 0; i < courseData.getNumModules(); i++ ){\r\n                self.dataObj.bookmark[i] = 0;\r\n            }\r\n\r\n            for (var i = 0; i < navigationController.pageArray.length; i++){\r\n                self.dataObj.slideProgress[i] = [];\r\n                self.dataObj.slideData[i] = [];\r\n                for (var j = 0; j < navigationController.pageArray[i].slides.length; j++){\r\n                    //console.log('SLIDE complete', navigationController.pageArray[i].slides[j].complete)\r\n                    //var slideData = courseData.getSlideData(navigationController.pageArray[i].module, navigationController.pageArray[i].page, j);\r\n//                    if (slideData.complete){\r\n//                        self.setSlideComplete(i,j,k);\r\n//                    }\r\n                    \r\n                    var slideNavXMLData = navigationController.pageArray[i].slides[j].navData; \r\n                    // set complete if nav XML has complete attribute\r\n                    self.dataObj.slideProgress[i][j] = (slideNavXMLData.complete == 'true') ? 2 : 0;\r\n                    self.dataObj.slideData[i][j] = 0;\r\n                }\r\n            }\r\n            \r\n            for (var x in assessmentConfig.assessments){\r\n                if (assessmentConfig.assessments[x].enable){\r\n                    self.dataObj.assessment[x] = {};\r\n                }\r\n            }\r\n        }   \r\n\t\t}     \r\n    }\r\n    \r\n    this.getCustomData = function(){\r\n        return self.dataObj.custom;\r\n    }\r\n    \r\n    this.setCustomData = function(arg){\r\n        self.dataObj.custom = arg;\r\n        self.setData();\r\n    }\r\n    \r\n    this.getCompletionDate = function(){\r\n        return self.dataObj.completion;\r\n    }\r\n    \r\n    this.isPassed = function(){\r\n        return (self.dataObj.completion != '');\r\n    }\r\n    \r\n    this.getHistory = function(){\r\n        return self.dataObj.history;\r\n    }\r\n    \r\n    this.setHistory = function(arg){\r\n        self.dataObj.history = arg;\r\n        self.setData();\r\n    }\r\n    \r\n    this.getScore = function(){\r\n        var score = null;\r\n        switch (courseConfig.storage.complianceType){\r\n            case SCORM_1_2: \r\n            case SCORM_2004:\r\n            case LOCALSTORAGE:\r\n                score = getFromStorageAPI(self.SCORE);\r\n                break;\r\n        }\r\n        return score;\r\n    }\r\n    \r\n    this.setScore = function(score, min, max){\r\n        min = min || 0;\r\n        max = max || 100;\r\n        self.score = score;\r\n        self.setData();\r\n        switch (courseConfig.storage.complianceType){\r\n            case SCORM_1_2: \r\n            case SCORM_2004:\r\n            case LOCALSTORAGE:\r\n                setToStorageAPI(self.SCORE_MIN, min);\r\n                setToStorageAPI(self.SCORE_MAX, max);\r\n                setToStorageAPI(self.SCORE, score);\r\n                break;\r\n        }\r\n        switch (courseConfig.storage.complianceType){\r\n            case SCORM_2004:\r\n            case LOCALSTORAGE:\r\n                // set scaled score as raw sometimes doesn't work\r\n                setToStorageAPI(self.SCORE_SCALED, (score/max).toFixed(2));\r\n                break;\r\n        }\r\n    }\r\n\r\n    this.getProgressData = function(){\r\n        var progressObj = {num: 0, complete: 0, perc: 0};\r\n        for (var i = 0; i < self.dataObj.slideProgress.length; i++){\r\n            if (navigationController.isValidRole(navigationController.pageArray[i].roles)){\r\n                if (!multiLanguage){\r\n                    //console.log('isModuleComplete', _moduleIndex, i)\r\n                    if (courseData.getPageData(navigationController.pageArray[i].module, navigationController.pageArray[i].page).multiLanguageOnly == \"true\"){\r\n                        //skip any pages hidden for multiLanguageOnly e.h.language selection page\r\n                        continue;\r\n                    }\r\n                }\r\n                progressObj.num ++;\r\n                if (self.isPageComplete(i)){\r\n                    progressObj.complete ++;\r\n                }\r\n            }\r\n        }\r\n        progressObj.perc = progressObj.complete/progressObj.num;\r\n        return progressObj;\r\n    }\r\n\r\n    this.setProgressMeasure = function(perc){\r\n        switch (courseConfig.storage.complianceType){\r\n            case SCORM_1_2: \r\n            case SCORM_2004:\r\n                setToStorageAPI(self.PROGRESS_MEASURE, (perc/100).toFixed(2));\r\n                break;\r\n        }\r\n    }\r\n    \r\n    this.getComplete = function(){\r\n        var completeStatus;\r\n        switch (courseConfig.storage.complianceType){\r\n            case SCORM_1_2: \r\n            case SCORM_2004:\r\n            case LOCALSTORAGE:\r\n                completeStatus = getFromStorageAPI(self.LESSON_STATUS);\r\n                break;\r\n        }\r\n        return completeStatus;\r\n    }\r\n    \r\n    this.setComplete = function(){\r\n        addTrackDataTrace('StorageController::setComplete called');\r\n        if (this.dataObj.completion == ''){\r\n            this.dataObj.completion = utils.getTodayDate();\r\n        \r\n            if (courseConfig.storage.courseCompletion == 3 && self.isLastSlideComplete){\r\n                // if completion set on last page, set score to 100 too\r\n                var min = courseConfig.storage.scoring.min ? courseConfig.storage.scoring.min : 0;\r\n                min = typeof(min) == 'string' ? utils.evaluateVariable(min) : min;\r\n                var max = courseConfig.storage.scoring.max ? courseConfig.storage.scoring.max : 100;\r\n                max = typeof(max) == 'string' ? utils.evaluateVariable(max) : max;\r\n                var score = courseConfig.storage.scoring.score ? courseConfig.storage.scoring.score : 100;\r\n                score = typeof(score) == 'string' ? utils.evaluateVariable(score) : score;\r\n                console.log(score, min, max);\r\n                this.setScore(score, min, max);\r\n            }\r\n            switch (courseConfig.storage.complianceType){\r\n                case SCORM_1_2: \r\n                case SCORM_2004:\r\n                case LOCALSTORAGE:\r\n                    self.setSuccess('passed');\r\n                    setToStorageAPI(self.LESSON_STATUS, 'completed');\r\n                    // Let's force the save/commit to the LMS\r\n                    self.saveDataToStorageAPI();\r\n                    break;\r\n            }\r\n        }\r\n    }\r\n    \r\n    this.getSuccess = function(){\r\n        var successStatus;\r\n        switch (courseConfig.storage.complianceType){\r\n            case SCORM_2004:\r\n            case LOCALSTORAGE:\r\n                successStatus = getFromStorageAPI(self.SUCCESS_STATUS);\r\n                break;\r\n        }\r\n        return successStatus;\r\n    }\r\n    \r\n    this.setSuccess = function(success){\r\n        switch (courseConfig.storage.complianceType){\r\n            case SCORM_2004:\r\n            case LOCALSTORAGE:\r\n                setToStorageAPI(self.SUCCESS_STATUS, success);\r\n                break;\r\n        }\r\n    }\r\n    \r\n    this.saveData = function(){\r\n        //console.log('StorageController::saveData ', lmsDataToSave);\r\n        // only save if there is new data to save\r\n        \r\n        // utils.testConnection();\r\n        self.dataObj.position = {loc: navigationController.currentPage, m: navigationController.moduleIndex, p: navigationController.pageIndex, s:navigationController.currentSlide};\r\n        // addTrackDataTrace('StorageController::saveData current location ('+navigationController.moduleIndex+', '+navigationController.pageIndex+', '+navigationController.currentSlide+')');\r\n\r\n        // lets save the suspend data object\r\n        self.setData();            \r\n        \r\n        self.saveDataToStorage();\r\n    }\r\n\r\n    this.saveDataToStorage = function(){\r\n        if (lmsDataToSave){\r\n            if (!inExitProcess){\r\n                if (saveTimeout == null){\r\n                    saveTimeout = setTimeout(function(){\r\n                        clearTimeout(saveTimeout);\r\n                        saveTimeout = null;\r\n\r\n                        self.saveDataToStorageAPI();\r\n                    }, 2000);\r\n                } \r\n            } else {\r\n                self.saveDataToStorageAPI();\r\n            }\r\n        }\r\n    }\r\n\r\n    this.saveDataToStorageAPI = function(){\r\n        switch (courseConfig.storage.complianceType){\r\n            case SCORM_1_2: \r\n            case SCORM_2004:\r\n            case LOCALSTORAGE:\r\n                if (checkConnectionToLMS()){\r\n                    var success = self.storageAPI.save();\r\n                    if (success){\r\n                        // prevent any unecessary saves\r\n                        lmsDataToSave = false;\r\n                    }\r\n                }\r\n                break;\r\n        }\r\n    }\r\n    \r\n    this.getStudentID = function(){\r\n         var studentID= 'Student ID';\r\n         switch (courseConfig.storage.complianceType){\r\n            case SCORM_1_2: \r\n            case SCORM_2004:\r\n            case LOCALSTORAGE:\r\n                studentID = getFromStorageAPI(self.STUDENT_ID);\r\n                break;\r\n        }\r\n        \r\n        return studentID;\r\n    }\r\n    \r\n    this.setStudentName = function(name){\r\n        self.studentName = name;\r\n    }\r\n    \r\n    this.getStudentName = function(){\r\n         var studentName = '[Your_Name]';\r\n         switch (courseConfig.storage.complianceType){\r\n            case SCORM_1_2: \r\n            case SCORM_2004:\r\n            case LOCALSTORAGE:\r\n                studentName = getFromStorageAPI(self.STUDENT_NAME) || studentName;\r\n                break;\r\n        }\r\n        // turn comma spearated studentName into correct order e.g. 'Name, Student' into 'Student Name'\r\n        if (studentName.indexOf(\",\") != -1){\r\n            var student_name_arr = studentName.split(\",\");\r\n        \t// remove any spaces and then split based on the comma\r\n            studentName = student_name_arr[1].trim() +' '+ student_name_arr[0].trim();\r\n        }\r\n        \r\n        return studentName;\r\n    }\r\n\r\n    this.getStudentFirstName = function(){\r\n        var studentName = this.getStudentName();\r\n        if (studentName.indexOf(' ') != -1){\r\n            return studentName.substring(0, studentName.indexOf(' '));\r\n        } else { \r\n            return studentName;\r\n        }\r\n    }\r\n    \r\n    /**\r\n     * @function setInteraction\r\n     * @description This function is used to send user interaction to LMS API.\r\n     * @param questionId {String} Question id - Unique label for the interaction\r\n     * @param qType {String} Question type - “true-false”, “choice”, “fill-in”, “long-fill-in”, “matching”, “performance”, “sequencing”, “likert”, “numeric” or “other”, RW\r\n     * @param qText {String} Question text\r\n     * @param learnerResponse {String} learner response - format depends on interaction type, RW. Data generated when a learner responds to an interaction\r\n     * @param correctPattern {String} correct answer in '1,0' formate\r\n     * @param isCorrect “correct”, “incorrect”, “unanticipated”, “neutral”\r\n */\t\r\n    // this.setInteraction = function(questionId, qType, qText, learnerResponse, correctPattern, isCorrect){\r\n    this.setInteraction = function(interactionObj){\r\n        //console.log('StorageController::setInteraction', questionId, qType, qText, learnerResponse, correctPattern, isCorrect);\r\n        var correctStr = '';\r\n        var questionId = interactionObj.id.split(' ').join('');\r\n        if (lmsConnected && courseConfig.storage.cmi.interactions.enabled){\r\n            var interactionCount = self.dataObj.cmi.i[questionId];\r\n            // check if there is an interaction to update for this questionId\r\n            if (interactionCount == undefined || courseConfig.storage.cmi.interactions.unique){\r\n                interactionCount = getFromStorageAPI(\"cmi.interactions._count\");\r\n                // store latest id in suspend data so we can retrieve later\r\n                self.dataObj.cmi.i[questionId] = parseInt(interactionCount);\r\n            }\r\n\r\n            if (typeof(interactionObj.correct) == 'string'){\r\n                // e.g. 'neutral' string received\r\n                correctStr = interactionObj.correct;\r\n            } else {\r\n                if (interactionObj.correct){\r\n                    correctStr = 'correct';\r\n                } else {\r\n                    if (courseConfig.storage.complianceType == SCORM_1_2){\r\n                        correctStr = 'wrong';\r\n                    } else {\r\n                        correctStr = 'incorrect';\r\n                    }\r\n                }\r\n            }\r\n            var qText = interactionObj.question;\r\n            if (qText.length>=255){\r\n                qText = qText.slice(0,250);\r\n                qText += \"...\";\r\n            }\r\n        \r\n            // data need to be in the correct formats\r\n            var correctPatterns = self.getCorrectInteractionPatterns(interactionObj.type, interactionObj.answers);\r\n            var learnerResponse = self.adjustInteractionPattern(interactionObj.type, interactionObj.response);\r\n\r\n            switch (courseConfig.storage.complianceType){\r\n                case SCORM_1_2: \r\n                case SCORM_2004:\r\n                case LOCALSTORAGE:\r\n                    setToStorageAPI('cmi.interactions.'+interactionCount+'.id', 'Question-'+questionId);\r\n                    setToStorageAPI('cmi.interactions.'+interactionCount+'.type', interactionObj.type);\r\n                    if (courseConfig.storage.complianceType == SCORM_1_2){\r\n                        setToStorageAPI('cmi.interactions.'+interactionCount+'.objectives.0.id', qText);\r\n                    } else if (courseConfig.storage.complianceType == SCORM_2004){\r\n                        setToStorageAPI('cmi.interactions.'+interactionCount+'.description', qText);\r\n                    }\r\n                    // store timestamp\r\n                    setToStorageAPI('cmi.interactions.'+interactionCount+'.timestamp', ConvertDateToIso8601TimeStamp(interactionObj.timestamp));\r\n                    setToStorageAPI('cmi.interactions.'+interactionCount+'.latency', getScormTime(utils.getCurrentTime()-interactionObj.timestamp));\r\n                    \r\n                    for (var i = 0; i < correctPatterns.length; i++){\r\n                        setToStorageAPI('cmi.interactions.'+interactionCount+'.correct_responses.'+i+'.pattern', correctPatterns[i]);\r\n                    }\r\n                    if (courseConfig.storage.complianceType == SCORM_1_2){\r\n                        setToStorageAPI('cmi.interactions.'+interactionCount+'.student_response', learnerResponse);\r\n                    } else if (courseConfig.storage.complianceType == SCORM_2004){\r\n                        setToStorageAPI('cmi.interactions.'+interactionCount+'.learner_response', learnerResponse);\r\n                    }\r\n                    setToStorageAPI('cmi.interactions.'+interactionCount+'.result', correctStr);\r\n                    break;\r\n            }\r\n        }\r\n    }\r\n\r\n    this.getCorrectInteractionPatterns = function(type, value){\r\n        var patterns = [];\r\n        var combinations = [];\r\n        if (Array.isArray(value[0])){\r\n            // if 2d array - there are multiple patterns\r\n            combinations = utils.get2dCombinations(value);\r\n         } else {\r\n            if (Array.isArray(value)){\r\n                combinations.push(value.slice());\r\n            } else {\r\n                combinations.push(value);\r\n            }\r\n         }\r\n\r\n        for (var i = 0; i < combinations.length; i++){\r\n            patterns.push(self.adjustInteractionPattern(type, combinations[i]));\r\n        }\r\n\r\n        return patterns;\r\n    }\r\n\r\n    this.adjustInteractionPattern = function(qType, value){\r\n        var returnStr = value.toString();\r\n        if (courseConfig.storage.complianceType == SCORM_2004){\r\n            switch (qType){\r\n                case 'choice':\r\n                    // 'choice' format needs to be choice1[,]choice1 - each choice must be unique\r\n                    if (Array.isArray(value)){\r\n                        var returnArray = [];\r\n                        for (var i = 0; i < value.length; i++){\r\n                            if (value[i] == 1){\r\n                                returnArray.push(i);\r\n                            }\r\n                        }\r\n                        returnStr = returnArray.join('[,]');\r\n                    }\r\n                    break;\r\n                case 'matching':\r\n                    // 'matching' format needs to be source[.]target[,]source[.]target[,]source[.]target\r\n                    if (Array.isArray(value)){\r\n                        var returnArray = [];\r\n                        for (var i = 0; i < value.length; i++){\r\n                            returnArray[i] = i+'[.]'+value[i];\r\n                        }\r\n                    }\r\n                    returnStr = returnArray.join('[,]');\r\n                    break;\r\n            }\r\n        }\r\n        return returnStr;\r\n    }\r\n\r\n    this.getInteractionData = function(questionId, property){\r\n        questionId = questionId.split(' ').join('');\r\n        var returnStr = '';\r\n        if (lmsConnected){\r\n            var interactionCount = self.dataObj.cmi.i[questionId];\r\n            returnStr = getFromStorageAPI('cmi.interactions.'+interactionCount+'.'+property);\r\n        }\r\n        return returnStr;\r\n    }\r\n\t\r\n    this.setObjective = function(objectiveId, status, description){\r\n        if (lmsConnected  && courseConfig.storage.cmi.objectives.enabled){\r\n            var objectiveCount = self.dataObj.cmi.o[id];\r\n            var id = objectiveId.split(' ').join('');\r\n            console.log('StorageController::setObjective', id, objectiveCount);\r\n            var objectiveStatus = 'incomplete';\r\n            if (objectiveCount == undefined){\r\n                // || courseConfig.storage.cmi.objectives.unique){ // note objective id can't be the same\r\n                // check if there is a objective to update for this questionId\r\n                objectiveCount = getFromStorageAPI(\"cmi.objectives._count\");\r\n                // store latest id in suspend data so we can retrieve later\r\n                self.dataObj.cmi.o[id] = parseInt(objectiveCount);\r\n                \r\n                setToStorageAPI('cmi.objectives.'+objectiveCount+'.id', id);\r\n            } else {\r\n                objectiveStatus = getFromStorageAPI('cmi.objectives.'+objectiveCount+'.completion_status');\r\n            }\r\n            console.log('StorageController::setObjective', id, objectiveCount, objectiveStatus);\r\n            if (objectiveStatus != 'completed'){\r\n                status = status.toLowerCase() == 'complete' ? 'completed' : status.toLowerCase();\r\n                switch (courseConfig.storage.complianceType){\r\n                    case SCORM_1_2: \r\n                        //cmi.objectives.n.status (“passed”, “completed”, “failed”, “incomplete”, “browsed”, “not attempted”, RW) Indicates whether the learner has completed or satisfied the objective\r\n                        setToStorageAPI('cmi.objectives.'+objectiveCount+'.status', status);\r\n                        break;\r\n                    case SCORM_2004:\r\n                    case LOCALSTORAGE:\r\n                        //cmi.objectives.n.success_status (“passed”, “failed”, “unknown”, RW) Indicates whether the learner has mastered the objective\r\n                        //setToStorageAPI('cmi.objectives.'+objectiveCount+'.success_status', status);                        \r\n                        //cmi.objectives.n.completion_status (“completed”, “incomplete”, “not attempted”, “unknown”, RW) Indicates whether the learner has completed the associated objective\r\n                        setToStorageAPI('cmi.objectives.'+objectiveCount+'.completion_status', status);\r\n                        //cmi.objectives.n.description (localized_string_type (SPM: 250), RW) Provides a brief informative description of the objective\r\n                        setToStorageAPI('cmi.objectives.'+objectiveCount+'.description', description);\r\n                        break;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    function getFromStorageAPI(key){\r\n        var value = '';\r\n        switch (courseConfig.storage.complianceType){\r\n            case SCORM_1_2: \r\n            case SCORM_2004:\r\n                if (checkConnectionToLMS()){\r\n                    value = self.storageAPI.get(key);\r\n                    commitObj[key] = value;\r\n                }\r\n                break;\r\n            case LOCALSTORAGE: \r\n                value = getFromLocalStorage(key);\r\n                break;\r\n        }\r\n        return value;\r\n    }\r\n\r\n    function setToStorageAPI(key, value){\r\n        var newDataToSet = false;\r\n        // lets make sure we're only saving new data\r\n        if (commitObj[key] != value){\r\n            commitObj[key] = value;\r\n            newDataToSet = true;\r\n        } \r\n        \r\n        if (newDataToSet){\r\n            addTrackDataTrace('StorageController::setToStorageAPI : '+newDataToSet+' - '+key);\r\n            // console.log('StorageController::setToStorageAPI',key, commitObj[key])\r\n            if (courseConfig.storage.complianceType == LOCALSTORAGE){             \r\n                setToLocalStorage(key, value);\r\n            } else if (checkConnectionToLMS()){             \r\n\r\n                if (!inExitProcess && key == self.SUSPEND_DATA){\r\n                    // as suspend data updates regularly lets add a 10s delay in case any more data is adjusted - NOT when in exit process\r\n                    if (suspendDataTimeout == null){\r\n                        suspendDataTimeout = setTimeout(function(){\r\n                            clearTimeout(suspendDataTimeout);\r\n                            suspendDataTimeout = null;\r\n                            setNewDataToStorageAPI(key);\r\n                        }, 10000);\r\n                    }\r\n                } else {\r\n                    setNewDataToStorageAPI(key);\r\n                }                \r\n            }\r\n        }\r\n    }\r\n\r\n    function setNewDataToStorageAPI(key){\r\n        //utils.testConnection();\r\n        var result = self.storageAPI.set(key, commitObj[key]);\r\n        //console.log('setToStorageAPI', key, value, result);\r\n        notifyDataToSave();\r\n    }\r\n\r\n    function notifyDataToSave(){\r\n        lmsDataToSave = true;\r\n    }\r\n\r\n    function getFromLocalStorage(key){\r\n        \r\n        var key = getCourseKey()+key.split('.').join('_');\r\n        var value = window.localStorage.getItem(key);\r\n        // console.log('localStorage', 'GET', key, key.split('.').join('_'), value);\r\n        value = value == null ? '' : value;\r\n        return value;\r\n    }\r\n\r\n    function setToLocalStorage(key, value){\r\n        // console.log('localStorage', 'SET', key, key.split('.').join('_'), value);\r\n        window.localStorage.setItem(getCourseKey()+key.split('.').join('_'), value);\r\n    }\r\n\r\n    function getCourseKey(){\r\n        var courseKey = '';\r\n        if (LaunchConfig.course){\r\n            courseKey = (LaunchConfig.course.uid || LaunchConfig.course.code);\r\n        } else {\r\n            courseKey = courseConfig.uid || courseConfig.code;\r\n        }\r\n        return courseKey;\r\n    }\r\n        \r\n    function checkConnectionToLMS(){\r\n        if (lmsConnected){\r\n            if (self.storageAPI.connection.isActive){\r\n                return true;\r\n            } else {\r\n                // show alert - LMS connection lost\r\n                $.Alert({\r\n                    title: utils.lmsConnectionError.title,\r\n                    message: utils.lmsConnectionError.message,\r\n                    confirm: utils.lmsConnectionError.confirm,\r\n                    onConfirm:function(){\r\n                        //console.log('exit');\r\n                        navigationController.exitCourse();\r\n                    }\t\r\n                });\r\n                return false;\r\n            }\r\n        } else {\r\n            return false;\r\n        }\r\n    }\r\n    \r\n    function unloadHandler(e){\r\n        addTrackDataTrace('StorageController::unloadHandler called', unloaded);\r\n        if (!unloaded){\r\n            // mailto and tel links seem to fire the unloadhandler events - let's block them\r\n            // https://stackoverflow.com/questions/9740510/mailto-link-in-chrome-is-triggering-window-onbeforeunload-can-i-prevent-this\r\n            var activeElement = $(document.activeElement);\r\n            // console.log('activeElement', activeElement)\r\n            // added data 'link-mailto' to ActionUtility\r\n            var isMailto = activeElement && activeElement.is('[href^=\"mailto:\"]') || activeElement && activeElement.data('link-mailto');\r\n            var isTel = activeElement && activeElement.is('[href^=\"tel:\"]');\r\n\r\n            if (isMailto || isTel){\r\n                console.warn('StorageController::unloadHandler caught link unload ['+(isMailto ? 'mailto' : 'tel')+']');\r\n            }\r\n            if (!isMailto && !isTel){\r\n                inExitProcess = true;\r\n                // add exit to exit array - only keep 5\r\n                self.dataObj.exit.push({\r\n                    t: new Date().toISOString(),\r\n                    l: navigationController ? navigationController.pageIndex : 0, \r\n                    e: userInitiatedWindowClose ? 'course' : 'browser/other'\r\n                });\r\n                // only keep 5\r\n                if (self.dataObj.exit.length > 5){\r\n                    self.dataObj.exit.shift();\r\n                }\r\n\r\n                switch (courseConfig.storage.complianceType){\r\n                    case SCORM_1_2: \r\n                    case SCORM_2004:\r\n                        if (checkConnectionToLMS()){\r\n\r\n                            self.saveData();\r\n\r\n                            // save session time\r\n                            var timeSpent = getSessionTime();\r\n\t\t\t                setToStorageAPI(self.SESSION_TIME, timeSpent);\r\n                            \r\n                            self.storageAPI.save(); //save all data that has already been sent\r\n                            self.storageAPI.quit(); //close the SCORM API connection properly\r\n                            unloaded = true;\r\n                        }\r\n                        break;\r\n                    case LOCALSTORAGE:\r\n                        break;\r\n                }\r\n            } else {\r\n                addTrackDataTrace('StorageController::unloadHandler blocked unloadHandler due to a[mailto] or a[tel]');\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n * @function getSessionTime\r\n * @description This function returns the session time.\r\n * @returns {String} Time in string format\r\n */\t\r\n\tfunction getSessionTime() {\r\n\t\tvar dtm = new Date();\t\t\r\n\t\tvar n = dtm.getTime() - initalTime.getTime();\r\n\t\treturn getScormTime(n);\r\n    }\r\n    \r\n    /**\r\n * @function getScormTime\r\n * @description This function returns the current time.\r\n * @returns {String} Time in string format\r\n */\t\r\n\tfunction getScormTime(time) {\r\n\t\tif (courseConfig.storage.complianceType == SCORM_2004){\r\n\t\t\treturn ConvertMilliSecondsIntoSCORM2004Time(time);\r\n\t\t}else{\r\n\t\t\treturn MillisecondsToCMIDuration(time);\r\n\t\t}\r\n\t}\r\n\r\n    \r\n\r\n/**\r\n * @function MillisecondsToCMIDuration\r\n * @description This function is used to convert duration from milliseconds to 0000:00:00.00 format.\r\n * @returns {String} Time string in 0000:00:00.00 format\r\n */\t\r\n\tfunction MillisecondsToCMIDuration(LessonDuration) {\r\n\t\tvar hr =\"000\" + Math.floor(LessonDuration/(60*60*1000));\r\n\t\tvar temp = (LessonDuration-(hr*60*60*1000));\r\n\t\tvar min = \"0\" + Math.floor(temp/(60*1000));\r\n\t\tvar sec = temp-(min*60*1000);\r\n\t\ttemp = temp - (sec*1000)\r\n\t\tvar ms = \"0\" + Math.floor(temp/1000);\r\n\t\tsec = \"0\" + Math.floor(sec/1000);\r\n\t\tvar LessonDurationFormat = hr.substr(hr.length-4)+\":\"+min.substr(min.length-2)+\":\"+sec.substr(sec.length-2)+\".\"+ms.substr(ms.length-2);\r\n\t\treturn LessonDurationFormat\r\n\t}\r\n/**\r\n * @function ConvertMilliSecondsIntoSCORM2004Time\r\n * @description This function is used to convert duration from milliseconds to SCORM 2004 time format.\r\n * @returns {String} Time in SCORM 2004 time format\r\n */\t\r\n\tfunction ConvertMilliSecondsIntoSCORM2004Time(intTotalMilliseconds){\t\r\n\t\tvar ScormTime = \"\";\r\n\t\tvar HundredthsOfASecond;\r\n\t\tvar Seconds;\r\n\t\tvar Minutes;\r\n\t\tvar Hours;\r\n\t\tvar Days;\r\n\t\tvar Months;\r\n\t\tvar Years;\t\r\n\t\tvar HUNDREDTHS_PER_SECOND = 100;\r\n\t\tvar HUNDREDTHS_PER_MINUTE = HUNDREDTHS_PER_SECOND * 60;\r\n\t\tvar HUNDREDTHS_PER_HOUR   = HUNDREDTHS_PER_MINUTE * 60;\r\n\t\tvar HUNDREDTHS_PER_DAY    = HUNDREDTHS_PER_HOUR * 24;\r\n\t\tvar HUNDREDTHS_PER_MONTH  = HUNDREDTHS_PER_DAY * (((365 * 4) + 1) / 48);\r\n\t\tvar HUNDREDTHS_PER_YEAR   = HUNDREDTHS_PER_MONTH * 12;    \t\r\n\t\tHundredthsOfASecond = Math.floor(intTotalMilliseconds / 10);    \t\r\n\t\tYears = Math.floor(HundredthsOfASecond / HUNDREDTHS_PER_YEAR);\r\n\t\tHundredthsOfASecond -= (Years * HUNDREDTHS_PER_YEAR);    \t\r\n\t\tMonths = Math.floor(HundredthsOfASecond / HUNDREDTHS_PER_MONTH);\r\n\t\tHundredthsOfASecond -= (Months * HUNDREDTHS_PER_MONTH);    \t\r\n\t\tDays = Math.floor(HundredthsOfASecond / HUNDREDTHS_PER_DAY);\r\n\t\tHundredthsOfASecond -= (Days * HUNDREDTHS_PER_DAY);\r\n\t\tHours = Math.floor(HundredthsOfASecond / HUNDREDTHS_PER_HOUR);\r\n\t\tHundredthsOfASecond -= (Hours * HUNDREDTHS_PER_HOUR);\r\n\t\tMinutes = Math.floor(HundredthsOfASecond / HUNDREDTHS_PER_MINUTE);\r\n\t\tHundredthsOfASecond -= (Minutes * HUNDREDTHS_PER_MINUTE);\r\n\t\tSeconds = Math.floor(HundredthsOfASecond / HUNDREDTHS_PER_SECOND);\r\n\t\tHundredthsOfASecond -= (Seconds * HUNDREDTHS_PER_SECOND);\r\n\t\tif (Years > 0) {\r\n\t\t\tScormTime += Years + \"Y\";\r\n\t\t}\r\n\t\tif (Months > 0){\r\n\t\t\tScormTime += Months + \"M\";\r\n\t\t}\r\n\t\tif (Days > 0){\r\n\t\t\tScormTime += Days + \"D\";\r\n\t\t}\r\n\t\tif ((HundredthsOfASecond + Seconds + Minutes + Hours) > 0 ){\r\n\t\t\tScormTime += \"T\";\r\n\t\t\tif (Hours > 0){\r\n\t\t\t\tScormTime += Hours + \"H\";\r\n\t\t\t}    \t\t\r\n\t\t\tif (Minutes > 0){\r\n\t\t\t\tScormTime += Minutes + \"M\";\r\n\t\t\t}    \t\t\r\n\t\t\tif ((HundredthsOfASecond + Seconds) > 0){\r\n\t\t\t\tScormTime += Seconds;\r\n\t\t\t\t\r\n\t\t\t\tif (HundredthsOfASecond > 0){\r\n\t\t\t\t\tScormTime += \".\" + HundredthsOfASecond;\r\n\t\t\t\t}    \t\t\t\r\n\t\t\t\tScormTime += \"S\";\r\n\t\t\t}    \t\t\r\n\t\t}    \t\r\n\t\tif (ScormTime == \"\"){\r\n\t\t\tScormTime = \"0S\";\r\n\t\t}    \t\r\n\t\tScormTime = \"P\" + ScormTime;\r\n\t\treturn ScormTime;\r\n    }\r\n    \r\n    function ConvertDateToIso8601TimeStamp(dtm){\r\n\t\r\n        var strTimeStamp;\r\n        \r\n        dtm = new Date(dtm);\r\n        \r\n        var Year   = dtm.getFullYear();\r\n        var Month  = dtm.getMonth() + 1;\r\n        var Day    = dtm.getDate();\r\n        var Hour   = dtm.getHours();\r\n        var Minute = dtm.getMinutes();\r\n        var Second = dtm.getSeconds();\r\n        \r\n        Month  = ZeroPad(Month, 2);\r\n        Day    = ZeroPad(Day, 2);\r\n        Hour   = ZeroPad(Hour, 2);\r\n        Minute = ZeroPad(Minute, 2);\r\n        Second = ZeroPad(Second, 2);\r\n        \r\n        strTimeStamp = Year + \"-\" + Month + \"-\" + Day + \"T\" + Hour + \":\" + Minute + \":\" + Second;\r\n        \r\n        return strTimeStamp;\r\n        \r\n    }\r\n\r\n    function ZeroPad(intNum, intNumDigits){\r\n\t\r\n        var strTemp;\r\n        var intLen;\r\n        var i;\r\n        \r\n        strTemp = new String(intNum);\r\n        intLen = strTemp.length;\r\n        \r\n        if (intLen > intNumDigits){\r\n            strTemp = strTemp.substr(0,intNumDigits);\r\n        }\r\n        else{\r\n            for (i=intLen; i<intNumDigits; i++){\r\n                strTemp = \"0\" + strTemp;\r\n            }\r\n        }\r\n        \r\n        return strTemp;\r\n    }\r\n    \r\n    init();\r\n}\r\n","function StorageComms(){\r\n    var self = this;\r\n\r\n    var commsLogStr = '<h1 class=\"titleText\">'+LaunchConfig.course.author+' Test Report - '+LaunchConfig.course.id+' ['+LaunchConfig.course.version+'] - Start</h1>';\r\n    var commsLogObj = {trace: [], func: []};\r\n\r\n\r\n    this.addTrace = function(msg){\r\n        //console.log('TrackDataTrace',msg);\r\n        var d = new Date().toISOString();\r\n        \r\n        commsLogObj.trace.push({\r\n            date: d,\r\n            msg: msg\r\n        })\r\n        var str = '';\r\n        str += '<div class=\"data-item data-trace-item\">';\r\n            str += '<p><span class=\"valLable\" >#'+commsLogObj.trace.length+'</span> <span class=\"valLable\" >Time:</span>'+d+'</p>';\r\n            str += '<p><span class=\"valLable\" >Trace: </span>'+msg+'</p>';\r\n            str += '<p class=\"botBorder\"></p>';\r\n        str += '</div>';\r\n        commsLogStr += str;\r\n        // console.log('communicationWin', communicationWin)\r\n        if (communicationWin != null && islogPop) {\r\n\t\t    communicationWin.updateLog(self.getLogString());\r\n\t    }\r\n    }\r\n\r\n    this.addFunc = function(func,param,paramValue,resultText,result){\r\n        //_data\r\n    //    if (infoText == ''){\r\n    //        infoText += '<h1 class=\"titleText\">'+LaunchConfig.course.author+' Test Report - '+LaunchConfig.course.id+' ['+LaunchConfig.course.version+'] - Start</h1>';\r\n    //    }\r\n\r\n    \r\n        commCount++;\r\n        var d = new Date().toISOString();\r\n        commsLogObj.func.push({\r\n            date: d,\r\n            func: func,\r\n            param: param,\r\n            value: paramValue,\r\n            result: resultText\r\n        })\r\n\r\n        var str = '';\r\n        str += '<div class=\"data-item data-function-item\">';\r\n            str+='<p><span class=\"valLable\" >#'+commsLogObj.func.length+'</span> <span class=\"valLable\" >Time:</span>'+d+'</p>';\r\n            str+='<p><span class=\"valLable\" >Function: </span>'+func+'</p>';\r\n\r\n            if(param!=null && param!=''){\r\n                str+='<p><span class=\"valLable\" >Parameter: </span>'+param+'</p>';\r\n            }\r\n            if(paramValue!=null && paramValue!=''){\r\n                str+='<p><span class=\"valLable\" >Parameter Value: </span>'+paramValue+'</p>';\r\n            }\r\n            str+='<p><span class=\"valLable\" >Return: </span>'+resultText+'</p>';\r\n            if(result){\r\n                str+='<p><span class=\"valLable\" >Result: </span><span class=\"passResult\" >Success</span></p>';\r\n            }else{\r\n                str+='<p><span class=\"valLable\" >Result: </span><span class=\"failResult\" >Fail</span></p>';\r\n            }\r\n            str+='<p class=\"botBorder\"></p>';\r\n        str+='</div>';\r\n        commsLogStr += str;\r\n        if (communicationWin != null && islogPop) {\r\n            communicationWin.updateLog(self.getLogString());\r\n        }\r\n    }\r\n\r\n    // this.addText = function(_str){\t\r\n    //     // _str=_str+\"<br/><br/>\"+systemInfo(screenSize);\t\t\t\r\n    //     // $('.logtext').html(_str);\r\n    //     // var str = _str;\r\n    //     // str += '<h2 class=\"titleText\">'+LaunchConfig.course.author+' Test Report - Start</h2>';\r\n    //     // str += screenSize;\r\n    //     // str += '<h2 class=\"titleText\">'+LaunchConfig.course.author+' Test Report - End</h2>';\r\n    //     updateLog(_str);\r\n    // }\r\n\r\n    // this.updateLog = function(_str){\r\n    //     // var st=window.opener.infoText+;\r\n\r\n    //     // var str = _str;\r\n    //     // str += '<h2 class=\"titleText\">System Report</h2>';\r\n    //     // str += window.opener.getSystemInfoStr();\r\n    //     // str += screenSize;\r\n\r\n    //     $('.logtext').html(_str);\r\n    // }\r\n\r\n    this.getLogString = function(){\r\n        return commsLogStr+getSystemInfoStr();\r\n    }\r\n    this.getLogObj = function(){\r\n        return commsLogObj;\r\n    }\r\n}","function SearchController(){\r\n    var self = this;\r\n    var xmlData;\r\n    var data;\r\n//    var snapshot;\r\n    var term = '';\r\n    var terms = [];\r\n    var resultsArray = [];\r\n    var searchItemClicked = false;\r\n    \r\n    \r\n    this.init = function(){\r\n        \r\n        //this.search(courseData.data, 'help');\r\n        \r\n\r\n        /*// desktop search\r\n        $('#search-dropdown .search_form #btn_SearchGo').on('click', function(e){\r\n            e.preventDefault();\r\n                console.log('search');\r\n    // //          \r\n    //             var minSearchLength = (languageConfig.languages[currentLanguage].minsearch) ? languageConfig.languages[currentLanguage].minsearch : 3;\r\n                \r\n    //             if ($(this).find('.content_search').val().length >= minSearchLength){\r\n    //                 searchController.search(courseData.data, $(this).find('.content_search').val());\r\n    //             } else {\r\n    //                 $('.search-results').html(courseData.data.settings[0].search[0].min[0].Text).slideDown();  \r\n    //             }\r\n                $('#search-dropdown .dropdown-menu').dropdown('toggle');\r\n\r\n            searchController.handleSearch($('#search-dropdown').find('.content_search').val());\r\n            \r\n            return false;\r\n        });*/\r\n\r\n        // mobile form\r\n        // $('#search-xs .search_form').on('submit', function(e){\r\n\r\n        $('#search-dropdown .search_form input').focus(function(){  \r\n            console.log('focus');\r\n            //$(this).closest('form').submit();\r\n            //console.log('focus', $(this).closest('#search-dropdown').hasClass('open'));\r\n            setTimeout(function(){\r\n                $('#search-dropdown').addClass('open');\r\n            },50);\r\n            \r\n        });\r\n\r\n        $('#search-dropdown .search_form'). on('click', function(){\r\n            if (responsiveUtils.getCurrentViewport() != 'xs'){\r\n                if ($(this).hasClass('active')){\r\n                    $('#search-dropdown .search_form input').focus();\r\n                    // setTimeout(function(){\r\n                    //     $('#search-dropdown').removeClass('open');\r\n                    // }, 1);\r\n                } else {\r\n                    \r\n                    $('#search-dropdown .search_form input').blur();\r\n                    setTimeout(function(){\r\n                        $('#search-dropdown').removeClass('open');\r\n                    }, 1);\r\n                }\r\n            }\r\n        });\r\n\r\n        $('#search-dropdown .btn_Search'). on('click', function(){\r\n            $(this).closest('.search_form').toggleClass('active');\r\n        });\r\n\r\n        $('.search_form').on('submit', function(e){\r\n            e.preventDefault();\r\n\r\n            searchController.handleSearch($(this).find('.content_search').val());\r\n            \r\n            return false;\r\n        });\r\n\r\n        $('#search-dropdown').on('show.bs.dropdown', function () {\r\n        //     // do something?\r\n            //console.log('show');\r\n            // setTimeout(function(){\r\n            //     $('#search-dropdown').removeClass('open');\r\n            // }, 50);\r\n          });\r\n        \r\n    }\r\n\r\n    this.handleSearch = function(searchText){\r\n        // console.log('handleSearch',searchText);\r\n        var minSearchLength = (languageConfig.languages[currentLanguage].minsearch) ? languageConfig.languages[currentLanguage].minsearch : 3;\r\n            \r\n        if (searchText.length >= minSearchLength){\r\n            searchController.search(courseData.data, searchText);\r\n        } else {\r\n            removeHighlights();\r\n            $('.search-results').html(courseData.data.settings[0].search[0].min[0].Text).slideDown();  \r\n        }\r\n\r\n        setTimeout(function(){\r\n            $('#search-dropdown').addClass('open');\r\n        },50);\r\n    }\r\n        \r\n    this.updateSearch = function(){\r\n        if (searchItemClicked){\r\n            highlightOnPage();\r\n            searchItemClicked = false;\r\n        } else {\r\n            this.clearSearch();\r\n        }\r\n    }\r\n    \r\n    this.clearSearch = function(){\r\n        term = '';\r\n        terms = [];\r\n        resultsArray = [];\r\n        \r\n        $('.search_form .content_search').text('');\r\n        \r\n        $('.search-results').html('').hide();\r\n    }\r\n    \r\n    this.search = function(node, searchTerm){\r\n        term = searchTerm;\r\n        // $(this).find('.content_search').val(term);\r\n\r\n        $('.content_search').val(term);\r\n\r\n        terms = searchTerm.split(new RegExp('\\\\s+', 'g'));\r\n        //console.log('SEARCH', terms);\r\n        resultsArray = [];\r\n        this.searchObj(node, terms);\r\n        // console.log(node);\r\n       \t// console.log('resultsArray', resultsArray);\r\n        if (courseConfig.googleAnalytics.enabled){\r\n            gtag('event', 'Search', {\r\n              'event_category' : 'Search',\r\n              'event_label' : searchTerm\r\n            });\r\n        }\r\n        \r\n        if (resultsArray.length > 0){\r\n            var htmlStr = '';\r\n            var prevModule = -1;\r\n            var prevPage = -1;\r\n            var prevSlide = -1;\r\n\r\n            //htmlStr += '<div class=\"searchSlideResults\">';\r\n            for (var i = 0; i < resultsArray.length; i++){\r\n                var path = resultsArray[i].module;\r\n                var module = resultsArray[i].module;\r\n                var page = resultsArray[i].page;\r\n                var slide = resultsArray[i].slide;\r\n\r\n                if (module != courseData.getMenuModuleNum()){\r\n\r\n//                    if (module != prevModule || page != prevPage || slide != prevSlide){\r\n                    htmlStr += '<div class=\"search-result\">';\r\n                    if (module != prevModule){\r\n                        htmlStr += ' <div class=\"search-result-module\">'+courseData.getModuleLangData(module).title[0].Text+'</div>';\r\n                    }\r\n                    //if (module != prevModule && page != prevPage){\r\n                        //var pageTitle = courseData.getPageLangData(module, page).page;\r\n                        //if (courseData.getPageLangData(module, page).title[0].Text){\r\n                         //   htmlStr += ' <span class=\"searchPage\">'+courseData.data.settings[0].search[0].page[0].Text+' '+(page+1)+'</span>';                            \r\n                        //}\r\n                        //htmlStr += ' <span class=\"searchPage\">'+courseData.data.settings[0].search[0].page[0].Text+' '+(page+1)+'</span>';\r\n                    //}\r\n                    if (module != prevModule || page != prevPage || slide != prevSlide){\r\n//                    if (slide != prevSlide){\r\n                        //if (page > 0){\r\n                        //}\r\n                        htmlStr += ' <div class=\"search-result-slide\">';\r\n                        var slideTitle = courseData.getSlideLangData(module, page, slide).title;\r\n                        //if (slideTitle){\r\n                        //    htmlStr += slideTitle[0].Text;\r\n                        //} else {\r\n                            htmlStr += courseData.data.settings[0].search[0].slide[0].Text+' '+(slide+1);\r\n                        //}\r\n                        htmlStr += '</div>';\r\n                    }\r\n                    // htmlStr += '</div>';\r\n                    prevModule = module;\r\n                    prevPage = page;\r\n                    prevSlide = slide;\r\n                    \r\n//                    if (module != prevModule || page != prevPage || slide != prevSlide){\r\n//                        htmlStr += '<div class=\"searchSlideResults\">';\r\n//                        htmlStr += ' <span class=\"searchModule\">'+courseData.getModuleLangData(module).title[0].Text+'</span>';\r\n//                        if(page > 0){\r\n//                            htmlStr += ' <span class=\"searchPage\">'+courseData.data.settings[0].search[0].page[0].Text+' '+(page+1)+'</span>';\r\n//                        }\r\n//                        htmlStr += ' <span class=\"searchSlide\">'+courseData.data.settings[0].search[0].slide[0].Text+' '+(slide+1)+'</span>';\r\n//                        htmlStr += '</div>';\r\n//                        prevModule = module;\r\n//                        prevPage = page;\r\n//                        prevSlide = slide;\r\n//                    }\r\n                    \r\n                    \r\n                    var textStr = '';\r\n//                    if ( resultsArray[i].terms.length > 1){\r\n//                        textStr = resultsArray[i].text;\r\n//                        for (var j = 0; j < resultsArray[i].terms.length; j++){\r\n//                            textStr = spanWrap(textStr, resultsArray[i].terms[j]);\r\n//                        }\r\n//                    } else {\r\n//                        // let's get a snippet\r\n//                        console.log(resultsArray[i].text, resultsArray[i].terms[0]);\r\n//                        var snippets = snippet(resultsArray[i].text, resultsArray[i].terms[0]);                        \r\n//                        textStr = spanWrap(snippets[0], resultsArray[i].terms[0]);\r\n//                    }\r\n                    \r\n                    //console.log(resultsArray[i].text, resultsArray[i].terms);\r\n                    var snippets = snippet(resultsArray[i].text, resultsArray[i].terms);\r\n                    //console.log(snippets);\r\n                    if (snippets){\r\n                        \r\n                    textStr = snippets.join('/');\r\n                    for (var j = 0; j < resultsArray[i].terms.length; j++){\r\n                        textStr = spanWrap(textStr, resultsArray[i].terms[j]);\r\n                    }\r\n                    htmlStr += '<div class=\"search-result-text\"><a href=\"javascript:void(0)\" data-module=\"'+module+'\" data-page=\"'+page+'\" data-slide=\"'+slide+'\" data-path=\"'+path+'\">'+textStr+'</a></div>';\r\n                    } else {\r\n                        console.log('search error',resultsArray[i])\r\n                    }\r\n                    \r\n                    //var textStr = resultsArray[i].text;\r\n//                    for (var j = 0; j < resultsArray[i].terms.length; j++){\r\n//                        var snippets = snippet(resultsArray[i].text, resultsArray[i].terms[j]);\r\n//                        //for (var j = 0; j < resultsArray[i].terms.length; j++){\r\n//                        var textStr = snippets[0];\r\n//                        for (var k = 0; k < resultsArray[i].terms.length; k++){\r\n//                            textStr = spanWrap(textStr, resultsArray[i].terms[k]);\r\n//                        }\r\n//                        htmlStr += '<div><a href=\"javascript:void(0)\" data-module=\"'+module+'\" data-page=\"'+page+'\" data-slide=\"'+slide+'\" data-path=\"'+path+'\">'+textStr+'</a></div>';\r\n//                    }                   \r\n\r\n                    htmlStr += '</div>';\r\n                }\r\n            }\r\n            //htmlStr += '</div>';\r\n            $('.search-results').html(htmlStr).slideDown();        \r\n\r\n            $('.search-results a').on('click', function(e){\r\n                searchItemClicked = true;\r\n                navigationController.changePageToData($(this).data('module'), $(this).data('page'), $(this).data('slide'));\r\n            });\r\n            \r\n        } else {\r\n            $('.search-results').html(courseData.data.settings[0].search[0].noresults[0].Text).slideDown();  \r\n        }       \r\n        highlightOnPage();\r\n    } \r\n    \r\n    this.searchObj = function(node, termArray, obj){\r\n        if (!obj){\r\n            obj = {path:[], terms:[]}\r\n        }\r\n        \r\n        if (node._childorder){            \r\n            //if (node._childorder.length){            \r\n                for (var i = 0; i < node._childorder.length; i++){\r\n                    //console.log(node)\r\n                    var newObj = $.extend(true,{},obj);                \r\n\r\n                    var nodeName = node._childorder[i].node;\r\n                    var nodeData = node[nodeName][node._childorder[i].pos];\r\n\r\n                    newObj.path.push(nodeName+node._childorder[i].pos);\r\n                    if (nodeName == 'module' || nodeName == 'page' || nodeName == 'slide'){\r\n                        newObj[nodeName] = node._childorder[i].pos;\r\n                    }\r\n\r\n                    if (nodeData.Text){\r\n                        //if (nodeData.Text.toLowerCase().indexOf(term) != -1){\r\n                        var found = false;\r\n                        for (var j = 0; j < termArray.length; j++){\r\n                            if (nodeData.Text.toLowerCase().indexOf(termArray[j].toLowerCase()) != -1){\r\n                                newObj.terms.push(termArray[j]);\r\n                                found = true;\r\n                            }\r\n                        }\r\n                        if (found && newObj.module != undefined && newObj.page != undefined && newObj.slide != undefined){\r\n                            // only store results found within slide\r\n                            newObj.text = nodeData.Text;\r\n                            resultsArray.push(newObj);\r\n                        }\r\n                    } else{\r\n                       this.searchObj(nodeData, termArray, newObj);\r\n                    }\r\n                }\r\n            //}\r\n        }\r\n    }\r\n    \r\n//    function searchText(str, term){\r\n//        var escapedString = str.replace(/<.*?>/g, \"\");\r\n//        var escapedTerm = term.replace(/[\\\\[*+.()?^{|$]/g, \"\\\\$&\");\r\n//        var regExp = new RegExp(escapedTerm, \"gi\");\r\n//        \r\n//        return escapedString.match(regExp);\r\n//    }\r\n    \r\n//    function snippet(str, term){\r\n//        var escapedString = str.replace(/<.*?>/g, \"\")\r\n//        var escapedTerm = term.replace(/[\\\\[*+.()?^{|$]/g, \"\\\\$&\");\r\n//        var regExp = new RegExp(\"(\\\\S+\\\\s){0,5}\\\\S*\" + escapedTerm + \"\\\\S*(\\\\s\\\\S+){0,5}\",\"gi\");\r\n//        // returns an array containing all matches\r\n//        //console.log(escapedString, escapedPhrase, escapedString.match(regExp))\r\n//        return escapedString.match(regExp);\r\n//    } \r\n    \r\n//    function snippet(str, term){\r\n//        var escapedString = str.replace(/<.*?>/g, \"\")\r\n//        var escapedPhrase = term.replace(/[\\\\[*+.()?^{|$]/g, \"\\\\$&\");\r\n//        var regExp = new RegExp(\"(\\\\S+\\\\s){0,5}\\\\S*\" + escapedPhrase + \"\\\\S*(\\\\s\\\\S+){0,5}\",\"gi\");\r\n//        // returns an array containing all matches\r\n//        //console.log(escapedString, escapedPhrase, escapedString.match(regExp))\r\n//        var snippet = escapedString.match(regExp);\r\n//        var regExp2 = new RegExp(escapedPhrase, \"gi\");\r\n//        var processedSnippets = [];\r\n//        for (var i = 0; i < snippet.length; i++) {\r\n//            var components = snippet[i].split(regExp2);\r\n//\r\n//            // Check that the search term is in the middle of the snippet\r\n//            if (components.length == 2 && components[1] != \".\") {\r\n//              // First half of snippet\r\n//              // Look for . and get rid of everything before the . as well as the space after\r\n//              if (components[0].match(/\\./)) {\r\n//                // \r\n//                components[0] = components[0].replace(/.+\\.\\s+/, \"\");\r\n//              } \r\n//                // Check if the first word of snippet is the start of a sentence, if not prepend... \r\n//              else if (components[0][0]){\r\n//                  if (components[0][0].match(/[^A-Z0-9]/)) {\r\n//                    components[0] = \"...\" + components[0];\r\n//                  }\r\n//              }\r\n//              // Second half of snippet\r\n//              // Look for . and get rid of everything after the . \r\n//              if (components[1].match(/\\./)) {\r\n//                components[1] = components[1].replace(/\\..+/, \".\");\r\n//              } \r\n//              // Check if the last word of snippet is the last of the containing phrase and append ... if not \r\n//              else if (str.match(new RegExp(escapedPhrase + \"\\\\S*(\\\\s\\\\S+){6}\",\"gi\"))){\r\n//                components[1] += \"...\";\r\n//              }\r\n//              processedSnippets.push(components[0] + term + components[1]);   \r\n//            } \r\n//            // If term is at the beginning of snippet\r\n//            else  if (components.length == 1 && (components[0].trim()[0].match(/[^A-Z0-9]/))) {\r\n//                // Look for .\r\n//                if (components[0].match(/\\./)) {\r\n//                  // Get rid of everything after the .\r\n//                  components[0].replace(/\\.s+.*/,\".\")\r\n//                } \r\n//                // If no . then check whether ... needs to be appended\r\n//                else if (str.match(new RegExp(escapedPhrase + \"\\\\S*(\\\\s\\\\S+){6}\",\"gi\"))){\r\n//                  components[0] += \"...\";\r\n//                }\r\n//                processedSnippets.push(term + components[0]);\r\n//            } \r\n//            // The term is at the end of the snippet\r\n//            else {\r\n//            // check for .  \r\n//              if (components[0].match(/\\./)) {\r\n//                  // Get rid of everything before the .\r\n//                  components[0].replace(/.*\\.\\s+/,\"\")\r\n//                }\r\n//                // if no . then prepend ...\r\n//              else {\r\n//                components[0] = \"...\" + components[0];\r\n//              }\r\n//              // Put the . at the end back if it was there\r\n//              components[1] = components[1] || \"\";\r\n//              processedSnippets.push(components[0] + term + components[1]);\r\n//            }\r\n//        }\r\n//\r\n//        return processedSnippets;             \r\n//    }\r\n\r\n    function getEscaped(str) {\r\n        return str.replace(/[\\\\[*+.()?^{|$]/g, \"\\\\$&\");\r\n    }\r\n    \r\n    function snippet(str, terms){\r\n        var escapedString = str.replace(/<.*?>/g, \"\")\r\n        var escaped = \"(\" + terms.map(function(term) {\r\n         return getEscaped(term)\r\n        })\r\n        .reduce(function (accStr, nextTerm) {\r\n          return accStr + \"|\" + nextTerm;\r\n        }) + \")\";\r\n        var regExp = new RegExp(escaped, \"gi\");\r\n        // returns an array containing all matches\r\n        //console.log(escapedString, escapedPhrase, escapedString.match(regExp))\r\n        var wordArray = escapedString.split(\" \");\r\n\r\n\r\n        var matchPositions = [];\r\n\r\n        for (var i = 0; i < wordArray.length; i++) {\r\n\r\n          if (wordArray[i].match(regExp)) {\r\n            matchPositions.push(i);  \r\n          }\r\n        }\r\n        //    matchPositions = [2,43,71,79,86,89,106]\r\n        //    matchPositions = [2,5, 6 ,7,43,47, 71,79,86,89,106]\r\n        var snippetComponents = [];\r\n        var limit = 5;\r\n\r\n        if (matchPositions.length == 0) {\r\n          return null;\r\n        } else if (matchPositions.length == 1) {\r\n          snippetComponents = [[matchPositions[0]]];\r\n        } else {\r\n          var newSlice = true;\r\n          var sliceStart = 0; \r\n          var sliceEnd;\r\n          for (var i = 0; i < matchPositions.length; i++) {\r\n            sliceEnd = i;\r\n            // Handle last element\r\n            if (!matchPositions[i+1]) {\r\n              if (matchPositions[i] - matchPositions[i - 1] > limit) {\r\n                snippetComponents.push(matchPositions.slice(sliceStart, sliceEnd));\r\n                snippetComponents.push([matchPositions[i]]);\r\n              } else {\r\n                  snippetComponents.push(matchPositions.slice(sliceStart, sliceEnd + 1));\r\n              }\r\n            }\r\n\r\n            // End slice if current match position is greater than word limit beyond the previous match\r\n            else if(i > 0 && matchPositions[i] - matchPositions[i - 1] > limit) {\r\n              snippetComponents.push(matchPositions.slice(sliceStart, sliceEnd));\r\n              newSlice = true;\r\n              sliceStart = i;\r\n            }\r\n          }\r\n        }\r\n\r\n        // Create snippets from snippetComponents\r\n        var snippets = snippetComponents.map(function(components) {\r\n           // Assemble base snippet string\r\n\r\n            var snippet = [];\r\n            snippet.push((wordArray[components[0]]));\r\n            if (components.length > 1) {\r\n                for (var i = components[0] + 1; i <= components[components.length - 1]; i++){\r\n                    snippet.push(wordArray[i]);\r\n                }\r\n        //            snippet = snippet.join(\" \");\r\n            }\r\n\r\n            /* Sanitise snippet\r\n            * add words to either side up to limit or sentence end\r\n            * append ... if necessary\r\n            */\r\n            var prepend = false; \r\n            var append = false;\r\n\r\n            var initialLimit = limit;\r\n            // Beginning of snippet\r\n            for (var i = 1; i <= initialLimit; i++) {\r\n                var index = components[0] - i;\r\n                if (wordArray[index] !== undefined && !wordArray[index].match(/\\S/)){\r\n                        initialLimit++;\r\n                    } \r\n                if (wordArray[index] === undefined) {\r\n                    break;\r\n                } else if (wordArray[index].match(/\\.\\s*$/)) {\r\n                    break;\r\n                } else {\r\n                    snippet.unshift(wordArray[index]);\r\n                    //console.log(\"index\", index, wordArray[index]);\r\n                    if (i == limit && wordArray[index - 1] && !wordArray[index - 1].match(/\\.\\s*$/)) {\r\n                        prepend = true;\r\n                    }\r\n                }\r\n            }\r\n            initialLimit = limit;\r\n            // End of snippet\r\n            if (!snippet[snippet.length - 1].match(/\\.\\s*$/)) {\r\n                for (var i = 1; i <= initialLimit; i++) {\r\n                    var index = components[components.length - 1] + i;\r\n                    if (wordArray[index] !== undefined && !wordArray[index].match(/\\S/)){\r\n                        initialLimit++;\r\n                    } \r\n                    if (wordArray[index] === undefined) {\r\n                        break;\r\n                    } else if (wordArray[index].match(/\\.\\s*$/)) {\r\n                        break;\r\n                    } else {\r\n                        snippet.push(wordArray[index]);\r\n                        if (i == limit && !wordArray[index].match(/\\.\\s*$/) && wordArray[index + 1]) {\r\n                            append = true;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n\r\n            snippet = snippet.join(\" \");\r\n            if (prepend) snippet = \"...\" + snippet;\r\n            if (append) snippet += \"...\";\r\n\r\n            return snippet;\r\n        });\r\n        return snippets;//{wordArray, matchPositions, snippetComponents, snippets};             \r\n    }\r\n    \r\n    function spanWrap(str, term) {\r\n        var escapedTerm = getEscaped(term);\r\n        var regExp = new RegExp(escapedTerm, \"gi\");\r\n        var spanWrapped = str.replace(regExp, '<span class=\"term\">$&</span>')\r\n        return spanWrapped;  \r\n    }\r\n    \r\n    function highlightOnPage(){\r\n        // remove existing highlights\r\n        removeHighlights();\r\n        \r\n        for (var i = 0; i < terms.length; i++){\r\n\r\n            var rgxp = new RegExp(terms[i], 'gi');\r\n            // var escapedTerm = terms[i].replace(/[\\\\[*+.()?^{|$]/g, \"\\\\$&\");\r\n            // search for nodes of type 3 and check for term\r\n            var $elements = $('.slide *')\r\n                                .contents()\r\n                                .filter(function() {\r\n                                    return this.nodeType === 3 && $(this).parent().html().match(rgxp); //Node.TEXT_NODE\r\n                                }).parent();\r\n            var repl = '<span class=\"searchmarker\">$&</span>';\r\n            \r\n            if ($elements.length){\r\n                $elements.each(function(){\r\n                    $(this).html($(this).html().replace(rgxp, repl));\r\n                })\r\n            }\r\n        }\r\n        \r\n        //$('.pagesContainer *:contains('+term+')').\r\n    }\r\n\r\n    function removeHighlights(){\r\n        // remove existing highlights\r\n        $('.searchmarker').parent().each(function(){\r\n            $(this).html($(this).html().replace(/<span class=(\"searchmarker\")>(.*?)<\\/span>/gm, '$2'));\r\n            // $(this).html($(this).html().replace(/<\\/?span[^>]*>/g,\"\"));\r\n            // var text = $(this.html();\r\n            // var searchIndex = text.indexOf('<span class=\"searchmarker\">');\r\n            // do {\r\n            //     searchIndex = \r\n            // } while (searchIndex != -1){\r\n\r\n            // }\r\n            \r\n        });\r\n    }\r\n    \r\n//    this.getSnippet = function(str, term){\r\n////        var index = str.indexOf(term);\r\n////        //if (index)\r\n////        var snippet = str.substring(Math.max(0, index-21), index)+'<strong>'+str.substring(index, index+term.length)+'</strong>'+str.substring(Math.min(index+term.length, str.length, index+term.length+20));\r\n//        var escapedString = str.replace(/<.*?>/g, \"\")\r\n//        var escapedPhrase = term.replace(/[\\\\[*+.()?^{|$]/g, \"\\\\$&\");\r\n//        var regExp = eval(\"/(\\\\S+\\\\s){0,5}\\\\S*\" + escapedPhrase + \"\\\\S*(\\\\s\\\\S+){0,5}/gi\");\r\n//        // returns an array containing all matches\r\n//        //console.log(escapedString, escapedPhrase, escapedString.match(regExp))\r\n//        return escapedString.match(regExp);\r\n//        //return snippet;\r\n//    }\r\n//    \r\n//    this.getPathData = function(str, term){\r\n//        var index = str.indexOf(term);\r\n//        var termVal;\r\n//        if (index != -1){\r\n//            termVal = str.substr(index+term.length, str.indexOf(' ', index+term.length));\r\n//        }\r\n//        return termVal\r\n//    }\r\n//    \r\n    this.init();\r\n}","var TitleController = function(opts) {\r\n    var self = this;\r\n    var $title;\r\n    var $titleText;\r\n    \r\n    this.init = init;\r\n    this.change = change;\r\n    \r\n    init();\r\n    \r\n    function init(){\r\n        $title = $('.pageTitle');\r\n        $titleText = $('.pageTitleText');\r\n    }\r\n    \r\n    function change(_text){\r\n        $titleText.stop().fadeTo(300, 0, function(){\r\n            //$(this).css(\"visibility\", \"hidden\");   \r\n            $title.removeClass('notitle');\r\n            if (_text.length == 0){\r\n                $title.addClass('notitle');\r\n            }\r\n            $titleText.html(_text);\r\n            $titleText\r\n                .css('opacity', 0)\r\n                //.css('visibility', 'visible')\r\n                .fadeTo(300, 1);\r\n        }); // duration, opacity, callback\r\n    }\r\n};","var Utility = function() {\r\n    this.loadXMLData = loadXMLData;\r\n    this.updateXMLText = updateXMLText;\r\n    this.filterText = filterText;\r\n    this.getURLParameter = getURLParameter;\r\n    this.capitalizeFirstLetter = capitalizeFirstLetter;\r\n    this.testConnection = testConnection;\r\n    this.getURL = getURL;\r\n    this.getFullPath = getFullPath;\r\n    this.getImagePath = getImagePath;\r\n    this.getLangPath = getLangPath;\r\n    this.getMediaPath = getMediaPath;\r\n    this.getDocHeight = getDocHeight;\r\n    this.handleClickAndPress = handleClickAndPress;\r\n    \r\n    this.evaluateVariable = evaluateVariable;\r\n    this.checkConditionStr = checkConditionStr;\r\n    this.extractFromConditionStr = extractFromConditionStr;\r\n    this.extractFromLodashConditionStr = extractFromLodashConditionStr;\r\n    \r\n    this.updateErrorMessages = updateErrorMessages;\r\n\r\n    this.sanitize_escape_map = {\r\n        '&': '&amp;',\r\n        '<': '&lt;',\r\n        '>': '&gt;',\r\n        '\"': '&quot;',\r\n        \"'\": '&#39;',\r\n        \"'\": '&#x27;',\r\n        \"/\": '&#x2F;',\r\n    };\r\n    \r\n    \r\n    /*If you packaging the individual(language) version then Please translate this message*/\r\n    this.chromeSecurityError = { \r\n        message:\"Due the security restrictions inherent to Google Chrome the course will need to be run in one of the following supported browsers if you wish to run this locally:\",\r\n        browserSupport:[\"Internet Explorer\",\"Firefox\",\"Safari\"]\r\n    }\r\n\r\n    /*Below are the global variables and the value of these variables will update through globalInfo.xml file. Please do not modify/delete*/\r\n    this.connectionError    = {title: \"Connection Error\", message: \"Connection lost, please log in again. If the problem persists please contact IT Support.\", confirm: \"Close course\"}\r\n    this.lmsConnectionError = {title: \"LMS Connection Error\", message: \"LMS connection lost, please log in again. If the problem persists please contact IT Support.\", confirm: \"Close course\"}\r\n    this.loadingError       = {title: \"Loading Error\", message: \"File not found: \", confirm: \"Retry\", cancel: \"Close course\"}\r\n    \r\n    /**\r\n    * @function loadXMLData\r\n    * @description This function is used to load XML.\r\n    * @param url {String} URL of XML file.\r\n    * @param callbackFunction {function} callback function when XML load completes.\r\n    */\r\n    function loadXMLData(url, callbackFunction){\r\n        // console.log('Utility::loadXMLData');\r\n        $.ajax({\t\t\r\n            type: \"GET\",\r\n            url: utils.getURL(url),\r\n            dataType: \"xml\",\r\n            success: function(xml){\r\n                //console.log('Utility::loadXMLData success', xml);\r\n                //updateXMLText(xml);\r\n                var pXml = $.xmlToJSON(xml);\t\r\n                if (pXml.RootName === 'html'){\r\n                    // check file exists\r\n                    \r\n                    //testConnection();\r\n                    \r\n                    $.Alert({\r\n                        title: utils.loadingError.title,\r\n                        message: utils.loadingError.message+url,\r\n                        confirm: utils.loadingError.confirm,\r\n                        cancel: utils.loadingError.cancel,\r\n                        onConfirm:function(){\r\n                            loadXMLData(url, callbackFunction);\r\n                        },\r\n                        onCancel:function(){\r\n                            if (courseConfig.launchInNewWindow){\r\n                                window.top.close();\r\n                            } else{\r\n                                window.close(); // not working on Cornerstone\r\n                                window.top.close();\r\n                            }\r\n                        }\t\t\r\n                    });\r\n                } else {\r\n                    callbackFunction(pXml);\r\n                }\r\n            },\r\n            error: function(err){\r\n                //console.log('Utility::loadXMLData', err);\r\n                \r\n                //testConnection();\r\n                \r\n                $.Alert({\r\n                    title: utils.loadingError.title,\r\n                    message: utils.loadingError.message+url,\r\n                    confirm: utils.loadingError.confirm,\r\n                    cancel: utils.loadingError.cancel,\r\n                    onConfirm:function(){\r\n                        loadXMLData(url, callbackFunction);\r\n                    },\r\n                    onCancel:function(){\r\n                        if (courseConfig.launchInNewWindow){\r\n                            window.top.close();\r\n                        } else{\r\n                            window.close(); // not working on Cornerstone\r\n                            window.top.close();\r\n                        }\r\n                    }\t\t\r\n                });\r\n//                var is_chrome = navigator.userAgent.toLowerCase().indexOf('chrome') > -1;\r\n//                if(is_chrome){\r\n//                    //showChromeSecurityError();\r\n//                    $('.preLoaderParent').css('display','none');\r\n//                }else{\r\n//                    /*if(!isAlertShow){\r\n//                        alert(loadingError.file+\" :\"+url);\r\n//                    }*/\r\n//                }\r\n            }\r\n        });\r\n    }\r\n    \r\n    /**\r\n     * @function testConnection\r\n     * @description This function is used to check network connection.\r\n     * @param callBack {function}.\r\n     */\r\n    function testConnection() {\r\n        //console.log('testConnection');\r\n\t\tif ($('#netConn').length == 0) {\r\n\t\t\t$('body').prepend('<div id=\"netConn\"></div>');\r\n\t\t}\r\n\t\tvar imgStr = '<img id=\"testImage\" style=\"display: none;\" ' + 'src=\"'+coursePath+'framework/images/netConnCheck.png?' + Math.random() + '\" ' + 'onerror=\"testConnectionCallback(false);\" ' + 'onload=\"testConnectionCallback(true);\">';\r\n\t\t$('#netConn').html(imgStr);\r\n\t\ttestConnectionCallback = function(result) {\r\n            //console.log('testConnection', result);\r\n\t\t\tif (!result) {\r\n\t\t\t\t$.Alert({\r\n                    title: utils.connectionError.title,\r\n                    message: utils.connectionError.message,\r\n                    confirm: utils.connectionError.confirm,\r\n                    cancel: utils.connectionError.cancel,\r\n                    onConfirm:function(){\r\n                        navigationController.exitCourse();\r\n                    }\t\r\n                });\r\n\t\t\t}\r\n\t\t\t$('#netConn').html('');\r\n\t\t};\r\n\t}\r\n\r\n    /**\r\n     * @function updateXMLText\r\n     * @description This function update XML CDATA in required formate. \r\n     * @param obj {Document}\r\n     */\r\n    function updateXMLText(node){\r\n        var cnode;\t//Current Node\r\n        if(node.hasChildNodes()) {\t\t\t\r\n            var nodeCount = node.childNodes.length - 1;\t\r\n            var n = 0;\r\n            do {\r\n                cnode = node.childNodes[n];\r\n                switch(cnode.nodeType) {\r\n                    case 1:\r\n                    if(cnode.hasChildNodes()) {\r\n                        updateXMLText(cnode); //Recursive Call\r\n                    }\r\n                    break;\r\n                    case 3: //Text Value\r\n                        cnode.nodeValue = filterText(cnode.nodeValue);\r\n                    break;\r\n                    case 4: //CDATA\r\n                        if(cnode.text){\r\n                            cnode.text = filterText(cnode.text);\r\n                        }else{\r\n                            cnode.nodeValue = filterText(cnode.nodeValue);\r\n                        }\t\t\t\t\t\r\n                    break;\r\n                }\r\n            } while(n++ < nodeCount);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @function filterText\r\n     * @description This function is used to find and replace trquired XML Tag. \r\n     * @param _text {String}\r\n     * @returns _text {String}\r\n     */\r\n    function filterText(_text){\r\n         if(_text.indexOf('liIcon')>0){ return _text;}\r\n        _text = _text.replaceAll('<li>','<li><span class=\"liIcon\" ></span><span class=\"liText\">');\r\n        _text = _text.replaceAll('</li>','</span></li>');\r\n        return _text;\r\n    }\r\n    \r\n    function updateErrorMessages(){\r\n        this.connectionError = {\r\n            title: courseData.getErrorText('connection', 'title'),//xmlData.langXML.errors[0].connection[0].title[0].Text,\r\n            message: courseData.getErrorText('connection', 'message'),//xmlData.langXML.errors[0].connection[0].message[0].Text,\r\n            confirm: courseData.getErrorText('connection', 'confirm'),//xmlData.langXML.errors[0].connection[0].confirm[0].Text\r\n            cancel: courseData.getErrorText('connection', 'cancel') ? courseData.getErrorText('connection', 'cancel') : false\r\n        }\r\n        this.lmsConnectionError = {\r\n            title: courseData.getErrorText('lms', 'title'),//xmlData.langXML.errors[0].lms[0].title[0].Text,\r\n            message: courseData.getErrorText('lms', 'message'),//xmlData.langXML.errors[0].lms[0].message[0].Text,\r\n            confirm: courseData.getErrorText('lms', 'confirm'),//xmlData.langXML.errors[0].lms[0].confirm[0].Text\r\n            cancel: courseData.getErrorText('lms', 'cancel') ? courseData.getErrorText('connection', 'cancel') : false\r\n        }\r\n        this.loadingError = {\r\n            title: courseData.getErrorText('file', 'title'),//xmlData.langXML.errors[0].file[0].title[0].Text,\r\n            message: courseData.getErrorText('file', 'message'),//xmlData.langXML.errors[0].file[0].message[0].Text,\r\n            confirm: courseData.getErrorText('file', 'confirm'),//xmlData.langXML.errors[0].file[0].confirm[0].Text,\r\n            cancel: courseData.getErrorText('file', 'cancel')//xmlData.langXML.errors[0].file[0].cancel[0].Text\r\n        }\r\n    }\r\n\r\n    function evaluateVariable(variable){\r\n        var result = '';\r\n        try {\r\n            // use lodash to \r\n            var command = variable.match(/[^{}$]+/i)[0];\r\n            if (command.indexOf('(') != -1){\r\n                var commandArr = command.split(/[\\(\\)]+/);\r\n                var args = []\r\n                args.push(window);\r\n                args.push(commandArr[0]);\r\n                args = args.concat(commandArr[1].split(','));\r\n                // _.invoke can run a function\r\n                result = _.invoke.apply(this, args);\r\n            } else {\r\n                // _.get can get a variable result\r\n                result = _.get(window, command);\r\n            }\r\n        } catch (e) {\r\n        }\r\n        return result;\r\n    }\r\n\r\n    function checkConditionStr(str){\r\n        var isSatisfied = false;\r\n\r\n        // is this a function call? check for () - does not currently support arguments\r\n        if (str.indexOf('()') != -1){\r\n            return utils.evaluateVariable(str);\r\n        }\r\n        \r\n        // lets first check if writted in the format of variable == value\r\n        var obj = utils.extractFromConditionStr(str);\r\n        if (typeof obj != 'object') {\r\n            // now lets check if writted in the format of equal(variable, value)\r\n            obj = utils.extractFromLodashConditionStr(str);\r\n        } \r\n        \r\n\r\n        if (obj.operator) {\r\n            obj.leftOperand = _.get(window, obj.leftOperand);\r\n\r\n            switch (obj.operator.toLowerCase()){\r\n                case '==':\r\n                case '===':\r\n                case 'eq':\r\n                case 'equal':\r\n                    isSatisfied = _.eq(obj.leftOperand, obj.rightOperand);\r\n                    break;\r\n                case '!=':\r\n                case '!==':\r\n                case '!eq':\r\n                case 'noteq':\r\n                case 'equal':\r\n                case '!equal':\r\n                case 'notequal':\r\n                    isSatisfied = !_.eq(obj.leftOperand, obj.rightOperand);\r\n                    break;\r\n                case '<':\r\n                case 'lt':\r\n                case 'lessthan':\r\n                    isSatisfied = _.lt(obj.leftOperand, obj.rightOperand);\r\n                    break;\r\n                case '<=':\r\n                case 'lte':\r\n                case 'lessthanorequalto':\r\n                    isSatisfied = _.lte(obj.leftOperand, obj.rightOperand);\r\n                    break;\r\n                case '>':\r\n                case 'gt':\r\n                case 'greaterthan':\r\n                    isSatisfied = _.gt(obj.leftOperand, obj.rightOperand);\r\n                    break;\r\n                case '>=':\r\n                case 'gte':\r\n                case 'greaterthanorequalto':\r\n                    isSatisfied = _.gte(obj.leftOperand, obj.rightOperand);\r\n                    break;\r\n            }\r\n        }\r\n        return isSatisfied;\r\n    }\r\n\r\n     // extract string to object in the format of variable == value to obj{leftOperand: variable, operator: ==, rightOperand: value}\r\n    function extractFromConditionStr(str) {\r\n        const match = str.match(/(\\w+(?:\\.\\w+)*(?:\\[\\d+\\])?)\\s*([!<>=]=|[<>])+\\s*(\"([^\"]*)\"|'([^']*)'|\\w+)/);\r\n        if (match) {\r\n            const obj = {\r\n                leftOperand: match[1],\r\n                operator: match[2],\r\n                rightOperand: match[3] !== undefined ? match[3].replace(/[\"']/g, \"\") : match[4]\r\n            };\r\n            obj.rightOperand = isNaN(obj.rightOperand) ? obj.rightOperand : Number(obj.rightOperand);\r\n            return obj;\r\n        } else {\r\n            return str;\r\n        }\r\n    }\r\n    \r\n    // extract string to object in the format of equal(variable, value) to obj{leftOperand: variable, operator: 'equal', rightOperand: value}\r\n    function extractFromLodashConditionStr(str) {\r\n\r\n        const obj = {\r\n            operator: str.replace(/ *\\([^)]*\\) */g, \"\")\r\n        }\r\n        var parenthesesStr = '';\r\n        if (str.indexOf('(') != -1){\r\n            parenthesesStr = str.substring(str.indexOf('(')+1, str.length-1).split(',');\r\n            obj.leftOperand = parenthesesStr[0];\r\n            obj.rightOperand = isNaN(parenthesesStr[1]) ? parenthesesStr[1] : Number(parenthesesStr[1]);\r\n            // console.log(str, funcName, parenthesesStr, checkVariable, checkValue);\r\n        }\r\n        return obj;\r\n    }\r\n    \r\n    /**\r\n     * @function capitalizeFirstLetter\r\n     * @description This function is used to capitalise first letter of a string \r\n     * @param str {string}\r\n     * @returns ste {string}\r\n     */\r\n    function capitalizeFirstLetter(str) {\r\n        return str.charAt(0).toUpperCase() + str.slice(1);\r\n    }\r\n    \r\n    function getURLParameter(name) {\r\n        return decodeURI(\r\n            (RegExp(name + '=' + '(.+?)(&|$)').exec(location.search)||[,null])[1]\r\n        );\r\n    }\r\n\r\n    function getURL(src){\r\n        var path = src;\r\n        if (path.indexOf('http') != 0){\r\n            // path is within package - delegate to UpdateManager\r\n            path = updateManager.getURL(path.indexOf('course/') == 0 ? path : coursePath+path);\r\n        }\r\n        return path;\r\n    }\r\n\r\n    function getFullPath(startPath, src){\r\n        src = typeof src !== 'undefined' ? src : '';\r\n\r\n        var path;\r\n        if (src.indexOf('http') == 0){\r\n            // source is a full path\r\n            path = utils.getURL(src);\r\n        } else {\r\n            // add startPath if src doesn't contain it\r\n            startPath = src.indexOf('content/') == -1 ? startPath : '';\r\n            path = utils.getURL(startPath+src);\r\n        }\r\n\r\n        return path;\r\n    }\r\n\r\n    function getImagePath(src){\r\n        var path = '';\r\n        if (src){\r\n            path = utils.getFullPath('content/images/', src);\r\n        }\r\n        return path;\r\n    }\r\n\r\n    function getMediaPath(src){\r\n        var path = '';\r\n        if (src){\r\n            path = utils.getFullPath('content/media/', src);\r\n        }\r\n        return path;\r\n    }\r\n\r\n    function getLangPath(src){\r\n        var path = src;\r\n        if (src){\r\n            path = utils.getFullPath('content/lang/'+languageConfig.languages[currentLanguage].code, src);\r\n        }\r\n        return path;\r\n    }\r\n    \r\n    function getDocHeight(){\r\n        var D = document;\r\n        return Math.max(\r\n            D.body.scrollHeight, D.documentElement.scrollHeight,\r\n            D.body.offsetHeight, D.documentElement.offsetHeight,\r\n            D.body.clientHeight, D.documentElement.clientHeight\r\n        );\r\n    }\r\n    \r\n    function handleClickAndPress(myfunc) {\r\n        return function (e) {\r\n            if (e.type != \"keypress\" || e.keyCode == 13) {\r\n                myfunc(e);\r\n            }\r\n        };\r\n    }\r\n    \r\n    \r\n    this.css_time_to_milliseconds = function (time_string) {\r\n       var num = parseFloat(time_string, 10),\r\n           unit = time_string.match(/m?s/),\r\n           milliseconds;\r\n\r\n       if (unit) {\r\n           unit = unit[0];\r\n       }\r\n\r\n       switch (unit) {\r\n           case \"s\": // seconds\r\n               milliseconds = num * 1000;\r\n               break;\r\n           case \"ms\": // milliseconds\r\n               milliseconds = num;\r\n               break;\r\n           default:\r\n               milliseconds = 0;\r\n               break;\r\n       }\r\n\r\n       return milliseconds;\r\n    }\r\n    \r\n    this.getWordsByFragment = function(str, fragment) {\r\n        var regexp = new RegExp(\"\\\\b\" + fragment + \"\\\\w*\\\\b\", \"gi\");\r\n        return str.match(regexp) || [];\r\n    }\r\n    \r\n    this.removeWordsByFragment = function(str, fragment) {\r\n        var regexp = new RegExp(\"\\\\b\" + fragment + \"\\\\w*\\\\b\", \"gi\");\r\n        return str.replace(regexp, \"\").trim() || [];\r\n    }\r\n    \r\n    this.getLongestWord = function(str) {\r\n        var stringArray = str.split(\" \");\r\n        var longestWord = stringArray.reduce(function(a, b){\r\n            if (b.length > a.length) {\r\n              return b;\r\n            } else {\r\n              return a;\r\n            }\r\n        }, '');\r\n        return longestWord;\r\n    }\r\n    \r\n    /**\r\n     * @function closestNumber\r\n     * @description This function is used to find the closest number from the array. \r\n     * @param array {array}\r\n     * @param num {Number}\r\n     * @returns {Number}\r\n    */\r\n    this.closestNumber = function (array,num){\r\n        var i=0;\r\n        var minDiff=1000;\r\n        var ans;\r\n        for(i in array){\r\n             var m=Math.abs(num-array[i]);\r\n             if(m<minDiff){ \r\n                    minDiff=m; \r\n                    ans=array[i]; \r\n                }\r\n          }\r\n        return ans;\r\n    }\r\n    \r\n    /**\r\n\t * @function getCurrentTime\r\n\t * @description This function used to get the curent time. \r\n\t * @returns {Date} A date consists of a month,  a day, a year. \r\n\t */\r\n\tthis.getCurrentTime = function(){\t\t\r\n\t\tvar dtm = new Date();\t\t\r\n\t\tvar dt = dtm.getTime();\r\n\t\treturn dt;\t\r\n\t}\r\n    /**\r\n\t * @function getTodayDate\r\n\t * @description This function used to get the today's date. \r\n\t * @returns {Date} A date consists of a month,  a day, a year. \r\n\t */\r\n\tthis.getTodayDate = function(){\r\n\t\tvar now = new Date();\r\n\t\tvar dt= now.getDate() + \"_\" + (now.getMonth()+1) + \"_\" + now.getFullYear();\r\n\t\treturn dt;\t\r\n\t}\r\n    \r\n    /**\r\n     * @function getViewportTop\r\n     * @description This function is used to get the viewport offset - as IE is incorrect using pageOffsetY\r\n     * @returns {Boolean} return offset object\r\n     */\r\n    this.getViewportTop = function() {\r\n        var offsetTop = 0;\r\n        // when zoomed at 75% and 125% we occasionally see w.pageYOffset=1 and documentElement.scrollTop=1 in IE\r\n        if (window.pageYOffset > 1){\r\n            offsetTop = window.pageYOffset;\r\n        } else if (document.documentElement.scrollTop > 1){\r\n           offsetTop = document.documentElement.scrollTop;\r\n        } else {\r\n           offsetTop = document.body.scrollTop; \r\n        }  \r\n\r\n        return offsetTop;\r\n    }\r\n    \r\n    /**\r\n     * @function findElementTotalOffset\r\n     * http://watcheyesolutions.blogspot.co.uk/2012/10/in-ie-jquery-offsettop-not-returning.html\r\n     * @description This function is used to get total offset as offset() in IE is incorrect\r\n     * @returns {Boolean} return offset object\r\n     */\r\n    this.findElementTotalOffset = function(obj) {\r\n       var oleft = otop = 0;\r\n       if (obj.offsetParent) {\r\n         do {\r\n           oleft += obj.offsetLeft;\r\n           otop += obj.offsetTop;\r\n         }while (obj = obj.offsetParent);\r\n       }\r\n       return {left : oleft, top : otop};\r\n    }\r\n    \r\n    /**\r\n     * @function shuffle\r\n     * @description This function is used to randomly shuffle an array\r\n     * @returns array\r\n     */\r\n    Array.prototype.shuffle = function() {\r\n        for(var j, x, i = this.length; i; j = parseInt(Math.random() * i), x = this[--i], this[i] = this[j], this[j] = x);\r\n        return this;\r\n    };\r\n\r\n    Array.prototype.toNumberArray = function(){\r\n        return this.map(Number);\r\n    }\r\n    \r\n    this.checkArraysEqual = function(a, b) {\r\n        if (a === b) return true;\r\n        if (a == null || b == null) return false;\r\n        if (a.length !== b.length) return false;\r\n      \r\n        // If you don't care about the order of the elements inside\r\n        // the array, you should sort both arrays here.\r\n        // Please note that calling sort on an array will modify that array.\r\n        // you might want to clone your array first.\r\n      \r\n        for (var i = 0; i < a.length; ++i) {\r\n          if (a[i] !== b[i]) return false;\r\n        }\r\n        return true;\r\n    };\r\n    \r\n    /**\r\n     * @function shuffle\r\n     * @description This function is used to randomly shuffle jquery elements\r\n     * @returns array\r\n     */\r\n    $.fn.shuffle = function(selector){\r\n        (selector ? this.find(selector) : this).parent().each(function(){\r\n            $(this).children(selector).sort(function(){\r\n                return Math.random() - 0.5;\r\n            }).detach().appendTo(this);\r\n        });\r\n\r\n        return this;\r\n    };\r\n\r\n    this.get2dCombinations = function(sets){\r\n        var firstSet = sets[0];\r\n        if (sets.length === 1){\r\n            return firstSet.map(function(element){\r\n                return [element];\r\n            });\r\n        }\r\n       \r\n        var combinations = [];\r\n        for (var i = 0; i < firstSet.length; i++){\r\n            var combNMinusOne = utils.get2dCombinations(sets.slice(1));\r\n            for (var j = 0; j < combNMinusOne.length; j++){\r\n                combinations.push([firstSet[i]].concat(combNMinusOne[j].slice()));\r\n            }\r\n        }\r\n        return combinations;\r\n    }\r\n\r\n\tthis.setHeightToRemainingViewport = function($el, excludeBreakpointsArray){\r\n        if (!excludeBreakpointsArray){\r\n            excludeBreakpointsArray = ['sm','md','lg'];\r\n        }\r\n//        console.log()\r\n        if (excludeBreakpointsArray.indexOf(responsiveUtils.getCurrentViewport()) == -1){\r\n            \r\n            $el.css('min-height', $('.content-wrap-inner').cssNumber('min-height')-$('.content-wrap-inner').cssNumber('padding-bottom')-$el.offset().top+20);\r\n        } else {\r\n            $el.css('min-height', 'auto');\r\n            \r\n        }\r\n    }\r\n\r\n    this.stringToBoolean = function(string){\r\n        switch(string.toString().toLowerCase()) {\r\n             case \"true\": case \"yes\": case \"1\": return true;\r\n             case \"false\": case \"no\": case \"0\": case null: return false; \r\n             default: return Boolean(string);\r\n        }     \r\n    }\r\n\r\n    this.booleanToInt = function(arg){\r\n        return arg ? 1 : 0;\r\n    }\r\n\r\n    this.intToBoolean = function(arg){\r\n        return arg ? true : false;\r\n    }\r\n\r\n    this.sanitize = function(s) {\r\n        return s.replace( /[&<>]/g, function(c) {\r\n            return utils.sanitize_escape_map[c];\r\n        });\r\n    }\r\n    \r\n    /**\r\n\t * @function getTodayDate\r\n\t * @description This function used to get the today's date. \r\n\t * @returns {Date} A date consists of a month,  a day, a year. \r\n\t */\r\n\tthis.raphaelGetTextDetail = function(paper, text, x, y, fontSize, maxWidth){\r\n        \r\n        var words = text.replace('<br>', '\\n').split(' ');\r\n        \r\n        //var words = text.replaceAll('<br>', '\\n ').split(' ');\r\n        \r\n        //var words = text.replaceAll('<br>', '\\n ').split(' ');\r\n        var textStr = '';\r\n        var line = '';\r\n\r\n        var t;\r\n\r\n        for (var n = 0; n < words.length; n++) {\r\n            var testLine = line + words[n] + ' ';\r\n            t = paper.text(x, y, testLine);\r\n            t.attr(\"font-size\", fontSize);\r\n            //console.log(paper, 'raphaelGetTextDetail',t.getBBox().width)\r\n            if (t.getBBox().width > maxWidth && n > 0) {\r\n                textStr += line+'\\n';\r\n                line = words[n] + ' ';\r\n            } else {\r\n                line = testLine;\r\n            }\r\n            t.remove();\r\n        }\r\n        textStr += line;\r\n        return {\r\n            textStr: textStr,\r\n            x: x,\r\n            y: y\r\n        }\r\n    }\r\n\r\n    this.raphaelAddText = function(paper, text, x, y, fontSize, maxWidth){\r\n        //var set = paper.set();\r\n\r\n        var textObj = utils.raphaelGetTextDetail(paper, text, x, y, fontSize, maxWidth);\r\n        t = paper.text(textObj.x, textObj.y, textObj.textStr);\r\n        t.attr(\"font-size\", fontSize);\r\n        return t;\r\n    }\r\n\r\n    /*this.addRaphaelTextPrint = function(paper, text, x, y, maxWidth){\r\n        //var set = paper.set();\r\n\r\n        var textObj = getTextDetail(paper, text, x, y, maxWidth);\r\n        //t = paper.text(textObj.x, textObj.y, textObj.textStr);\r\n        t = paper.print(textObj.x, textObj.y, text, paper.getFont('Arial'), 14);\r\n        return t;\r\n    }*/\r\n    \r\n//    var fileObj = {\r\n//                type: 'script',\r\n//                url: langPath+'content_'+LaunchConfig.course.code+'_'+languageConfig.languages[currentLanguage].code+'.js',\r\n//                success: function(){\r\n//                    self.langXML = contentData; // contentData is the variable in the content.js file\r\n//                    xmlLangLoadComplete();\r\n//                }, \r\n//                error: function(){\r\n//                    loadCompressedXML = false;\r\n//                    loadLanguageXML(lang);    \r\n//                }\r\n//            }\r\n    \r\n    this.loadFile = function(fileObj){\r\n        var element = document.createElement(fileObj.type);\r\n        \r\n        element.onload = element.onreadystatechange = function () {\r\n            // our file has loaded\r\n\r\n            if (!this.readyState || this.readyState == 'complete' || this.readyState == 'loaded'){\r\n                //if (fileArray.length){\r\n                    // load the next file in fileArray \r\n                //    initialiser.loadResource();\r\n                //}\r\n                //console.log('SUCCESS')\r\n                fileObj.success();\r\n            }\r\n        }\r\n        element.onerror = function () {\r\n            console.log('ERROR');\r\n            fileObj.error();\r\n        }\r\n        \r\n        if (fileObj.type == 'link') {\r\n            // if a link, its a css file we're adding\r\n//            var head = $(\"head > link\");\r\n            var head = window.document.head || window.document.getElementsByTagName(\"head\")[0];\r\n            element.href = fileObj.url;\r\n            element.rel = \"stylesheet\";\r\n            head.appendChild(element);       \r\n        } else {\r\n            // if a script, its a minified js file we're adding\r\n            element.src = fileObj.url;\r\n            document.documentElement.appendChild(element);        \r\n        }\r\n    }\r\n\r\n    this.matchElementWidths = function($els, breakPointsToAvoidArray){\r\n        if (breakPointsToAvoidArray == undefined){\r\n            breakPointsToAvoidArray = [];\r\n        } else {\r\n            breakPointsToAvoidArray = Array.isArray(breakPointsToAvoidArray) ? breakPointsToAvoidArray : [breakPointsToAvoidArray];\r\n        }\r\n        var maxWidth = 0;\r\n        $els.css({width: 'auto'});\r\n        if (breakPointsToAvoidArray.indexOf(responsiveUtils.getCurrentViewport()) == -1){\r\n            $els.filter(':visible').each(function(){\r\n                maxWidth = Math.max(maxWidth, $(this).outerWidth());  \r\n            });\r\n            \r\n            $els.css({width: maxWidth});\r\n        }\r\n    }\r\n    \r\n    this.matchElementHeights = function($els, breakPointsToAvoidArray, includeMargin){\r\n        includeMargin = includeMargin || false;\r\n        if (breakPointsToAvoidArray == undefined){\r\n            breakPointsToAvoidArray = [];\r\n        } else {\r\n            breakPointsToAvoidArray = Array.isArray(breakPointsToAvoidArray) ? breakPointsToAvoidArray : [breakPointsToAvoidArray];\r\n        }\r\n        var maxHeight = 0;\r\n        $els.css({height: 'auto'});\r\n        if (breakPointsToAvoidArray.indexOf(responsiveUtils.getCurrentViewport()) == -1){\r\n            $els.filter(':visible').each(function(){\r\n                maxHeight = Math.max(maxHeight, $(this).outerHeight(includeMargin));  \r\n            });\r\n            \r\n            $els.css({height: maxHeight});\r\n        }\r\n    }\r\n\r\n    this.getOuterHeightAsFloat = function(el, includeMargin){\r\n        console.log(el);\r\n        if (el instanceof jQuery){\r\n            el = el[0];\r\n        }\r\n        if (el == undefined){\r\n            return 0;\r\n        }\r\n        var computedStyle = window.getComputedStyle(el);\r\n        var outerHeight = parseFloat(computedStyle.height);\r\n        if (includeMargin){\r\n            outerHeight += parseFloat(computedStyle.marginTop) + parseFloat(computedStyle.marginBottom);\r\n        }\r\n        return outerHeight;\r\n    }\r\n\r\n    this.onClickOpenLink = function(e){\r\n        // as e.target may not be element with href, find the element and get the href\r\n        utils.openLink($(e.target).closest('[href]').attr('href'));\r\n        e.preventDefault();\r\n    }\r\n\r\n    this.openLink = function(url){\r\n        if (url.toLowerCase().indexOf('mailto:') == 0){\r\n            // mailto link - open in _self\r\n            window.open(url, '_self');\r\n        } else {\r\n            if (courseConfig.externalLinks.window){\r\n                // get window name\r\n                var windowName = 'linkWindow';\r\n                // if unique window name per resource?\r\n                if (courseConfig.externalLinks.unique){\r\n                    // create a uid for the window - use filename and remove special characters\r\n                    var uid = url.replace(/^.*[\\\\\\/]/, '').replace(/[^\\w]/g, '').toLowerCase();\r\n                    windowName = 'link-'+uid+'Window';\r\n                }\r\n                console.log('Utility:openLink '+url+' - '+windowName);\r\n\r\n                var screenWidth = screen.availWidth,\r\n                    screenHeight = screen.availHeight;\r\n\r\n                var propertiesArr = courseConfig.externalLinks.properties.split(',');\r\n\r\n                for (var i = 0; i < propertiesArr.length; i++){\r\n                    var propertyArr = propertiesArr[i].split('=');\r\n                    var value = propertyArr[1];\r\n                    if (value.indexOf('%') != -1){\r\n                        // percentages aren't supported so let's calculate if they've been set in the config\r\n                        var perc = parseInt(value.split('%').join(''));\r\n                        \r\n                        switch (propertyArr[0]){\r\n                            case 'width':\r\n                            case 'left':\r\n                            case 'screenX':\r\n                                value = Math.round(screenWidth*(perc/100));\r\n                                break;\r\n                            case 'height':\r\n                            case 'top':\r\n                            case 'screenY':\r\n                                value = Math.round(screenHeight*(perc/100));\r\n                                break;\r\n                            default:\r\n                                break;\r\n                        }\r\n                        propertyArr[1] = value;\r\n                        propertiesArr[i] = propertyArr.join('=');\r\n                    }\r\n                    // var tmp;\r\n                    // if (propertiesArr[i].indexOf('width=') == 0){\r\n                    //     tmp = propertiesArr[i].split('width=');\r\n                    //     if (tmp[1].indexOf('%')){\r\n                    //         var perc = tmp[1].split('%').join('')\r\n                    //     }\r\n                    // }\r\n                }\r\n                var windowProperties = propertiesArr.join(',');\r\n                console.log('windowProperties', windowProperties);\r\n                // let's try opening in new window - not tab\r\n                window[windowName] = window.open(url, windowName, windowProperties).focus();\r\n            } else {\r\n                window.open(url);\r\n            }\r\n        }\r\n    }\r\n\r\n    this.fitTextToElements = function($els, minFontSize){\r\n        var minFontSize = (minFontSize || 12);\r\n        var fontSize = 1000;\r\n        var sizeAdjusted = false;\r\n\r\n        $els.each(function(){\r\n            var $el = $(this);\r\n                \r\n            if ($el[0].scrollWidth > 0){\r\n                var cssTransitions = $el.css(['transitionDuration', 'transitionDelay'])\r\n                // temporarily remove any CSS animation\r\n                $el.css({'transitionDuration': '0s', 'transitionDelay': '0s'});\r\n                \r\n\r\n                // remove any inline font styles\r\n                $el.attr('style', $el.attr('style').replace(/font-size:[^;]+/g, ''));\r\n\r\n                var thisFontSize = parseInt($el.css('font-size'));\r\n                // find inner text element\r\n                var $textEl = $el.contents().add().filter(function() {\r\n                        return $(this).text() != '';\r\n                    });\r\n                while ($textEl[0].scrollWidth == 0 || $textEl.prop('tagName') == 'SPAN'){\r\n                    // some browsers calculate a span or inline elements as scrollWidth = 0 - if so use parent\r\n                    $textEl = $textEl.parent();\r\n                }\r\n                //console.log('fitTextToElements', $textEl[0].scrollWidth, $el.width(), thisFontSize);\r\n                while ($textEl[0].scrollWidth > $el.width() && thisFontSize > minFontSize){\r\n                    //console.log('fitTextToElements', $textEl[0].scrollWidth, $el.width(), thisFontSize);\r\n                    sizeAdjusted = true;\r\n                    $el.css('font-size', (--thisFontSize)+'px');\r\n                }\r\n                \r\n                $el.attr('style', $el.attr('style').replace(/transition-duration:[^;]+/g, '').replace(/transition-delay:[^;]+/g, ''));\r\n                $el.css(cssTransitions);\r\n                \r\n            }\r\n            fontSize = Math.min(parseInt($el.css('font-size')), fontSize);\r\n        });\r\n        if (sizeAdjusted){\r\n            $els.css('font-size', fontSize+'px');\r\n        }\r\n    }\r\n\r\n    this.calculateReadTime = function(str){\r\n\r\n        var wpm = 200;\r\n        var wps = wpm/60;\r\n        var words = str.trim().split(/\\s+/).length;\r\n        var time = Math.ceil(words / wps);\r\n\r\n        console.log('calculateReadTime', words, time)\r\n\r\n        if (languageConfig.languages[currentLanguage].readspeed){\r\n            if (languageConfig.languages[currentLanguage].readspeed == 'char'){\r\n                var chars = str.trim().length;\r\n                time = Math.ceil(chars / wps);\r\n            }\r\n        }\r\n        return time;\r\n    }\r\n\r\n    // convert XML attribute to JSON\r\n    this.xmlAttributeToJSON = function(attr){\r\n        try {            \r\n            var jsonObj = JSON.parse(attr);\r\n            return jsonObj;\r\n        } catch (e){\r\n            // if there's an error, it's probably because the attribute contains single quotes - convert to double quotes and try again\r\n            if (attr.indexOf(\"'\") != -1){\r\n                attr = attr.replace(/'/g, '\"');\r\n                return this.xmlAttributeToJSON(attr);\r\n            } else {\r\n                return {};\r\n            }\r\n        }        \r\n    }\r\n\r\n    this.getUrlExtension = function (url) {\r\n        const lastDotIndex = url.lastIndexOf('.');\r\n        if (lastDotIndex !== -1) {\r\n            return url.substring(lastDotIndex+1).toLowerCase();\r\n        } else {\r\n            return '';\r\n        }\r\n    }\r\n}","var HTMLUtility = function() {\r\n    var self = this;\r\n\r\n    this.alphabetArray = 'abcdefghijklmnopqrstuvwxyz'.split('');\r\n    \r\n    this.recurseData = recurseData;\r\n    this.recurseXML = recurseXML;\r\n    this.getStyles = getStyles;\r\n    this.getCSSString = getCSSString;    \r\n    this.getHTMLText = getHTMLText;\r\n    this.extractHTML = extractHTML;\r\n    this.generateHTML = generateHTML;\r\n    this.updateTextVariables = updateTextVariables;\r\n\r\n    this.stylesObject = {\r\n        position: 'position',\r\n        right: 'right',\r\n        left: 'left',\r\n        bottom: 'bottom',\r\n        top: 'top',\r\n        width: 'width',\r\n        minWidth: 'min-width',\r\n        maxWidth: 'max-width',\r\n        height: 'height',\r\n        minHeight: 'min-height',\r\n        maxHeight: 'max-height',\r\n        color: 'color',\r\n        // bgColor: 'bgColor',\r\n        padding: 'padding',\r\n        paddingTop: 'padding-top',\r\n        paddingBottom: 'padding-bottom',\r\n        paddingLeft: 'padding-left',\r\n        paddingRight: 'padding-right',\r\n        margin: 'margin',\r\n        marginTop: 'margin-top',\r\n        marginBottom: 'margin-bottom',\r\n        marginLeft: 'margin-left',\r\n        marginRight: 'margin-right',\r\n        fontSize: 'font-size',\r\n        fontWeight: 'font-weight',\r\n        lineHeight: 'line-height',\r\n        textAlign: 'text-align',\r\n        border: 'border',\r\n        borderTop: 'border-top',\r\n        borderBottom: 'border-bottom',\r\n        borderLeft: 'border-left',\r\n        borderRight: 'border-right',\r\n        zIndex: 'z-index',\r\n        display: 'display',\r\n        float: 'float',\r\n        backgroundColor: 'background-color',\r\n        backgroundImage: 'background-image',\r\n        backgroundRepeat: 'background-repeat',\r\n        backgroundPosition: 'background-position',\r\n        backgroundSize: 'background-size',\r\n        backgroundAttachment: 'background-attachment',\r\n        bkgColor: 'background-color',\r\n        bkgImage: 'background-image',\r\n        bkgRepeat: 'background-repeat',\r\n        bkgPosition: 'background-position',\r\n        bkgSize: 'background-size',\r\n        bkgAttachment: 'background-attachment',\r\n    }\r\n\r\n    \r\n    //used by json\r\n    function recurseData(node, customNodeAction){\r\n        //console.log('recurseData', node);\r\n        \r\n        var customNodeActionTerm = '';\r\n        if (customNodeAction){\r\n            customNodeActionTerm = customNodeAction.term;\r\n        }\r\n        \r\n        var htmlStr = '';\r\n\r\n        //for (var i = 0; i < node.length; i++){\r\n        for (var x in node){\r\n            switch(x){\r\n                case 'sections':\r\n                case 'rows':\r\n                    // either a row or container\r\n                    var nodeName = '';\r\n\r\n                    for (var i = 0; i < node[x].length; i++){\r\n\r\n\r\n\r\n                        if (x == 'rows'){\r\n                            nodeName = 'row';\r\n                        } else if (x == 'sections'){\r\n//                                console.log('fullwidth', node[x][i] )\r\n                            if (node[x][i].fullwidth == \"true\"){\r\n                                nodeName = 'container-fluid';                                \r\n                            } else {\r\n                                nodeName = 'container';\r\n                            }\r\n                        }\r\n                        if (x == 'sections'){\r\n                            htmlStr += '<div class=\"section'+htmlUtils.getClasses(node[x][i])+'\" '+htmlUtils.getAttributes(node[x][i])+'>';\r\n                        }\r\n                            htmlStr += '<div class=\"'+nodeName+'\">';\r\n                                htmlStr += htmlUtils.recurseData(node[x][i]);\r\n                            htmlStr += '</div>';\r\n                        if (x == 'sections'){\r\n                            htmlStr += '</div>';\r\n                        }\r\n                    }\r\n                    break;\r\n                case 'columns':\r\n                    // need to analyse bootstrap here\r\n                    // var colsObj = responsiveUtils.getBootstrapColumnsObject(node[x]);\r\n                    // for (var i = 0; i < node[x].length; i++){\r\n                    //     var colStr = responsiveUtils.getBootstrapColumnsClassStr(colsObj, i);\r\n                    //     htmlStr += '<div class=\"'+colStr+htmlUtils.getClasses(node[x])+'\" '+htmlUtils.getAttributes(node[x])+'>';\r\n                    //     htmlStr += htmlUtils.recurseData(node[x][i]);\r\n                    //     htmlStr += '</div>';\r\n                    // }\r\n                    for (var i = 0; i < node[x].length; i++){\r\n                        var colStr = responsiveUtils.getBootstrapColumnsStrForNode(node[x]);\r\n                        htmlStr += '<div class=\"'+colStr+htmlUtils.getClasses(node[x])+'\" '+htmlUtils.getAttributes(node[x])+'>';\r\n                        htmlStr += htmlUtils.recurseData(node[x][i]);\r\n                        htmlStr += '</div>';\r\n                    }\r\n                    break;\r\n                case customNodeActionTerm:\r\n                    //console.log('components');\r\n                    for (var i = 0; i < node[x].length; i++){\r\n                        //console.log('components', node[x][i]);\r\n                        htmlStr += customNodeAction.callback(node[x][i].type, node[x][i]);\r\n                    }\r\n                    break;\r\n            }\r\n        }\r\n        \r\n        return htmlStr;\r\n    }\r\n    \r\n    function recurseXML(node, opts, customNodeAction){\r\n\r\n        // console.log('recurseXML', node);\r\n        var customNodeActionTerm = '';\r\n        if (customNodeAction){\r\n            customNodeActionTerm = customNodeAction.term;\r\n        }\r\n        \r\n        var htmlStr = '';\r\n        if (node._childorder){\r\n            if (node._childorder.length){            \r\n                for (var i = 0; i < node._childorder.length; i++){\r\n                    var closeTag = '';\r\n                    //recurseXML(self.slideObj.xmlData.container[i]);\r\n                    var nodeName = node._childorder[i].node;\r\n                    var thisNodeName = nodeName;\r\n                    var nodeData = node[nodeName][node._childorder[i].pos];\r\n                    //console.log('recurseXML', nodeName);\r\n                    // if (nodeData.anim=\"\"){\r\n                    //     // allow ability for node to kill anims of children\r\n                    //     opts.anim = false;\r\n                    // }\r\n                    \r\n                    \r\n    //                \r\n                    switch (nodeName){\r\n                        case 'transcript':\r\n                        case 'contentBackground':\r\n                        case 'instructionText':\r\n                            // don't want to check these tags\r\n                            break;\r\n                        \r\n                        case 'section':\r\n                        case 'container':\r\n                        case 'row':\r\n                            // either a row or container\r\n                            htmlStr += '<div'+htmlUtils.getID(nodeData)+' class=\"'+nodeName+htmlUtils.getClasses(nodeData, opts)+'\" '+htmlUtils.getAttributes(nodeData, opts)+'>';\r\n                            if (nodeName == 'section' || nodeName == 'container'){\r\n                                if (nodeData.fullwidth == \"true\"){\r\n                                    thisNodeName = 'container-fluid';                                \r\n                                } else {\r\n                                    thisNodeName = 'container';\r\n                                }\r\n                                //htmlStr += '<div class=\"section'+htmlUtils.getClasses(nodeData)+'\" '+htmlUtils.getAttributes(nodeData)+'>';\r\n                                htmlStr += '<div class=\"'+thisNodeName+'\">';\r\n                            } \r\n                            //closeTag = '</div>';\r\n                            htmlStr += htmlUtils.recurseXML(nodeData, opts, customNodeAction);                        \r\n                            htmlStr += '</div>';\r\n                        \r\n                            if (nodeName == 'section' || nodeName == 'container'){\r\n                                htmlStr += '</div>';\r\n                            }\r\n                            //htmlStr += '<div class=\"'+nodeName+htmlUtils.getClasses(nodeData)+'\" '+htmlUtils.getAttributes(nodeData)+'>';\r\n                            //closeTag = '</div>';\r\n                            //htmlStr += self.recurseXML(nodeData);\r\n                            break;\r\n                            \r\n                        case 'column':\r\n                        case 'col':\r\n                            // need to analyse bootstrap here\r\n                            // var colsObj = responsiveUtils.getBootstrapColumnsObject(node.column);\r\n                            // var colStr = responsiveUtils.getBootstrapColumnsClassStr(colsObj, node._childorder[i].pos);\r\n                            // nodeName is either 'column' or 'col'\r\n                            var colStr = responsiveUtils.getBootstrapColumnsStrForNode(node[nodeName][node._childorder[i].pos]);\r\n    //                        console.log(colStr);\r\n                            htmlStr += '<div'+htmlUtils.getID(nodeData)+' class=\"'+colStr+htmlUtils.getClasses(nodeData, opts)+'\" '+htmlUtils.getAttributes(nodeData, opts)+'>';\r\n                            //closeTag = '</div>';\r\n                            htmlStr += htmlUtils.recurseXML(nodeData, opts, customNodeAction);\r\n                            htmlStr += '</div>';\r\n                            break;\r\n                            \r\n                        case customNodeActionTerm:\r\n                            //console.log('customNodeActionTerm')\r\n                            htmlStr += customNodeAction.callback(nodeData.type, nodeData);\r\n                            break;\r\n                        \r\n                        case 'text':\r\n                            htmlStr += htmlUtils.recurseXML(nodeData, opts, customNodeAction);     \r\n                            break\r\n                        //case 'component':\r\n                            //console.log('createComponent', nodeName, nodeData.type)\r\n                            //htmlStr += self.createComponent(nodeData.type, nodeData);\r\n                            //break;\r\n                        default:\r\n                            //console.log('generateHTML');\r\n                            htmlStr += htmlUtils.generateHTML(nodeName, nodeData, opts, customNodeAction);\r\n                            break;\r\n                    }\r\n                    //htmlStr += closeTag;\r\n                    //}\r\n                }\r\n            } else {\r\n                htmlStr += htmlUtils.getHTMLText(node, opts);                 \r\n            }\r\n        }\r\n        return htmlStr;\r\n    } \r\n    \r\n    function getHTMLText(textData, opts){\r\n        var text = '';\r\n        // console.log('getHTMLText', textData, textData.Text)\r\n        if (textData.Text){\r\n            text = '<span data-dbid=\"'+textData.dbid+'\"';\r\n            if (textData.xmlPath && liveEditConfig.enabled){\r\n                text += ' data-xmlref=\"'+textData.xmlPath+'\"';\r\n            }\r\n            text += '>'+checkTextForVariables(textData.Text)+'</span>';\r\n        } else {\r\n            text = htmlUtils.extractHTML(textData, opts);\r\n        }\r\n        return text;\r\n    }\r\n    \r\n    function checkTextForVariables(str){\r\n\r\n        //[svg\r\n        str = str.replace(/\\[svg=\"[^\"]+\"\\]/gi, function(extract){\r\n            //console.log('SVG: ', extract.replace('[svg=\"','').replace('\"]',''));\r\n            return '<span class=\"inline-svg\">'+svgUtils.createSVG(extract.replace('[svg=\"','').replace('\"]',''), 'span')+'</span>';\r\n        });\r\n\r\n        str = str.replace(/\\$\\{[^]+?\\}/gi, function(extract){\r\n            return '<span class=\"textVariable\" data-var=\"'+extract+'\">'+utils.evaluateVariable(extract)+'</span>';\r\n        });\r\n\r\n        // get any HTML links\r\n        str = str.replace(/href=\"(.*?)\"/g, function(m, $1) {\r\n            if ($1.indexOf ('#') != 0 && $1.indexOf ('javascript') != 0){\r\n                // replace link where not used with an id starting # or javascript\r\n                var link = courseData.getLink($1);\r\n                return 'href=\"'+link+'\" onclick=\"utils.onClickOpenLink(event)\"';\r\n            } else {\r\n                return 'href=\"'+$1+'\"';\r\n            }\r\n\r\n            //return 'href=\"' + courseData.getLink($1) + '\"';\r\n        });\r\n\r\n        return str;\r\n    }\r\n    \r\n    function updateTextVariables(){\r\n        $('.textVariable').each(function(){\r\n            $(this).text(utils.evaluateVariable($(this).data('var')))\r\n        });\r\n    }\r\n    \r\n    function extractHTML(node, opts){\r\n        var htmlStr = '';\r\n        if (!node._childorder){\r\n            return htmlUtils.generateHTML('', node, opts);\r\n            return '';\r\n        }\r\n        for (var i = 0; i < node._childorder.length; i++){\r\n            var nodeName = node._childorder[i].node;\r\n            var nodeData = node[nodeName][node._childorder[i].pos];\r\n            \r\n            htmlStr += htmlUtils.generateHTML(nodeName, nodeData, opts);\r\n        }\r\n        return htmlStr;\r\n    }\r\n    \r\n    function generateHTML(nodeName, nodeData, opts, customNodeAction){\r\n        var htmlStr = '';\r\n        var idStr = htmlUtils.getID(nodeData);\r\n        \r\n        var classStr = htmlUtils.getClasses(nodeData, opts);\r\n        if (classStr != ''){\r\n            if (nodeName == ''){\r\n                nodeName = 'span';\r\n            }\r\n            classStr = ' class=\"'+classStr+'\"';\r\n        }\r\n        \r\n        if (nodeName){\r\n            htmlStr += '<'+nodeName+idStr+classStr+' '+htmlUtils.getAttributes(nodeData, opts);\r\n        }\r\n        switch (nodeName){\r\n            case 'br':\r\n            case 'hr':\r\n                if (nodeName){\r\n                    //self closing tags\r\n                    htmlStr += ' />';\r\n                }\r\n                break;\r\n            default:\r\n                if (nodeName){\r\n                    htmlStr += '>';\r\n                }\r\n                var injectionFound = false;\r\n                if (nodeData.useModuleTitle){\r\n                    // if using the module title we can get title from the module object\r\n                    var module = courseData.data.module[navigationController.moduleIndex];\r\n                    if (module.title){\r\n                        htmlStr += getHTMLText(module.title[0], opts);\r\n                        injectionFound = true;\r\n                    }\r\n                } else if (nodeData.usePageTitle){\r\n                    // if using the page title we can get title from the page object\r\n                    var page = courseData.data.module[navigationController.moduleIndex].page[navigationController.pageIndex];\r\n                    if (page.title){\r\n                        htmlStr += getHTMLText(page.title[0], opts);\r\n                        injectionFound = true;\r\n                    }\r\n                } else if (nodeData.useSlideTitle){\r\n                    // if using the slide title we can get title from the slide object\r\n                    var slide = contentController.getFirstUnloadedSlide();\r\n                    if (slide.data.title){\r\n                        htmlStr += getHTMLText(slide.data.title[0], opts);\r\n                        injectionFound = true;\r\n                    }\r\n                } else if (nodeData.inject){\r\n\r\n                    try {\r\n                        if (nodeData.inject.indexOf('courseData') == -1){\r\n                            // inject from shared                            \r\n                            htmlStr += recurseXML(_.get(courseData.data.shared[0], nodeData.inject), opts, customNodeAction);\r\n                        } else {\r\n                            // inject from elsewhere\r\n                            htmlStr += recurseXML(_.get(window, nodeData.inject), opts, customNodeAction);\r\n                        }\r\n\r\n                        injectionFound = true;\r\n                    } catch (e){\r\n                        console.error('generateHTML injection failed', nodeData.inject, e);\r\n                    }\r\n                }\r\n                if (nodeData._childorder && !injectionFound){\r\n                    if (nodeData._childorder.length){\r\n                        if (courseConfig.dataFormat == 'xml'){\r\n                            htmlStr += htmlUtils.recurseXML(nodeData, opts, customNodeAction);\r\n                        } else {\r\n                            htmlStr += htmlUtils.extractHTML(nodeData, opts);\r\n                        }\r\n                    } else {\r\n                        htmlStr += getHTMLText(nodeData, opts);\r\n                    }\r\n                }\r\n                if (nodeName){\r\n                    htmlStr += '</'+nodeName+'>';\r\n                }\r\n            break;\r\n        }\r\n        return htmlStr;\r\n    }\r\n    \r\n    \r\n    function getCSSString(_xml){\r\n        //console.log(_xml)\r\n        var stylestr = getStyles(_xml);\r\n        if (stylestr != \"\"){\r\n            stylestr = ' style=\"'+stylestr+'\"';\r\n        }\r\n        return stylestr;\r\n    } \r\n    /**\r\n     * @function getCSSString\r\n     * @description This function is used to generate the CSS style from JSON object. \r\n     * @param _xml {JSON object}\r\n     * @returns stylestr {String}\r\n     */\r\n    function getStyles(_xml){\r\n        var stylestr=\"\";\r\n\r\n        if (_xml.style){\r\n            // allow xml style attribute\r\n            stylestr += _xml.style;\r\n        }\r\n        for (var x in self.stylesObject){\r\n            if(_xml[x]!=null){\r\n                if (x == 'backgroundImage' || x == 'bkgImage'){\r\n                    stylestr += self.stylesObject[x]+': url('+utils.getImagePath(_xml[x])+'); ';\r\n                } else {\r\n                    stylestr += self.stylesObject[x]+':'+_xml[x]+'; ';\r\n                }\r\n            }\r\n        }\r\n\r\n        return stylestr;\r\n    }\r\n\r\n    this.getStyle = function(){\r\n        \r\n    }\r\n    \r\n    this.getID = function(nodeData){\r\n        var idStr = '';\r\n        if (nodeData.id){\r\n            idStr = ' id=\"'+nodeData.id+'\"';\r\n        }\r\n        return idStr;\r\n    }\r\n\r\n    this.getClasses = function(nodeData, opts){//, nodeName){\r\n        opts = opts || {};\r\n        //console.log('getClasses', nodeData.nodeName ? nodeData.nodeName : nodeData);//  nodeData.nodeName);\r\n        var htmlStr = '';\r\n        // get animation classes\r\n        var anim = nodeData['anim'];\r\n        var rolesArr = [];\r\n        if (nodeData['roles']) {\r\n            rolesArr = nodeData['roles'].split(',');\r\n            for (var i = 0; i < rolesArr.length; i++){\r\n                htmlStr += ' role'+parseInt(rolesArr[i]);\r\n            }\r\n        } \r\n        \r\n        // get classes\r\n        if (nodeData['class']){\r\n            var classes = nodeData['class'];\r\n            if (anim != 'none'){\r\n                // pulse effects use same css as anims so we need to delay addition of classes\r\n                var classArray = utils.getWordsByFragment(classes, 'pulse');\r\n                if (classArray != null){\r\n                    for (var i = 0; i< classArray.length; i++){\r\n                        classArray[i] = 'suppress-'+classArray[i];\r\n                    }\r\n                    classes = utils.removeWordsByFragment(classes, 'pulse')+' '+classArray.join(' ');\r\n                }\r\n            }\r\n            htmlStr += ' '+classes;\r\n        }\r\n        \r\n        // showIf conditions\r\n        if (nodeData['showIf']){\r\n            if (!utils.checkConditionStr(nodeData['showIf'])){\r\n                htmlStr += ' hidden conditional-hidden';\r\n            }\r\n        }\r\n\r\n         // hideIf conditions\r\n         if (nodeData['hideIf']){\r\n            console.log('hideIf', nodeData['hideIf'], utils.checkConditionStr(nodeData['hideIf']))\r\n            if (utils.checkConditionStr(nodeData['hideIf'])){\r\n                htmlStr += ' hidden conditional-hidden';\r\n            }\r\n        }\r\n        \r\n        //this.getDeviceSpecificClasses(nodeData)\r\n        for (var x in responsiveUtils.getBreakpoints()){\r\n            if (nodeData['class_'+x] || nodeData['class_not_'+x]){\r\n                htmlStr += ' device-specific-class';\r\n                break;\r\n            }\r\n            if (nodeData['style_'+x] || nodeData['style_not_'+x]){\r\n                htmlStr += ' device-specific-style';\r\n                break;\r\n            }\r\n        }\r\n        \r\n        //console.log(nodeData.type, anim)\r\n        if (anim){\r\n            if (anim != 'none'){\r\n                htmlStr += ' anim '+anim;\r\n            }\r\n        } else if (nodeData.nodeName){\r\n            if (opts.anim == false){\r\n                // dont animate\r\n            } else {\r\n                var defaultAnim = animConfig.presets[nodeData.nodeName];\r\n                if (defaultAnim){\r\n                    htmlStr += ' anim '+defaultAnim;\r\n                }\r\n            }\r\n        }\r\n        \r\n        \r\n        return htmlStr;\r\n    }\r\n    \r\n    this.getDeviceSpecificAttributes = function(nodeData){\r\n        var htmlStr = '';\r\n        var classesObj = {};\r\n        var stylesObj = {};\r\n\r\n        for (var x in responsiveUtils.getBreakpoints()){\r\n            classesObj[x] = [];\r\n            stylesObj[x] = [];\r\n        }\r\n        \r\n        var found = false;\r\n        for (var x in responsiveUtils.getBreakpoints()){\r\n            // get Device specific Classes\r\n            if (nodeData['class_'+x]){\r\n                found = true;\r\n            //console.log('getDeviceSpecificAttributes', x);\r\n                classesObj[x] = classesObj[x].concat(nodeData['class_'+x].split(' '));\r\n            }\r\n            \r\n            if (nodeData['class_not_'+x]){\r\n                found = true;\r\n                for (var y in responsiveUtils.getBreakpoints()){\r\n                    if (x != y){\r\n                        classesObj[y] = classesObj[y].concat(nodeData['class_not_'+x].split(' '));\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        if (found){\r\n            for (var x in responsiveUtils.getBreakpoints()){\r\n                if (classesObj[x].length){\r\n                    htmlStr += 'data-class-'+x+'=\"'+classesObj[x].join(' ')+'\" ';\r\n                }\r\n                \r\n            }\r\n            //console.log('getDeviceSpecificAttributes', classesObj, htmlStr);\r\n        }\r\n\r\n        // now get device specific styles\r\n        found = false;\r\n        for (var x in responsiveUtils.getBreakpoints()){\r\n            // get Device specific Classes\r\n            if (nodeData['style_'+x]){\r\n                found = true;\r\n                classesObj[x] = classesObj[x].concat(nodeData['style_'+x].split(' '));\r\n            }\r\n            \r\n            if (nodeData['style_not_'+x]){\r\n                found = true;\r\n                for (var y in responsiveUtils.getBreakpoints()){\r\n                    if (x != y){\r\n                        classesObj[y] = classesObj[y].concat(nodeData['style_not_'+x].split(' '));\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        if (found){\r\n            for (var x in responsiveUtils.getBreakpoints()){\r\n                if (classesObj[x].length){\r\n                    htmlStr += 'data-style-'+x+'=\"'+classesObj[x].join(' ')+'\" ';\r\n                }\r\n                \r\n            }\r\n            //console.log('getDeviceSpecificAttributes', classesObj, htmlStr);\r\n        }\r\n        \r\n        \r\n        return htmlStr;\r\n    }\r\n    \r\n    this.updateDeviceSpecificClasses = function(){\r\n        // console.log('updateDeviceSpecificClasses');\r\n        var $elements = $('.device-specific-class');\r\n        $elements.each(function(){\r\n            var $el = $(this);\r\n            var classes = '';\r\n            for (var x in responsiveUtils.getBreakpoints()){\r\n                var data = $el.data('class-'+x);\r\n                if (data){\r\n                    classes += data+' ';\r\n                }\r\n            }\r\n            // console.log('updateDeviceSpecificClasses', classes);\r\n            if (classes != ''){\r\n                $el.removeClass(classes);\r\n            }\r\n            \r\n            var data = $el.data('class-'+responsiveUtils.getCurrentViewport());\r\n            if (data){\r\n                $el.addClass(data);\r\n            }\r\n        });\r\n    }\r\n    \r\n    // TODO - need to get the default styles to remain\r\n    this.updateDeviceSpecificStyles = function(){\r\n        var $elements = $('.device-specific-style');\r\n        $elements.each(function(){\r\n            var $el = $(this);\r\n            // get current styles\r\n            // var styles = $el.attr('style');\r\n            \r\n            // get existing styles\r\n            var stylesObj = self.stylesToObject($el.attr('style'));\r\n            console.log('stylesObj', stylesObj);\r\n            // remove any added by other breakpoint\r\n            for (var x in responsiveUtils.getBreakpoints()){\r\n                var breakpointStylesObj = self.stylesToObject($el.data('style-'+x));\r\n                // console.log('breakpointStylesObj', breakpointStylesObj);\r\n            }\r\n            //console.log('updateDeviceSpecificClasses', classes);\r\n            // if (classes != ''){\r\n            //     $el.removeClass(classes);\r\n            // }\r\n            \r\n            var data = $el.data('style-'+responsiveUtils.getCurrentViewport());\r\n            if (data){\r\n                // $el.attr('style', data);\r\n            }\r\n        });\r\n    }\r\n\r\n    this.stylesToObject = function(str){\r\n        // https://stackoverflow.com/questions/9518956/javascript-convert-css-style-string-into-js-object\r\n        var regex = /([\\w-]*)\\s*:\\s*([^;]*)/g;\r\n        var match, \r\n            stylesObj={};\r\n        while(match=regex.exec(str)) stylesObj[match[1]] = match[2].trim();\r\n        // console.log('styles', stylesObj)\r\n        return stylesObj;\r\n    }\r\n    \r\n    \r\n    this.getAttributes = function(nodeData, opts){\r\n        var htmlStr = htmlUtils.getCSSString(nodeData);\r\n        \r\n        // get data attributes\r\n        if (nodeData.animDelay){\r\n            htmlStr += ' data-anim-delay=\"'+nodeData.animDelay+'\"';\r\n        }\r\n\r\n        // add aria attributes\r\n        if (nodeData.ariaHidden){\r\n            htmlStr += ' aria-hidden=\"'+(nodeData.ariaHidden == 'true' ? 'true' : 'false')+'\"';\r\n        }\r\n        \r\n        // get getDeviceSpecificClasses \r\n        htmlStr += ' '+this.getDeviceSpecificAttributes(nodeData);\r\n        \r\n        return htmlStr;\r\n    }  \r\n    \r\n    this.removeClasses = function($el, str){\r\n        // remove any classes\r\n        $el.removeClass(utils.getWordsByFragment($el[0].className, str).join(' '));\r\n    }\r\n\r\n    this.addAnimationDelayCSS = function($el, delay){\r\n        var secondsDelay = delay/1000+'s';\r\n        $el.css({\r\n            '-webkit-animation-delay': secondsDelay,\r\n            '-moz-animation-delay': secondsDelay,\r\n            '-o-animation-delay': secondsDelay,\r\n            'animation-delay': secondsDelay\r\n        })\r\n\r\n    }\r\n\r\n\tthis.replaceClassesBasedOnTextDirection = function($el, classesObj){\r\n        classesObj = classesObj || {\r\n            'left': 'right', \r\n            'right': 'left', \r\n            'top-left': 'top-right', \r\n            'top-right': 'top-left', \r\n            'bottom-left': 'bottom-right', \r\n            'bottom-right': 'bottom-left', \r\n            'left-top': 'right-top', \r\n            'right-top': 'left-top'\r\n        };\r\n        \r\n        $el.each(function(){\r\n            var $this = $(this);\r\n            var classesChangedArr = [];\r\n            for (cl in classesObj){\r\n                var oldClass = cl;\r\n                var newClass = classesObj[cl];\r\n                if (classesChangedArr.indexOf(oldClass) == -1){\r\n                    // replace device breakpoint specific classes\r\n                    for (var x in responsiveUtils.getBreakpoints()){\r\n                        var hasDeviceSpecificClass = false;\r\n                        // if $el has device specific classes e.g. class_xs = 'right', add to $el data \r\n                        if ($this.data('class-'+x) == oldClass){\r\n                            hasDeviceSpecificClass = true\r\n                            $this.data('class-'+x, newClass);\r\n                            if (classesChangedArr.indexOf(newClass) == -1){\r\n                                classesChangedArr.push(newClass);\r\n                            }\r\n                        }\r\n                        \r\n                    }\r\n                    // if $el DOES NOT have device specific classes, change the class\r\n                    if (!hasDeviceSpecificClass && $this.hasClass(oldClass)){\r\n                        $this.removeClass(oldClass);\r\n                        $this.addClass(newClass);\r\n                        if (classesChangedArr.indexOf(newClass) == -1){\r\n                            classesChangedArr.push(newClass);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        });\r\n\r\n        // if ($el.hasClass(oldClass)){\r\n        //     $el.removeClass(oldClass).addClass(newClass);\r\n        // }\r\n        // // replace device breakpoint specific classes\r\n        // for(var x in responsiveUtils.getBreakpoints()){\r\n        //     if ($el.attr('data-class-'+x) == oldClass){\r\n        //         $el.attr('data-class-'+x, newClass);\r\n        //     }\r\n        // }\r\n    }\r\n\r\n    this.findAnims = function($el, selector){\r\n        selector = selector || '';\r\n        // console.log($el.find('.anim'+selector))\r\n\r\n        // the classes:\r\n        // '.not-animated' will stop self and any children anims being animated\r\n        // '.children-not-animated' will stop any children anims being animated\r\n        var $anims = [];\r\n        if ($el){\r\n            $anims = $el.find('.anim'+selector).not('.rolehidden').filter(function(){\r\n                return ($(this).closest('.not-animated').length === 0 && $(this).parents('.children-not-animated').length === 0);\r\n            });\r\n        }\r\n        // console.log($anims)\r\n        return $anims;\r\n    }\r\n}","var ResponsiveUtility = function() {\r\n    var self = this;\r\n\r\n    this.BOOTSTRAP_VERSION = 3;\r\n    this.BOOTSTRAP_EXACT_VERSION = 3;\r\n\r\n    var viewport,\r\n        currentBreakpoint = '',\r\n        previousBreakpoint = '';\r\n\r\n    this.hiddenClassesToCheck = [];\r\n\r\n    this.init = function(_viewport){\r\n        viewport = _viewport;\r\n        // console.log('ResponsiveUtility::init', viewport);\r\n        \r\n        if (this.BOOTSTRAP_VERSION == 4){\r\n\r\n            var bootstrap4 = {\r\n                'xs': $('<div class=\"device-xs visible-xs visible-xs-block\"></div>'),\r\n                'sm': $('<div class=\"device-sm visible-sm visible-sm-block\"></div>'),\r\n                'md': $('<div class=\"device-md visible-md visible-md-block\"></div>'),\r\n                'lg': $('<div class=\"device-lg visible-lg visible-lg-block\"></div>'),\r\n                'xlg': $('<div class=\"device-xlg visible-xlg visible-xlg-block\"></div>')\r\n            };\r\n        \r\n            viewport.use('bootstrap4', bootstrap4);\r\n        }\r\n\r\n        self.breakpoints = self.getBreakpoints();\r\n        self.update();\r\n\r\n        // previousBreakpoint = currentBreakpoint;\r\n        // currentBreakpoint = viewport.current();\r\n\r\n        // self.getHiddenClasses();\r\n\r\n        $(window).resize(\r\n            viewport.changed(function() {\r\n                // fire event when breakpoint changes\r\n                if (viewport.current() != currentBreakpoint){\r\n                    self.update();\r\n                    // console.log('ResponsiveUtility::DEVICE_BREAKPOINT_CHANGED: ', previousBreakpoint, currentBreakpoint);\r\n                    //trigger event\r\n                    $(document).trigger(courseEvent.DEVICE_BREAKPOINT_CHANGED);\r\n                }\r\n            })\r\n        );\r\n        \r\n        $(window).resize(function(){\r\n            self.resizeOverspillColumns();\r\n        });\r\n\r\n        $(document).on(courseEvent.SLIDE_SHOW_CONTENT, function(){\r\n            \r\n            // console.log('ResponsiveUtility::SLIDE_SHOW_CONTENT');\r\n            self.resizeOverspillColumns();\r\n        });\r\n    }\r\n\r\n    this.update = function(){\r\n        // update previous breakpoint and current\r\n        previousBreakpoint = currentBreakpoint;\r\n        currentBreakpoint = viewport.current();\r\n        // apply classes to body\r\n        $('body').removeClass('device-'+previousBreakpoint);\r\n        $('body').addClass('device-'+currentBreakpoint);\r\n\r\n        // create array of hidden classes\r\n        self.getHiddenClasses();\r\n\r\n    }\r\n    \r\n    // BOOTSTRAP\r\n    this.getBootstrapColumnsStrForNode = function(node){\r\n        var colsObj = {\r\n            offset: {\r\n                xs: [],\r\n                sm: [],\r\n                md: [],\r\n                lg: [],\r\n                xlg: []\r\n            },\r\n            cols: {\r\n                xs: [],\r\n                sm: [],\r\n                md: [],\r\n                lg: [],\r\n                xlg: []\r\n            },\r\n            classes: []\r\n        }\r\n        // console.log('ResponsiveUtility::nodeName', node.nodeName);\r\n\r\n        for (x in colsObj.cols){\r\n            // columns \r\n            // without col_ prefix\r\n            if (node[x]){\r\n                colsObj.cols[x][0] = node[x];\r\n            } \r\n            // with col_ prefix\r\n            if (node['col_'+x]){\r\n                colsObj.cols[x][0] = node['col_'+x];\r\n            } \r\n\r\n            // offsets \r\n            // without col_ prefix\r\n            if (node[x+'_offset']){\r\n                colsObj.offset[x][0] = node[x+'_offset'];\r\n            }\r\n            // with col_ prefix\r\n            if (node['col_'+x+'_offset']){\r\n                colsObj.offset[x][0] = node['col_'+x+'_offset'];\r\n            }\r\n\r\n            // bootstrap push\r\n            // without col_ prefix\r\n            if (node[x+'_push']){\r\n                colsObj.classes.push('col-'+x+'-push-'+node[x+'_push']);\r\n            }\r\n            // with col_ prefix\r\n            if (node['col_'+x+'_push']){\r\n                colsObj.classes.push('col-'+x+'-push-'+node['col_'+x+'_push']);\r\n            }\r\n\r\n            // bootstrap pull\r\n            // without col_ prefix\r\n            if (node[x+'_pull']){\r\n                colsObj.classes.push('col-'+x+'-pull-'+node[x+'_pull']);\r\n            }\r\n            // with col_ prefix\r\n            if (node['col_'+x+'_pull']){\r\n                colsObj.classes.push('col-'+x+'-pull-'+node['col_'+x+'_pull']);\r\n            }\r\n        }\r\n        return this.getBootstrapColumnsClassStr(colsObj, 0);\r\n    }\r\n\r\n    this.getBootstrapColumnsClassStr = function(colsObj, index){\r\n        var colStr = '';\r\n        for (x in colsObj.cols){\r\n            //console.log(colsObj[x], index);\r\n            if (colsObj.cols[x].length > 0){\r\n                colsObj.classes.push('col-'+x+'-'+colsObj.cols[x][index]);\r\n            }else {\r\n                if (this.BOOTSTRAP_VERSION == 3){\r\n                } else if (this.BOOTSTRAP_VERSION == 4){\r\n                    colsObj.classes.push('col');\r\n                }\r\n            }\r\n\t\t\tif (colsObj.offset[x]){\r\n\t            if (colsObj.offset[x].length > 0){\r\n\t                colsObj.classes.push('col-'+x+'-offset-'+colsObj.offset[x][index]);\r\n\t            }\r\n\t\t\t}\r\n        }\r\n        if (colsObj.classes){\r\n            colStr += colsObj.classes.join(' ');\r\n        }\r\n        return colStr;\r\n    }\r\n\r\n    this.calculateChildBootstrapColumns = function(node){\r\n        if (node.columns){\r\n            //default is columns is for sm and up\r\n            node.columns_sm = node.columns;\r\n        }\r\n        var classArray = [];\r\n        for (var x in viewport.breakpoints){\r\n            if (node['columns_'+x]){\r\n                classArray.push('col-'+x+'-'+Math.ceil(12/node['columns_'+x]));\r\n            }\r\n        }\r\n        return classArray.join(' ');\r\n    }\r\n    \r\n    this.getBreakpoints = function(){\r\n        // console.log('ResponsiveUtility::',Object.keys(viewport.breakpoints))\r\n        return viewport.breakpoints;\r\n    }\r\n\r\n    this.isBreakpoint = function(breakpoint){\r\n        // console.log('ResponsiveUtility::',Object.keys(viewport.breakpoints))\r\n        return (viewport.breakpoints[breakpoint]) ? true : false;\r\n    }\r\n\r\n    this.getCurrentViewport = function(){\r\n        //console.log('ResponsiveUtility::getCurrentViewport', viewport);\r\n        return currentBreakpoint;\r\n    }\r\n\r\n    this.isCurrentViewport = function(breakpoint){\r\n        return viewport.is(breakpoint);\r\n    }\r\n\r\n    this.getPreviousViewport = function(){\r\n        return previousBreakpoint;\r\n    }\r\n\r\n    this.getHiddenClasses = function(){\r\n        self.hiddenClassesToCheck = ['hidden', 'hidden-'+self.getCurrentViewport(), 'invisible', 'invisible-'+self.getCurrentViewport(), 'visibility-hidden'];\r\n        for (var x in self.getBreakpoints()){\r\n            if (x != self.getCurrentViewport()){\r\n                // bootstrap has visible-X classes that will set visible on certain breakpoints\r\n                self.hiddenClassesToCheck.push('visible-'+x);\r\n                self.hiddenClassesToCheck.push('visible-'+x+'-block');\r\n                self.hiddenClassesToCheck.push('visible-'+x+'-inline');\r\n                self.hiddenClassesToCheck.push('visible-'+x+'-inline-block');\r\n                self.hiddenClassesToCheck.push('visible-'+x+'-print');\r\n            }\r\n        }\r\n        /*\r\n        // different feedback classes\r\n        self.hiddenClassesToCheck.push('feedbackCorrect', 'feedbackPartly', 'feedbackPartlyCorrect','feedbackIncorrect');\r\n        for (var i = 0; i < 10; i++){\r\n            self.hiddenClassesToCheck.push('feedbackOption'+i);\r\n            self.hiddenClassesToCheck.push('feedback'+i);\r\n        }\r\n        */\r\n    }\r\n\r\n    this.isElementHidden = function($el){        \r\n        var isHidden = false;\r\n        // console.log('ResponsiveUtility::isElementHidden', self.hiddenClassesToCheck);\r\n    //     for (var i = 0; i < self.hiddenClassesToCheck.length; i++){\r\n    //         if ($el.hasClass(self.hiddenClassesToCheck[i])){// || $el.is)){\r\n    //             isHidden = true;\r\n    //             break;\r\n    //         }\r\n    //     }\r\n    //     return isHidden;\r\n    // }\r\n    \r\n    // this.isElementHiddenByParent = function($el){        \r\n        isHidden = self.getClosestHiddenElement($el).length > 0;\r\n        // console.log('ResponsiveUtility::isElementHidden', self.hiddenClassesToCheck);\r\n        // check element and any parents for any of the hiddenClassesToCheck e.g hidden, invisible \r\n        // if ($el.parentsUntil('.slide').addBack().hasClass(self.hiddenClassesToCheck[i])){\r\n        //         for (var i = 0; i < self.hiddenClassesToCheck.length; i++){\r\n        //         isHidden = true;\r\n        //         break;\r\n        //     }\r\n        // }\r\n        return isHidden;\r\n    }\r\n\r\n    this.getClosestHiddenElement = function($el){\r\n        // console.log('getClosestHiddenElement', $el);\r\n        var $hiddenEl = [];\r\n        // check element and any parents for any of the hiddenClassesToCheck e.g hidden, invisible \r\n        $el.parentsUntil('.slide').addBack().each(function(){\r\n            var $this = $(this);\r\n            // console.log('getClosestHiddenElement', $this.attr('class'), $this.css('display'));\r\n            if ($this.css('display') == 'none'){\r\n                $hiddenEl = $this;\r\n                return false;\r\n            } else {\r\n                for (var i = 0; i < self.hiddenClassesToCheck.length; i++){\r\n\r\n                    if ($this.hasClass(self.hiddenClassesToCheck[i])){\r\n                        // isHidden = true;\r\n                        $hiddenEl = $this;\r\n                        return false;\r\n                    } \r\n                    // break;\r\n                }\r\n            }\r\n        });\r\n        return $hiddenEl;\r\n    }\r\n\r\n    this.resizeOverspillColumns = function(){\r\n        // console.log('ResponsiveUtility::resizeOverspillColumns');\r\n\r\n        // lets check for overspill and apply new widths    \r\n        $('.overspill-image').each(function(){\r\n            var $this = $(this);\r\n            var $col = $(this).closest('[class^=\"col\"]');\r\n            var $row = $(this).closest('.row');\r\n            // reset width to auto\r\n            $this.css('width', 'auto');\r\n            // reset max-height to none\r\n            $this.css('max-height', 'none');\r\n            $col.removeClass('overspill-first-child overspill-last-child');\r\n            $col.addClass('overspill-inactive');\r\n\r\n            if ($col.outerWidth() != $row.width()){\r\n                $col.removeClass('overspill-inactive');\r\n\r\n                var isFirstChild = $col.is(':first-child');\r\n                // check if pull or push\r\n                if (isFirstChild && $col.is('[class*=\"col-'+currentBreakpoint+'-push-\"]')){\r\n                    isFirstChild = false;\r\n                } else if (!isFirstChild && $col.is('[class*=\"col-'+currentBreakpoint+'-pull-\"]')){\r\n                    isFirstChild = true;\r\n                }\r\n\r\n                $col.addClass(isFirstChild ? 'overspill-first-child' : 'overspill-last-child');\r\n\r\n                if (isFirstChild && languageConfig.languages[currentLanguage].direction == 'ltr' ||\r\n                    !isFirstChild && languageConfig.languages[currentLanguage].direction == 'rtl'){\r\n                    // console.log('Responsive overspill - first', $col.position().left, $col.width());\r\n                    \r\n                    $this.width($col.position().left+$col.outerWidth());\r\n                } else if (isFirstChild && languageConfig.languages[currentLanguage].direction == 'rtl' ||\r\n                    !isFirstChild && languageConfig.languages[currentLanguage].direction == 'ltr'){\r\n                    // console.log('Responsive overspill - last', $(window).width(), $col.position().left);\r\n                    \r\n                    $this.width($(window).width()-$col.position().left);\r\n                }\r\n\r\n                if (!$this.hasClass('overspill-image-fill')){\r\n                    $this.css('max-height', $this.find('img').height());\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    this.getHiddenClassesUpToBreakpoint = function(breakpoint){\r\n        // bootstrap has hidden-X classes that will hide on certain breakpoints - find all below this breakpoint\r\n        var hiddenClasses = [];\r\n        for (var x in self.getBreakpoints()){\r\n            hiddenClasses.push('hidden-'+x);\r\n            if (x == breakpoint){\r\n                break;\r\n            }\r\n        }\r\n        return hiddenClasses.join(' ');\r\n    }\r\n\r\n    this.getVisibleClassesUpToBreakpoint = function(breakpoint){\r\n        // bootstrap has visible-X classes that will set visible on certain breakpoints - find all below this breakpoint\r\n        var visibleClasses = [];\r\n        for (var x in self.getBreakpoints()){\r\n            visibleClasses.push('visible-'+x);\r\n            if (x == breakpoint){\r\n                break;\r\n            }\r\n        }\r\n        return visibleClasses.join(' ');\r\n    }\r\n}","var ActionUtility = function () {\r\n    var self = this;\r\n\r\n    this.setupActions = function (component, actions) {\r\n\r\n        // aria-controls=\"'+self.id+'-collapse'+i+'\" aria-expanded=\"false\"\r\n\r\n        var $el = component.$component;\r\n        \r\n        var componentIndex = parseInt($el.data('componentindex'));\r\n\r\n        // var args = actions[action];\r\n        // // make args into array\r\n        // if (!Array.isArray(args)) {\r\n        //     args = [args];\r\n        // }\r\n\r\n        for (var action in actions){\r\n\r\n\r\n            switch(action.toLowerCase()){\r\n                case 'reveal':\r\n                case 'show':\r\n                case 'fadein':\r\n                case 'slidedown':\r\n                    // console.log(componentIndex, action, actions)\r\n                    var componentIndexes = component.componentController.getComponentIndexes(componentIndex, actions[action]);\r\n                    if (componentIndexes.length == 1){\r\n                        var $target = component.componentController.componentObjectsArray[componentIndexes[0]].$component;\r\n\r\n                        $el.attr('aria-controls', $target.attr('id'));\r\n                        $el.attr('aria-expanded', 'false');\r\n\r\n                        // $target.attr('aria-labelledby', $el.attr('id'));\r\n                    }\r\n                    break;\r\n            }\r\n        }\r\n    }\r\n    \r\n    this.fireActions = function(component, actions){\r\n        // console.log('ActionUtility',actions)\r\n        \r\n        for (var action in actions){\r\n            //console.log(action)\r\n            var actionRef = actions[action];\r\n\r\n            self.applyAction(component, action, actionRef);\r\n            //console.log('ActionUtility::fireActions', action, actionRef);\r\n             \r\n            // Google analytics - track user interaction\r\n//            gtag('event', 'engagement', {\r\n//              'event_category' : 'Click '+navigationController.moduleIndex+','+navigationController.pageIndex+','+component.componentController.slideObj.slideNum,\r\n//              'event_label' : action+' '+actionRef\r\n//            });\r\n            \r\n            \r\n        }      \r\n        \r\n        this.removePulses(component.$component);\r\n    }\r\n\r\n    this.applyAction = function(component, action, args){\r\n        // make args into array\r\n        if (!Array.isArray(args)) {\r\n            args = [args];\r\n        }\r\n\r\n        var $el = component.$component;\r\n        var componentIndex = parseInt($el.data('componentindex'));\r\n\r\n        // action = action.toLowerCase();\r\n\r\n        // console.log('ActionUtility',action);\r\n        switch(action.toLowerCase()){\r\n            case 'disable':\r\n                // var componentIndexes = component.componentController.getComponentIndexes(componentIndex, actionRef);\r\n                // if ()\r\n                $el.disable();\r\n                break;\r\n            case 'enable':\r\n                $el.enable();\r\n                break;\r\n            case 'next':\r\n                $el.disable();\r\n                navigationController.nextPage();\r\n                break;\r\n            case 'back':\r\n                $el.disable();\r\n                navigationController.previousPage();\r\n                break;\r\n            case 'showmenu':\r\n                navigationController.showMenu();\r\n                break;\r\n            case 'goto':\r\n                $el.disable();\r\n\r\n                var moduleIndex = self.getModifiedInt(navigationController.moduleIndex, args[0]);\r\n                var pageIndex = self.getModifiedInt(navigationController.pageIndex, args[1]);\r\n                var slideIndex = self.getModifiedInt(navigationController.slideIndex, args[2]);\r\n                \r\n                // console.log('goto', moduleIndex, pageIndex, slideIndex)\r\n                navigationController.changePageToData(moduleIndex, pageIndex, slideIndex);\r\n                break;\r\n            case 'gotopage':\r\n                $el.disable();\r\n                \r\n                var nextPageIndex = self.getModifiedInt(navigationController.pageIndex, args[0]);\r\n\r\n                if (!isNaN(nextPageIndex)){\r\n                    navigationController.changePageToData(navigationController.moduleIndex, nextPageIndex, navigationController.slideIndex);                        \r\n                }\r\n                break;\r\n            case 'submenunext':\r\n                $el.disable();\r\n\r\n                var nextPageIndex = courseData.getSubmenuNextPage();\r\n                if (nextPageIndex){\r\n                    var nextPageObj = navigationController.pageArray[courseData.getSubmenuNextPage()];\r\n                    console.log('submenunext', nextPageObj);\r\n                    navigationController.changePageToData(nextPageObj.module, nextPageObj.page, 0);\r\n                } else {\r\n                    navigationController.showMenu();\r\n                }\r\n                \r\n                break;\r\n            case 'submitanswers':\r\n                var componentsArr = [];\r\n                if (args[0] == ''){\r\n                    for (var i = 0; i < component.componentController.componentObjectsArray.length; i++){\r\n                        if (component.componentController.componentObjectsArray[i].submitAnswers){\r\n                            componentsArr.push(i);\r\n                        }\r\n                    }\r\n                } else if (args[0] == 'closest'){\r\n                    $el.parent().find('.component').not($el).each(function(){\r\n                        if (component.componentController.componentObjectsArray[componentIndex].submitAnswers){\r\n                            // console.log($el, parseInt($(this).data('componentindex')));\r\n                            componentsArr.push(componentIndex);\r\n                        }\r\n                    })\r\n                } else {\r\n                    componentsArr = args;\r\n                }\r\n\r\n                for (var i = 0; i < componentsArr.length; i++){\r\n                    // console.log(i, componentsArr[i], parseInt(componentsArr[i]));\r\n                    if (component.componentController.componentObjectsArray[parseInt(componentsArr[i])].submitAnswers){\r\n                        component.componentController.componentObjectsArray[parseInt(componentsArr[i])].submitAnswers();\r\n                    }\r\n                }\r\n                //var $components = //component.componentController.getComponents(actionRef.split(','));\r\n                //console.log('submitAnswers', actionRef.split(','), $components);\r\n                break;\r\n            case 'checkanswers':\r\n                component.componentController.checkAnswers();\r\n                break;\r\n            case 'reveal':\r\n            case 'show':\r\n            case 'fadein':\r\n            case 'slidedown':\r\n                if (args[0].indexOf('#') != -1){\r\n                    // HTML element\r\n                    var $element = $(args[0]);\r\n                    $element.removeClass('hidden').hide()[(action == 'reveal') ? 'slideDown' : action](\r\n                        function(){\r\n                            //navigationController.scrollIntoView($(this));\r\n                        }\r\n                        );\r\n                        component.componentController.showHiddenComponents($element);\r\n                    \r\n                } else {\r\n                    // component\r\n                    var componentIndexes = component.componentController.getComponentIndexes(componentIndex, args);\r\n                    var options = {};\r\n                    // if (args[1]){\r\n                    //     if (args[1].indexOf('{') != -1 && args[1].indexOf('}') != -1){\r\n                    //         options = JSON.parse(args[1]);\r\n                    //     }\r\n                    // } \r\n                    options.effect = action;\r\n                    //console.log('ActionUtility', action, options);\r\n                    component.componentController.revealComponents(componentIndexes, options);\r\n                }\r\n                $el.attr('aria-expanded', 'true');\r\n                break;\r\n            case 'hide':\r\n            case 'fadeout':\r\n            case 'slideup':\r\n                if (args[0].indexOf('#') != -1){\r\n                    // HTML element\r\n                    $(args[0])[action]();\r\n                } else {\r\n                    var componentIndexes = component.componentController.getComponentIndexes(componentIndex, args);\r\n                    var options = {};\r\n                    // if (args[1]){\r\n                    //     if (args[1].indexOf('{') != -1 && args[1].indexOf('}') != -1){\r\n                    //         options = JSON.parse(args[1]);\r\n                    //     }\r\n                    // } \r\n                    options.effect = action;\r\n                    console.log('ActionUtility', action, options);\r\n                    component.componentController.hideComponents(componentIndexes, options);\r\n                }\r\n                break;\r\n            case 'hideandreveal':\r\n                // let's check number of arguments - if 1 use componentController hide and reveal to hide previously revealed. If 2 only hide element indexes provided\r\n                // if (arg\r\n                var componentIndexes = component.componentController.getComponentIndexes(componentIndex, args);\r\n                component.componentController.hideAndRevealComponents(componentIndexes, {effect: 'slideUp'}, {effect: 'slideDown'});\r\n                break;\r\n            case 'hidethenreveal':\r\n                // console.log(action)\r\n                // hide then show after delay\r\n                var componentIndexesToHide = component.componentController.getComponentIndexes(componentIndex, args[0]);\r\n                var componentIndexesToReveal = component.componentController.getComponentIndexes(componentIndex, args[1]);\r\n                component.componentController.hideComponents(componentIndexesToHide, {effect: 'fadeOut'});\r\n                setTimeout(function(){\r\n                    component.componentController.revealComponents(componentIndexesToReveal, {effect: 'fadeIn'});\r\n                }, 500);\r\n                break;\r\n            case 'addclass':\r\n                // var args = actionRef.split(',');\r\n                var componentIndexes = component.componentController.getComponentIndexes(componentIndex, args[0]);\r\n                for (var i = 0; i < componentIndexes.length; i++){\r\n                    // console.log('ActionUtility addClass', args, componentIndexes)\r\n                    component.componentController.componentObjectsArray[componentIndexes[i]].$component.addClass(args[1]);\r\n                }\r\n                break;\r\n            // case 'slidedown':\r\n            //     var $element = $(args[0]);\r\n            //     // console.log('slidedown', $element)\r\n            //     $element.removeClass('hidden').hide().slideDown({\r\n            //         start: function(){\r\n            //             // let's tell any components they are now displayed\r\n            //             component.componentController.slideObj.showElementContents($(this));\r\n            //         }\r\n            //     });\r\n            //     break;\r\n            // case 'slideup':\r\n            //     var $element = $(args[0]);\r\n            //     $element.slideUp();\r\n            //     break;\r\n            case 'slidetoggle':\r\n                var $element = $(args[0]);\r\n                if ($element.hasClass('hidden')){\r\n                    $element.removeClass('hidden').hide();\r\n                }\r\n                $element.slideToggle();\r\n                break;\r\n            case 'setcomplete':\r\n                var componentIndexes = component.componentController.getComponentIndexes(componentIndex, args);\r\n                for (var i = 0; i < componentIndexes.length; i++){\r\n                    component.componentController.setComponentComplete(component.componentController.componentObjectsArray[componentIndexes[i]]);\r\n                }\r\n                break;\r\n            case 'setslidecomplete':\r\n                for (var i = 0; i < component.componentController.componentObjectsArray.length; i++){\r\n                // console.log('setslidecomplete', component.componentController.componentObjectsArray[i]);\r\n                    if (!component.componentController.componentObjectsArray[i].isComplete){\r\n                        component.componentController.setComponentComplete(component.componentController.componentObjectsArray[i]);\r\n                    }\r\n                }\r\n                break;\r\n            case 'setpagecomplete':\r\n                // find submenu number from nav XML\r\n                var pageIndex = parseInt(args[0]);\r\n                // console.log('setpagecomplete', pageIndex);\r\n                if (!isNaN(pageIndex)){\r\n                    pageIndex = navigationController.getModulePageIndex(navigationController.moduleIndex, pageIndex);\r\n                    for (var i = 0; i < navigationController.pageArray[pageIndex].slides.length; i++){\r\n                        storageController.setSlideComplete(pageIndex, i);\r\n                    }\r\n                }\r\n                break\r\n            case 'hideslide':\r\n                var slideNum = !isNaN(parseInt(args[0].split('+').join(''))) ? parseInt(args[0].split('+').join('')) : 0;\r\n                contentController.hideSlide(component.componentController.slideObj.slideNum+slideNum);\r\n                break;\r\n            case 'resumeslide':\r\n                // contentController.hideSlide(component.componentController.slideObj.slideNum+parseInt(args[0].split('+').join(''))\r\n                contentController.slideArray[component.componentController.slideObj.slideNum+parseInt(args[0].split('+').join(''))].resumeContent();\r\n                break;\r\n            case 'role':\r\n                navigationController.setRoles(args);\r\n                break;\r\n            case 'restart':\r\n                //gameController.restart();\r\n                navigationController.changePageToData(0,0,0);\r\n                break;\r\n            case 'download':\r\n            case 'link':\r\n                // note download is internal and link is an external resource\r\n                var link = action == 'link' ? courseData.getLink(args[0]) : utils.getURL(langPath+args[0]);\r\n                if (link.toLowerCase().indexOf('mailto') == 0){\r\n                    component.$component.data('link-mailto', true)\r\n                }\r\n                utils.openLink(link);\r\n                break;\r\n            case 'retry':\r\n                // find closest interaction\r\n                component.componentController.retry();\r\n                break;\r\n            case 'modal':\r\n\r\n                break;\r\n            case 'certificate':\r\n                loadCertificateWin();\r\n                break;\r\n            case 'exit':\r\n                navigationController.confirmExitCourse();\r\n                break;\r\n            case 'instruction':\r\n                component.componentController.changeInstruction(args[0]);\r\n                break;\r\n            case 'help':\r\n                uiController.showHelp();                \r\n                break;\r\n            case 'resources':\r\n                uiController.showResources();\r\n                break;\r\n            // case 'skip-pa':\r\n            //     // custom action for Adverse Events 2021 - disable Preassessment if skipped\r\n            //     storageController.setMenuModuleActive(3, false);\r\n            //     navigationController.showMenu();\r\n                break;\r\n        }\r\n    }\r\n    \r\n    this.getActions = function( xmlNode){\r\n        // check if item has an action\r\n        self.createActionsArray(xmlNode, 'actions');\r\n        self.createActionsArray(xmlNode, 'completeActions');\r\n    }\r\n\r\n    this.createActionsArray = function(xmlNode, actions){\r\n    // check if item has an action\r\n        if (xmlNode[actions]){\r\n            if (typeof(xmlNode[actions]) == 'string'){\r\n                //console.log ('action',xmlNode.actions);\r\n                var actionsObj = {};\r\n                var tmpActions = xmlNode[actions].split('|');\r\n                for (var i = 0; i < tmpActions.length; i++){\r\n                    // get action name and remove parentheses\r\n                    var actionName = tmpActions[i].toLowerCase().replace(/ *\\([^)]*\\) */g, \"\");\r\n                    var parenthesesStr = '';\r\n                    if (tmpActions[i].indexOf('(') != -1){\r\n                        parenthesesStr = tmpActions[i].substring(tmpActions[i].indexOf('(')+1, tmpActions[i].length-1);\r\n                    }\r\n                    //var argsArray = (parenthesesStr != '') ? parenthesesStr.split(',') : [];\r\n\r\n\r\n                    actionsObj[actionName] = parenthesesStr.split(',');\r\n                }\r\n\r\n                xmlNode[actions] = actionsObj;\r\n            }\r\n        }\r\n    }\r\n    \r\n    this.getModifiedInt = function(value, newValue){\r\n        var returnValue;\r\n                \r\n        if (newValue.indexOf('+') != -1){\r\n            //forward X pages\r\n            returnValue = value+parseInt(newValue.split('+').join(''));\r\n        } else if (newValue.indexOf('-') != -1){\r\n            //back X pages\r\n            returnValue = value-parseInt(newValue.split('-').join(''));\r\n        } else {\r\n            returnValue = parseInt(newValue);\r\n        }\r\n\r\n        return returnValue;\r\n    }\r\n\r\n    this.removePulses = function($el){\r\n        // remove any pulse classes\r\n        //$el.removeClass(utils.getWordsByFragment($el[0].className, 'pulse').join(' '));\r\n        htmlUtils.removeClasses($el, 'pulse');\r\n    }\r\n}","var SVGUtility = function(){\r\n\r\n    this.svgs = [\r\n\t\t'plus',\r\n\t\t'minus',\r\n\t\t'plusminus',\r\n\t\t'plustick',\r\n\t\t'tick',\r\n\t\t'cross',\r\n\t\t'tickcross',\r\n\t\t'circle'\r\n\t];\r\n    \r\n    if (InlineSVG) {\r\n        // add the Inline SVG\r\n        this.svgs = this.svgs.concat(Object.keys(InlineSVG));\r\n    }\r\n    \r\n    this.createSVG = function(name, elType){\r\n\t\t// console.log('createSVG', name, elType)\r\n        elType = elType ? elType : 'div';\r\n        var htmlStr = '';\r\n        \r\n        // check if RTL language\r\n        if (languageConfig.languages[currentLanguage].direction == 'rtl'){\r\n            if (name == 'chevron-right'){\r\n                name = 'chevron-left';\r\n            }\r\n        }\r\n\t\tvar svgName = name.toLowerCase();\r\n\r\n\t\thtmlStr += '<'+elType+' class=\"svg-'+svgName+'\">';\r\n\t\t\thtmlStr += '<'+elType+' class=\"svgWrap\">';\r\n\t\t\t\thtmlStr += '<'+elType+' class=\"no-svg\"></'+elType+'>';\r\n        if (InlineSVG[svgName]) {\r\n            // does this SVG exist within the InlineSVG object?\r\n\t\t\t\r\n\t\t\t\thtmlStr += InlineSVG[svgName];\r\n\r\n        } else {\r\n\t        switch(name.toLowerCase()){\r\n\t            case 'plus':\r\n\t\t\t\t\thtmlStr += '<svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" x=\"0px\" y=\"0px\" viewBox=\"0 0 100 100\" style=\"enable-background:new 0 0 100 100;\" xml:space=\"preserve\">';\r\n\t\t\t\t\t\thtmlStr+='<path class=\"path\" d=\"M50,5 L50,95\"/>';\r\n\t\t\t\t\t\thtmlStr+='<path class=\"path\" d=\"M5,50 L95,50\" />';\r\n\t\t\t\t\thtmlStr += '</svg>';\r\n\t                break;\r\n\t            case 'minus':\r\n\t\t\t\t\thtmlStr += '<svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" x=\"0px\" y=\"0px\" viewBox=\"0 0 100 100\" style=\"enable-background:new 0 0 100 100;\" xml:space=\"preserve\">';\r\n\t\t\t\t\t\thtmlStr+='<path class=\"path\" d=\"M5,50 L95,50\" />';\r\n\t\t\t\t\thtmlStr += '</svg>';\r\n\t                break;\r\n\t            case 'plusminus':\r\n\t\t\t\t\thtmlStr += '<svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" x=\"0px\" y=\"0px\" viewBox=\"0 0 100 100\" style=\"enable-background:new 0 0 100 100;\" xml:space=\"preserve\">';\r\n\t\t\t\t\t\thtmlStr+='<path class=\"plus path\" d=\"M50,5 L50,95\"/>';\r\n\t\t\t\t\t\thtmlStr+='<path class=\"minus path\" d=\"M5,50 L95,50\" />';\r\n\t\t\t\t\thtmlStr += '</svg>';\r\n\t                break;\r\n\t            case 'plustick':\r\n\t\t\t\t\thtmlStr += '<svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" x=\"0px\" y=\"0px\" viewBox=\"0 0 100 100\" style=\"enable-background:new 0 0 100 100;\" xml:space=\"preserve\">';\r\n\t\t\t\t\t\thtmlStr+='<path class=\"plus path\" d=\"M50,5 L50,95\"/>';\r\n\t\t\t\t\t\thtmlStr+='<path class=\"plus path\" d=\"M5,50 L95,50\" />';\r\n\t\t\t\t\t\thtmlStr += '<path class=\"tick path\" d=\"M5,60 L40,85 L95,15\"/>';\r\n\t\t\t\t\thtmlStr += '</svg>';\r\n\t                break;\r\n\t            case 'tick':\r\n\t\t\t\t\thtmlStr += '<svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" x=\"0px\" y=\"0px\" viewBox=\"0 0 100 100\" style=\"enable-background:new 0 0 100 100;\" xml:space=\"preserve\">';\r\n\t\t\t\t\t\thtmlStr += '<path class=\"tick path\" d=\"M5,60 L40,85 L95,15\"/>';\r\n\t\t\t\t\thtmlStr += '</svg>';\r\n\t                break;\t\t\t\t\t\r\n\t\t\t\tcase 'cross':\r\n\t\t\t\t\thtmlStr += '<svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" x=\"0px\" y=\"0px\" viewBox=\"0 0 100 100\" style=\"enable-background:new 0 0 100 100;\" xml:space=\"preserve\">';\r\n\t\t\t\t\t\thtmlStr += '<path class=\"cross path path1\" d=\"M5,5 L95,95\" />';\r\n\t\t\t\t\t\thtmlStr += '<path class=\"cross path path2\" d=\"M5,95 L95,5\" />';\r\n\t\t\t\t\thtmlStr += '</svg>';\r\n\t                break;\r\n\t            case 'tickcross':\r\n\t\t\t\t\thtmlStr += '<svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" x=\"0px\" y=\"0px\" viewBox=\"0 0 100 100\" style=\"enable-background:new 0 0 100 100;\" xml:space=\"preserve\">';\r\n\t\t\t\t\t\thtmlStr += '<path class=\"tick path\" d=\"M5,60 L40,90 L95,10\"/>';\r\n\t\t\t\t\t\thtmlStr += '<path class=\"cross path path1\" d=\"M5,5 L95,95\" />';\r\n\t\t\t\t\t\thtmlStr += '<path class=\"cross path path2\" d=\"M5,95 L95,5\" />';\r\n\t\t\t\t\thtmlStr += '</svg>';\r\n\t                break;\r\n\t\t\t\tcase 'circle':\r\n\t\t\t\t\thtmlStr += '<svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" x=\"0px\" y=\"0px\" viewBox=\"0 0 100 100\" style=\"enable-background:new 0 0 100 100;\" xml:space=\"preserve\">';\r\n\t\t\t\t\t\thtmlStr += '<circle class=\"st2\" cx=\"50\" cy=\"50\" r=\"45\"/>';\r\n\t\t\t\t\thtmlStr += '</svg>';\r\n\t\t\t\t\tbreak;\r\n\t        }\r\n\t    }\r\n\t\t\r\n\t\t\thtmlStr += '</'+elType+'>';\r\n\t\thtmlStr += '</'+elType+'>';\r\n        return htmlStr;\r\n    }\r\n    \r\n    this.animateSVG = function(name, $el){\r\n        var $svg = $el.find('.svgWrap').parent();\r\n        // console.log('SVG animate', name, $el, $svg)\r\n        var timeline = new TimelineLite();\r\n        switch(name.toLowerCase()){\r\n            case 'menu':\r\n//                timeline.from($el.find(\".menuWrap .menu-bullet\"), .5, {drawSVG:\"0%\"});\r\n                timeline.staggerFrom($svg.find('.menu-bullet'), .3, {drawSVG:\"0%\"}, .2);\r\n                timeline.staggerFrom($svg.find('.menu-item'), .3, {drawSVG:\"0%\"},.2);\r\n                \r\n                break;\r\n            case 'resource':\r\n//                timeline.from($el.find(\".resourceWrap path\"), 2, {drawSVG:\"0%\"});\r\n                timeline.from($svg.find('polygon'), 2, {drawSVG:\"0%\"});\r\n                timeline.from($svg.find('line'), .3, {drawSVG:\"0%\"}, .2);\r\n                \r\n                break;\r\n            case 'help':\r\n                timeline.from($svg.find('path'), 1, {drawSVG:\"0%\"});\r\n                timeline.from($svg.find('line'), .1, {drawSVG:\"0%\"});\r\n                timeline.from($svg.find('circle'), 1, {drawSVG:\"0%\"});\r\n                \r\n                break;\r\n            case 'language':\r\n//                timeline.from($el.find(\".languageWrap circle\"), .5, {drawSVG:\"0%\"});\r\n//                timeline.from($el.find(\".languageWrap ellipse\"), .5, {drawSVG:\"0%\"},.3);\r\n//                timeline.staggerFrom($el.find(\".languageWrap line\"), .3, {drawSVG:\"0%\"},.2);\r\n                timeline.from($svg.find('path'), .5, {drawSVG:\"0%\"});\r\n                timeline.staggerFrom($svg.find('line'), .3, {drawSVG:\"0%\"},.2);\r\n                timeline.from($svg.find('circle'), .5, {drawSVG:\"0%\"});\r\n                \r\n                break;\r\n            \r\n            case 'audio':\r\n                timeline.to($svg.find('#wave1'), 0.1, {opacity: 0})\r\n                // timeline.to(\".audioWrap #wave2\", {duration: 0.3, morphSVG: \".audioWrap #crossLeft\"})\r\n                timeline.to($svg.find('#wave2')[0], 0.3, {morphSVG:$svg.find('#crossLeft')[0], ease: Sine.easeInOut})\r\n                timeline.to($svg.find('#wave3')[0], 0.3, {morphSVG:$svg.find('#crossRight')[0], ease: Sine.easeInOut}, '-=0.3');\r\n                break;\r\n            case 'exit':\r\n//                timeline.from($svg.find('polygon\"), 2, {drawSVG:\"0%\"});\r\n                timeline.from($svg.find('line'), .5, {drawSVG:\"0%\"}, .2);\r\n                \r\n                break;\r\n            case 'plusminus':\r\n                timeline.to($svg.find('.plus'), .5, {rotation: 90, transformOrigin:\"50% 50%\"});\r\n                timeline.to($svg.find('.minus'), .5, {rotation: 180, transformOrigin:\"50% 50%\"},0);\r\n                \r\n                break;\r\n            case 'plusminus-reverse':\r\n                timeline.to($svg.find('.plus'), .5, {rotation: 0, transformOrigin:\"50% 50%\"});\r\n                timeline.to($svg.find('.minus'), .5, {rotation: 0, transformOrigin:\"50% 50%\"},0);\r\n                break;\r\n            case 'plustick':\r\n                timeline.from($svg.find('path.plus'), 1, {drawSVG:\"0%\"});\r\n                //timeline.from($el.find(\".plustickWrap path.tick\"), 1, {drawSVG:\"0%\"});\r\n                break;\r\n            case 'tick':\r\n                timeline.from($svg.find('path'), 1, {drawSVG:\"0%\"});\r\n                break;\r\n            case 'tickcross':\r\n                timeline.from($svg.find('path'), 1, {drawSVG:\"0%\"});\r\n                break;\r\n            case 'bulb':\r\n                //timeline.from($el.find(\".bulbWrap #ring1\"), 1, {drawSVG:\"0%\"});\r\n                //timeline.from($el.find(\".bulbWrap #ring2\"), 1, {drawSVG:\"0%\"},.1);\r\n                //timeline.from($el.find(\".bulbWrap #ring3\"), 1, {drawSVG:\"0%\"},0);\r\n                timeline.from($svg.find('#bulb'), 1, {drawSVG:\"0%\"});\r\n                timeline.from($svg.find('#screw1'), .3, {drawSVG:\"0%\"},.8);\r\n                timeline.from($svg.find('#screw2'), .3, {drawSVG:\"0%\"});\r\n                timeline.from($svg.find('#screw3'), .3, {drawSVG:\"0%\"});\r\n                //timeline.from($el.find(\".bulbWrap #filament\"), 1, {drawSVG:\"0%\"});\r\n                break;\r\n            case 'magnify':\r\n                timeline.from($svg.find('#stem'), .2, {drawSVG:\"0%\"});\r\n                timeline.from($svg.find('#handle'), 1, {drawSVG:\"0%\"});\r\n                timeline.from($svg.find('#glass'), 1, {drawSVG:\"0%\"});\r\n                break;\r\n            case 'callout':\r\n//                timeline.from($el.find(\".calloutWrap #bubble1\"), 1, {drawSVG:\"0%\"});\r\n//                timeline.from($el.find(\".calloutWrap #bubble2\"), 1, {drawSVG:\"0%\"});\r\n//                timeline.from($el.find(\".calloutWrap #line1\"), .3, {drawSVG:\"0%\"}, 1.5);\r\n//                timeline.from($el.find(\".calloutWrap #line2\"), .3, {drawSVG:\"0%\"}, 1.6);\r\n//                timeline.from($el.find(\".calloutWrap #line3\"), .3, {drawSVG:\"0%\"}, 1.7);\r\n                \r\n                break;\r\n            case 'casestudy':\r\n                timeline.staggerFrom($svg.find('.page-line'), .3, {drawSVG:\"0%\"},.1);\r\n                timeline.from($svg.find('.outline'), 1, {drawSVG:\"0%\"}, '-=.8');\r\n                timeline.from($svg.find('.spine'), .3, {drawSVG:\"0%\"}, '-=.2');\r\n                \r\n                break;\r\n            case 'warning':\r\n                timeline.from($svg.find('#exclamation'), .8, {drawSVG:\"0%\"});\r\n                timeline.from($svg.find('circle'),.3, {drawSVG:\"0%\"}, .2);\r\n                timeline.from($svg.find('#triangle'), 1.5, {drawSVG:\"0%\"});\r\n                \r\n                break;\r\n            case 'padlock':\r\n                timeline.from($svg.find('rect'), .8, {drawSVG:\"0%\"});\r\n                timeline.from($svg.find('.keyhole'), .8, {drawSVG:\"0%\"}, .2);\r\n                timeline.from($svg.find('.lock'), .5, {drawSVG:\"0%\"});\r\n                \r\n                break;\r\n            case 'rewind':\r\n                timeline.staggerFrom($svg.find('.arrow'), 1, {drawSVG:\"0%\"},.5);                \r\n                break;\r\n            case 'thumbsup':\r\n                timeline.from($svg.find('path'), 2, {drawSVG:\"0%\"});                \r\n                break;\r\n            case 'ldquo':\r\n                timeline.staggerFrom($svg.find('path'), 1, {drawSVG:'0%'},.3);                 \r\n                timeline.staggerFrom($svg.find('path'), .5, {fill:'transparent'},.3);\r\n                // timeline.staggerTo($el.find('.ldquoWrap path'), .5, {stroke:'transparent'},'-=.5');               \r\n                break;\r\n            case 'rdquo':\r\n                timeline.staggerFrom($svg.find('path'), 1, {drawSVG:'0%'},.3);                \r\n                timeline.staggerFrom($svg.find('path'), .5, {fill:'transparent'},.3);      \r\n                // timeline.staggerTo($el.find('.rdquoWrap path'), .5, {stroke:'transparent'},'-=.5');            \r\n                break;\r\n            \r\n            case 'pencil':\r\n                timeline.staggerFrom($svg.find('path'), 1, {drawSVG:'0%'},.3);                \r\n                timeline.staggerFrom($svg.find('line'), .5, {drawSVG:'0%'},.3);      \r\n                // timeline.staggerTo($el.find('.rdquoWrap path'), .5, {stroke:'transparent'},'-=.5');            \r\n                break;\r\n            \r\n            case 'tickdisc':\r\n                timeline.from($svg.find('circle'), .3, {drawSVG:\"0%\"});\r\n                timeline.from($svg.find('path'), 1, {drawSVG:\"0%\"}, .2);\r\n                break;\r\n\r\n            case 'chevron-down':\r\n                timeline.to($el.find(\"path\"), .3, {rotation: 0, transformOrigin:\"50% 50%\"});\r\n                break;\r\n\r\n            case 'chevron-down-reverse':\r\n                timeline.to($el.find(\".path\"), .3, {rotation: 180, transformOrigin:\"50% 50%\"});\r\n                break;\r\n        }\r\n        return timeline;\r\n    }\r\n\r\n    this.preview = function(){\r\n        var elType = 'div';\r\n        var htmlStr = '<'+elType+' class=\"svgPreview\">';\r\n        for (var i = 0; i < this.svgs.length; i++){\r\n            htmlStr += '<'+elType+' class=\"svgPreviewItem'+(InlineSVG[this.svgs[i]] ? ' svgPreviewExternal' : ' svgPreviewInternal')+'\">';\r\n                htmlStr += '<'+elType+' class=\"svgPreviewItemSVG\">';\r\n                    htmlStr += this.createSVG(this.svgs[i]);\r\n                htmlStr += '</'+elType+'>';\r\n                htmlStr += '<'+elType+' class=\"svgPreviewItemLabel\">'+this.svgs[i]+'</'+elType+'>';\r\n            htmlStr += '</'+elType+'>';\r\n        }\r\n        htmlStr += '</'+elType+'>';\r\n        $('body').append(htmlStr);\r\n    }\r\n}","var CanvasController = function() {\r\n    var self = this;\r\n\r\n    self.id;\r\n    \r\n    self.isLoaded = false;\r\n\r\n    self.loader = [];\r\n    self.assets = [];\r\n    \r\n    self.elements = [];\r\n\r\n    self.soundInstance;\r\n   \r\n    this.createCanvas = function(id, width, height){\r\n        self.id = id;\r\n        self.minWidth = width;\r\n        self.minHeight = height;\r\n\r\n        var htmlStr = '';\r\n        htmlStr += '<div class=\"canvas-wrap\">';\r\n            htmlStr += '<canvas id=\"'+id+'\" width=\"'+width+'\" height=\"'+height+'\"></canvas>';\r\n        htmlStr += '</div>';\r\n\r\n        return htmlStr;\r\n    }\r\n\r\n    this.setupCanvas = function($el){\r\n        self.$el = $el;\r\n        self.$canvas = $el.find('#'+self.id);\r\n\r\n        self.stage = new createjs.Stage(self.id);\r\n\r\n        // grab canvas width and height for later calculations:\r\n        self.w = self.stage.canvas.width;\r\n        self.h = self.stage.canvas.height;\r\n        self.aspectRatio = self.w / self.h;\r\n\r\n        self.container = new createjs.Container();\r\n        self.stage.addChild(self.container);\r\n        // console.log(self.container);\r\n\r\n        // var startBlock = new createjs.Bitmap(loader.getResult('start_block'));\r\n        \r\n        //         self.addElement(self.competitors[i].container, startBlock, {\r\n        //             scaleX: 0.5,\r\n        //             scaleY: 0.5,\r\n        //             x: 20,\r\n        //             y: 0,\r\n        //             regX:374,\r\n        //             regY:54\r\n        //         });\r\n        //     }\r\n\r\n        createjs.Ticker.framerate = 60;\r\n        createjs.Ticker.on(\"tick\", handleTick);\r\n        \r\n        function handleTick(event) {    \r\n            self.stage.update(event);\r\n        }\r\n\r\n        $(window).on('resize', function(){\r\n            self.resize();\r\n        });\r\n    }\r\n\r\n    this.loadSounds = function(manifest){\r\n        self.sounds = {\r\n            path:'course/content/media/',\r\n            manifest: []\r\n        };\r\n        self.sounds.manifest = self.sounds.manifest.concat(manifest);\r\n\r\n        console.log(self.sounds.manifest)\r\n\r\n        // console.log('ComponentFTC2022_RaceCanvas sounds.isReady()', createjs.Sound.isReady());\r\n        if (createjs.Sound.isReady()){\r\n            createjs.Sound.addEventListener(\"fileload\", soundsLoadedHandler);\r\n\r\n            function soundsLoadedHandler(event) {\r\n                console.log('soundsLoaded');\r\n            }\r\n        }\r\n        createjs.Sound.registerSounds(self.sounds);\r\n\r\n        if (createjs.Sound.isReady()){\r\n        }\r\n    }\r\n\r\n    // this.createContainer = function(){\r\n    //     self.container = new createjs.Container();\r\n    // }\r\n\r\n    this.loadManifest = function(manifest, completeCallback){\r\n        // console.log('loadManifest');\r\n        self.loader = new createjs.LoadQueue(false);\r\n        self.loader.addEventListener(\"fileload\", handleFileLoad);\r\n        self.loader.addEventListener(\"complete\", function(){\r\n            canvasSetupComplete(completeCallback);\r\n        });\r\n        self.loader.loadManifest(manifest, true, \"course/content/images/\");\r\n    }\r\n    \r\n    this.getBitmap = function(bitmap){\r\n        return new createjs.Bitmap(self.loader.getResult(bitmap));\r\n    }\r\n\r\n    function handleFileLoad(event){\r\n        // console.log('handleFileLoad');\r\n        self.assets.push(event);\r\n    }\r\n    \r\n    function canvasSetupComplete(completeCallback){\r\n        self.isLoaded = true;\r\n\r\n        // console.log('CanvasController:canvasSetupComplete');\r\n        completeCallback.call();\r\n    }\r\n    \r\n    this.addElement = function (container, el, properties){    \r\n        var obj = {\r\n            el: el,\r\n            properties: properties\r\n        }\r\n        for (var x in properties){\r\n            el[x] = properties[x];\r\n        }\r\n    \r\n        container.addChild(el);\r\n        self.elements.push(obj);\r\n        // return.push(obj);\r\n        return obj;\r\n    }\r\n    \r\n    this.updateElement = function (el, properties){    \r\n        // var obj = {\r\n        //     el: el,\r\n        //     properties: properties\r\n        // }\r\n        for (var x in properties){\r\n            el[x] = properties[x];\r\n        }\r\n        self.stage.update();\r\n    }\r\n\r\n    this.resize = function(){\r\n        console.log('resize')\r\n        // var windowRatio = self.w/self.h;\r\n\r\n        var w = self.$el.width(); //self.w;//window.innerWidth-2; // -2 accounts for the border\r\n        var h = w/self.aspectRatio;//self.self.h;//Math.min(500, w); //window.innerHeight-2;\r\n        \r\n        self.$canvas.css({width:w,height:h});\r\n        self.stage.canvas.width = w * window.devicePixelRatio;\r\n        self.stage.canvas.height = h * window.devicePixelRatio;\r\n\r\n        var bounds = self.container.getTransformedBounds();\r\n    //        if (window.innerHeight * aspect < w)\r\n    //            gameContainer.scale = window.innerHeight/bounds.height;\r\n    //        else\r\n    //            gameContainer.scale = w/bounds.width;\r\n        if (w < self.minWidth && h < self.minHeight){\r\n            if (w/self.minWidth < h/self.minHeight)\r\n                self.container.scale = w/self.minWidth;\r\n            else\r\n                self.container.scale = h/self.minHeight;\r\n        } else if(w < self.minWidth){\r\n            self.container.scale = w/self.minWidth;\r\n        } else if (h < self.minHeight){\r\n            self.container.scale = h/self.minHeight;\r\n        }\r\n        \r\n    //        gameContainer.x = self.minWidth/2;\r\n    //        gameContainer.y = self.minHeight/2;\r\n        self.container.x = (w-(self.minWidth*self.container.scale))/2;\r\n        self.container.y = (h-(self.minHeight*self.container.scale))/2;\r\n        \r\n        self.stage.scale = window.devicePixelRatio;\r\n\r\n        self.stage.update();\r\n    }\r\n\r\n    this.unload = function(){\r\n        self.soundInstance.stop();\r\n\r\n        self.stage.removeAllChildren();\r\n        self.stage.removeAllEventListeners();\r\n        self.stage.enableDOMEvents(false);\r\n    }\r\n}","function CourseData(){\r\n    var self = this;\r\n    var lang;\r\n    var xmlData;\r\n    this.xmlData;\r\n    this.navData;\r\n\r\n    this.submenus = {}\r\n    \r\n    this.init = function(_lang){\r\n        //console.log('CourseData::init')\r\n        lang = _lang;\r\n        \r\n        $(document).on(courseEvent.XMLDATA_LOAD_COMPLETE, onXMLDataNavLoadComplete);\r\n        \r\n        var compressXMLURLParameter = parseInt(utils.getURLParameter('compressXML'));\r\n        if (compressXMLURLParameter == 1){\r\n            // auto set to load the XML files\r\n            loadCompressedXML = false;\r\n        } else {\r\n            loadCompressedXML = courseConfig.xmlConvertedToJSON;\r\n        }\r\n\r\n        xmlData = new XMLData();\r\n        this.xmlData = xmlData;\r\n        xmlData.init();\r\n    }\r\n    \r\n    this.saveDataToFile = function(){\r\n//        console.log('saveDataToFile');\r\n//        var a = document.createElement(\"a\");\r\n//        var file = new Blob([JSON.stringify(self.data)], {type: 'application/json'});\r\n//        a.href = URL.createObjectURL(file);\r\n//        a.download = filename;\r\n//        a.click();\r\n        var filename = 'content_'+LaunchConfig.course.code+'_'+languageConfig.languages[currentLanguage].code+'.js';\r\n        var blob = new Blob(['var contentData = '+JSON.stringify(self.data)], { type: 'text/javascript;charset=utf-8;' });\r\n        if (navigator.msSaveBlob) { // IE 10+\r\n            navigator.msSaveBlob(blob, filename);\r\n        } else {\r\n            var link = document.createElement(\"a\");\r\n            if (link.download !== undefined) { // feature detection\r\n                // Browsers that support HTML5 download attribute\r\n                var url = URL.createObjectURL(blob);\r\n                link.setAttribute(\"href\", url);\r\n                link.setAttribute(\"download\", filename);\r\n                link.style.visibility = 'hidden';\r\n                document.body.appendChild(link);\r\n                link.click();\r\n                document.body.removeChild(link);\r\n            }\r\n        }\r\n    }\r\n    \r\n    function onXMLDataNavLoadComplete(){\r\n        //console.log('onXMLDataNavLoadComplete');\r\n        $(document).off(courseEvent.XMLDATA_LOAD_COMPLETE, onXMLDataNavLoadComplete);\r\n        \r\n        $(document).on(courseEvent.XMLDATA_LANG_LOAD_COMPLETE, onXMLDataLangLoadComplete);\r\n        \r\n        self.navData = xmlData.navXML;\r\n        \r\n        // load the language XML i18n.xml\r\n        xmlData.loadLanguageXML(lang);\r\n    }\r\n    \r\n    function onXMLDataLangLoadComplete(){\r\n        //console.log('onXMLDataLangLoadComplete');\r\n        \r\n        $(document).off(courseEvent.XMLDATA_LANG_LOAD_COMPLETE, onXMLDataLangLoadComplete);\r\n        \r\n        self.data = xmlData.langXML;\r\n        \r\n        $(document).trigger(courseEvent.COURSE_DATA_LOAD_COMPLETE);\r\n        \r\n    }\r\n    \r\n    this.loadCourseContent = function(){\r\n        xmlData.loadContentXML();\r\n    }\r\n    \r\n    this.contentLoaded = function(){\r\n        self.createMenu();\r\n\r\n         // let's create the xml json file if requested using ?compressXML = 1\r\n        var compressXMLURLParameter = parseInt(utils.getURLParameter('compressXML'));\r\n        if (compressXMLURLParameter == 1){\r\n           self.saveDataToFile();\r\n        }\r\n    }\r\n    \r\n    this.getIntroModuleNum = function(){\r\n        return parseInt(self.navData.introModule[0].Text);\r\n    }\r\n    \r\n    this.getMenuModuleNum = function(){\r\n        return parseInt(self.navData.menuModule[0].Text);\r\n    }\r\n    this.getContactModuleNum = function(){\r\n        return parseInt(self.navData.contactModule[0].Text);\r\n    }\r\n    \r\n    this.getAllData = function(){\r\n        return self.data;\r\n    }\r\n    \r\n    this.getNumModules = function(){\r\n        return self.navData.module.length;\r\n    }\r\n    \r\n    this.getNumPages = function(modNum){\r\n        return self.navData.module[modNum].page.length;\r\n    }\r\n    \r\n    this.getNumSlides = function(modNum, pageNum){\r\n        return self.navData.module[modNum].page[pageNum].slide.length;\r\n    }\r\n    \r\n    \r\n    this.getTemplateName = function(modNum, pageNum, slideNum){\r\n        var template = self.navData.module[modNum].page[pageNum].slide[slideNum].template;\r\n        return template ? template : 'CUSTOM';\r\n    }\r\n    \r\n    this.getXMLPath = function(modNum, pageNum, slideNum){\r\n        return self.navData.module[modNum].page[pageNum].slide[slideNum].xmlPath;\r\n    }\r\n    \r\n    this.getModuleData = function(modNum){\r\n         return self.navData.module[modNum];\r\n    }\r\n    \r\n    this.getModuleLangData = function(modNum){\r\n        return self.data.module[modNum];\r\n    }\r\n    \r\n    this.getPageData = function(modNum, pageNum){\r\n        return self.navData.module[modNum].page[pageNum];\r\n    }\r\n\r\n    this.getPageLangData = function(modNum, pageNum){\r\n        return self.data.module[modNum].page[pageNum];\r\n    }\r\n    \r\n    this.getSlideData = function(modNum, pageNum, slideNum){\r\n        return self.navData.module[modNum].page[pageNum].slide[slideNum];\r\n    }\r\n\r\n    this.getSlideLangData = function(modNum, pageNum, slideNum){\r\n        return self.data.module[modNum].page[pageNum].slide[slideNum];\r\n    }\r\n    \r\n    this.createMenu = function(){\r\n        // xml\r\n        //return self.navData.langXML.module[modNum].page[pageNum].slide[slideNum];\r\n        if (!self.data.settings[0].menu || self.data.settings[0].menu.length == 0){\r\n            self.data.settings[0].menu = [];\r\n        }\r\n            for (var i = 0; i < self.navData.module.length; i++){\r\n                var inMenu = true;\r\n                if (self.navData.module[i].inMenu == \"false\"){\r\n                    inMenu = false;\r\n                }\r\n                //console.log('menu',i, inMenu);\r\n                self.data.settings[0].menu[i] = 0;\r\n                storageController.initModuleMenu(i, inMenu);\r\n                // save to suspend data - all modules are mandatory by default\r\n                storageController.initModuleMandatory(i, 1);\r\n                storageController.initModuleLocked(i, navigationConfig.pageLock);\r\n                if (inMenu){                  \r\n\r\n                    if (self.navData.module[i].mandatory != undefined){\r\n                        console.log('Module mandatory?', self.navData.module[i].mandatory);\r\n                        var moduleMandatory = (self.navData.module[i].mandatory != 'false');\r\n                        storageController.setModuleMandatory(i, moduleMandatory);\r\n                    }\r\n                    \r\n                    var menuObj = {\r\n                        module: i,\r\n                        active: self.navData.module[i].active ? utils.xmlAttributeToJSON(self.navData.module[i].active) : true,\r\n                        mandatory: self.navData.module[i].mandatory ? utils.xmlAttributeToJSON(self.navData.module[i].mandatory) : true,\r\n                        optional: false,\r\n                        submenu: [],\r\n                        title: self.data.module[i].title ? self.data.module[i].title[0].Text : 'NEEDS MODULE TITLE ADDING'\r\n                    }\r\n\r\n                    // set to true if mandatory condition met\r\n                    menuObj.optional = menuObj.mandatory == false;\r\n\r\n                    var submenuRef = undefined;\r\n\r\n                    for (var j = 0; j < self.navData.module[i].page.length; j++){\r\n                        // find if this menu item has a submenu items\r\n                        var pageInSubmenu = false;\r\n                        if (self.navData.module[i].page[j].inMenu == \"true\"){\r\n                            pageInSubmenu = true;\r\n                            var submenuObj = {\r\n                                page: j,\r\n                                slide: 0,\r\n                                title: (self.data.module[i].page[j].slide[0].title) ?  self.data.module[i].page[j].slide[0].title[0].Text : 'NEEDS PAGE TITLE ADDING'\r\n                            }\r\n                            menuObj.submenu.push(submenuObj);\r\n                        }\r\n                        // note submenu here is different to previous as this is for standalone menu items\r\n                        if (self.navData.module[i].page[j].submenu){\r\n                            // page containing submenu\r\n                            // submenu can be true or a custom string\r\n                            submenuRef = self.navData.module[i].page[j].submenu == 'true' ? i : self.navData.module[i].page[j].submenu;\r\n                            self.initSubmenu(submenuRef, navigationController.getModulePageIndex(i,j));\r\n                        } else if (self.navData.module[i].page[j].submenuindex){\r\n                            // page to jump to as part of submenu\r\n                            var submenuIndex = parseInt(self.navData.module[i].page[j].submenuindex);\r\n                            self.addToSubmenu(submenuRef, submenuIndex, navigationController.getModulePageIndex(i,j));\r\n                        } else if (submenuRef){\r\n                            // end page to jump to\r\n                            self.addSubmenuNextPage(submenuRef, navigationController.getModulePageIndex(i,j));\r\n                            submenuRef = undefined;\r\n                        }\r\n                        \r\n                        var slideStartNo = pageInSubmenu ? 1 : 0;\r\n                        for (var k = slideStartNo; k < self.navData.module[i].page[j].slide.length; k++){\r\n                            if (self.navData.module[i].page[j].slide[k].inMenu == \"true\"){\r\n                                var submenuObj = {\r\n                                    page: j,\r\n                                    slide: k,\r\n                                    title: (self.data.module[i].page[j].slide[k].title) ?  self.data.module[i].page[j].slide[k].title[0].Text : 'NEEDS SLIDE TITLE ADDING'\r\n                                }\r\n                                menuObj.submenu.push(submenuObj);\r\n                            }\r\n                        }\r\n                    }\r\n                    \r\n                    self.data.settings[0].menu[i] = menuObj;\r\n                } else {\r\n                    // storageController.setModuleLocked(i, false);\r\n                }\r\n            //}\r\n            \r\n        }  \r\n\r\n        this.updateMenu();\r\n        this.updateSubmenus();\r\n    }\r\n\r\n    this.updateMenu = function(){\r\n        // console.log('updateMenu')\r\n        var firstMandatoryModule = 1000;\r\n        var firstLockedModule = 1000;\r\n\r\n        if (self.data.settings[0].menu) {\r\n        \tfor (var i = 0; i < self.data.settings[0].menu.length; i++) {\r\n\t            if (navigationConfig.developerUnlock || !navigationConfig.moduleLock){\r\n\t                storageController.setModuleLocked(i, false);\r\n\t            } else {\r\n\t                // lets check if this module is active (may be set inactive by assessment)\r\n\t                self.checkActive(self.data.settings[0].menu[i]);\r\n\t                \r\n\t                if (!storageController.isModuleActive(i)){\r\n\t                    continue;\r\n\t                }\r\n\t                // lets check if this module is mandatory (may be set not mandatory by assessment)\r\n\t                self.checkMandatory(self.data.settings[0].menu[i]);\r\n\t                \r\n\t                if (storageController.isModuleMandatory(i)){\r\n\t                    if (!storageController.isModuleComplete(i)){\r\n\t                        firstMandatoryModule = Math.min(firstMandatoryModule, i);\r\n\t                            \r\n\t                        // is module acccessed in linear order\r\n\t                        var isLinear = (courseData.getModuleData(i).linear == \"false\") ? false : true;\r\n\t                        if (isLinear){\r\n\t                            firstLockedModule = Math.min(firstLockedModule, i);\r\n\t                        }\r\n\t                    } \r\n\t                }\r\n\t            }\r\n\t        }\r\n\r\n\t        // console.log('CourseData.updateMenu', firstLockedModule);\r\n\t//i > firstLockedModule || (i >= firstLockedModule && i > firstMandatoryModul\r\n\t\r\n\t        for (var i = 0; i < self.data.settings[0].menu.length; i++) {\r\n\t            \r\n\t            if (i > firstLockedModule || (i >= firstLockedModule && i > firstMandatoryModule)){\r\n\t                storageController.setModuleLocked(i, true);\r\n\t            } else {\r\n\t                storageController.setModuleLocked(i, false);\r\n\t                if (storageController.isModuleComplete(i)){\r\n\t                    if (courseData.navData.module[i].return == 'false'){\r\n\t                        // we can't return to this module so lock it\r\n\t                        storageController.setModuleLocked(i, true);\r\n\t                    }\r\n\t                }\r\n\t            }\r\n\t        }\r\n\t     }\r\n    }\r\n\r\n    this.checkMandatory = function(obj){\r\n        // obj can be for a module or a page. A module would not have page defined.\r\n        var isMandatory = true;\r\n        if (obj.optional){\r\n            // if set to optional then return false\r\n            return false;\r\n        }\r\n        if (obj.page == undefined){\r\n            // dealing with a module\r\n            isMandatory = storageController.isModuleMandatory(obj.module);\r\n        }\r\n\r\n        if (typeof obj.mandatory == 'object'){\r\n            if (obj.mandatory.assessment){\r\n                // is this module mandatory based on score in this assessment\r\n                var assessmentController = window[obj.mandatory.assessment.toLowerCase()+'Assessment'];\r\n                if (assessmentController){\r\n                    if (obj.page == undefined){\r\n                        // dealing with a module\r\n                        if (isMandatory){\r\n                            // set the module as mandatory or not - note the reverse logic\r\n                            isMandatory = !assessmentController.checkAssessmentAgainstObject(obj.mandatory);\r\n                            obj.optional = !isMandatory;\r\n                            storageController.setModuleMandatory(obj.module, isMandatory);\r\n                        }\r\n                    } else {\r\n                        // return if the page as active or not - note the reverse logic\r\n                        isMandatory = !assessmentController.checkAssessmentAgainstObject(obj.mandatory);\r\n                        obj.optional = !isMandatory;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return isMandatory;\r\n    }\r\n\r\n    this.moduleIsOptional = function(num){\r\n        return self.data.settings[0].menu[num].optional;\r\n    }\r\n\r\n    this.moduleHasOptionalContent = function(num){\r\n        // for pages in a module check if any are optional\r\n        for (var i = 0; i < navigationController.pageArray.length; i++) {\r\n            if (navigationController.pageArray[i].module == num){\r\n                if (navigationController.pageArray[i].optional){\r\n                    return true;\r\n                }\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n    \r\n    this.checkActive = function(obj){\r\n        // obj can be for a module or a page. A module would not have page defined.\r\n        var isActive = true;\r\n        if (obj.page == undefined){\r\n            // dealing with a module\r\n            isActive = storageController.isModuleActive(obj.module);\r\n        }\r\n\r\n        if (typeof obj.active == 'object'){\r\n            if (obj.active.assessment){\r\n                // is this module active based on score in this assessment\r\n                var assessmentController = window[obj.active.assessment.toLowerCase()+'Assessment'];\r\n                if (assessmentController){\r\n                    if (obj.page == undefined){\r\n                        // dealing with a module\r\n                        if (isActive){\r\n                            // set the module as active or not - note the reverse logic\r\n                            storageController.setModuleActive(obj.module, !assessmentController.checkAssessmentAgainstObject(obj.active));\r\n                        }\r\n                    } else {\r\n                        // return if the page as active or not - note the reverse logic\r\n                        return !assessmentController.checkAssessmentAgainstObject(obj.active);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return isActive;\r\n    }\r\n\r\n    this.initSubmenu = function(submenuRef, pageIndex){\r\n        // create submenu object if it doesn't exist\r\n        if (!self.submenus){\r\n            self.submenus = {};\r\n        }\r\n        // create submenu in object if it doesn't exist\r\n        if (!self.submenus[submenuRef]){\r\n            self.submenus[submenuRef] = {\r\n                complete: false,\r\n                page: pageIndex,\r\n                items: [],\r\n                next: false,\r\n                done: 0,\r\n                total: 0\r\n            };\r\n        }\r\n    }\r\n\r\n    this.addToSubmenu = function(submenuRef, submenuIndex, pageIndex){\r\n        submenuIndex = submenuIndex - 1;\r\n        // create submenu item if it doesn't exist\r\n        if (!self.submenus[submenuRef].items[submenuIndex]){\r\n            self.submenus[submenuRef].items[submenuIndex] = {pages:[], complete: false}; \r\n        }\r\n        self.submenus[submenuRef].items[submenuIndex].pages.push(pageIndex);\r\n    }\r\n\r\n    this.addSubmenuNextPage = function(submenuRef, pageIndex){\r\n        self.submenus[submenuRef].next = pageIndex; \r\n    }\r\n\r\n    this.updateSubmenus = function(){\r\n        for (var x in self.submenus) {\r\n            self.submenus[x].complete = true;\r\n            self.submenus[x].done = 0;\r\n            self.submenus[x].total = 0;\r\n            for (var i = 0; i < self.submenus[x].items.length; i++) {\r\n                for (var j = 0; j < self.submenus[x].items[i].pages.length; j++) {\r\n                    self.submenus[x].total ++;\r\n                    self.submenus[x].items[i].complete = true;\r\n                    if (storageController.isPageComplete(self.submenus[x].items[i].pages[j])){\r\n                        self.submenus[x].done ++;\r\n                    } else {\r\n                        self.submenus[x].items[i].complete = false;\r\n                        self.submenus[x].complete = false;                        \r\n                    }\r\n                }\r\n            }\r\n            if (self.submenus[x].complete){\r\n                // lets set the submenu page to complete\r\n                storageController.setSubmenuPageComplete(self.submenus[x].page);\r\n            }\r\n        }\r\n    }\r\n\r\n    this.getSubmenu = function(submenuRef){\r\n        // if no submenuRef passed in use current page\r\n        var submenu = self.submenus[submenuRef] || self.getSubmenuForPage(navigationController.currentPage);\r\n\r\n        if (submenu){\r\n            return submenu;\r\n        } else {\r\n            return false;\r\n        }\r\n    }\r\n\r\n    this.getSubmenuForPage = function(pageIndex){\r\n        for (var x in self.submenus) {\r\n            if (self.submenus[x].page == pageIndex){\r\n                return self.submenus[x];\r\n            }            \r\n            for (var i = 0; i < self.submenus[x].items.length; i++) {\r\n                for (var j = 0; j < self.submenus[x].items[i].pages.length; j++) {\r\n                    if (self.submenus[x].items[i].pages[j] == pageIndex){\r\n                        return self.submenus[x];\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n\r\n    this.getSubmenuNextPage = function(submenuRef){\r\n        // find submenu\r\n        var submenu = self.getSubmenu(submenuRef);\r\n\r\n        if (submenu){\r\n            if (storageController.isPageComplete(submenu.page)){\r\n                if (submenu.complete){\r\n                    // if submenu complete return next page\r\n                    return submenu.next;\r\n                } else if (submenu.page == navigationController.currentPage){\r\n                    // if on submenu page return next page\r\n                    return submenu.next;\r\n                } \r\n            }\r\n            return submenu.page;\r\n            \r\n        } \r\n        // return next page if no submenu\r\n        return pageIndex+1;\r\n    }\r\n\r\n    this.isSubmenuComplete = function(submenuRef){        \r\n        // find submenu\r\n        var submenu = self.getSubmenu(submenuRef);\r\n\r\n        if (submenu){\r\n            return submenu.complete;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    // this.getSubmenuCompleteForPage = function(pageIndex){\r\n    //     var submenu = self.getSubmenuForPage(pageIndex);\r\n    //     if (submenu){\r\n    //         return submenu.complete;\r\n    //     }\r\n    //     return false;\r\n    // }\r\n    \r\n    this.isSubmenuItemComplete = function(itemIndex, submenuRef){\r\n        var submenu = self.getSubmenu(submenuRef);\r\n        if (submenu){\r\n            if (submenu.items[itemIndex]){\r\n                return submenu.items[itemIndex].complete;\r\n            } \r\n        }\r\n        return false;\r\n    }\r\n    \r\n    // this.isSubmenuItemCompleteForPage = function(pageIndex, itemIndex){\r\n    //     var submenu = self.getSubmenuForPage(pageIndex);\r\n    //     if (submenu){\r\n    //         if (submenu.items[itemIndex]){\r\n    //             return submenu.items[itemIndex].complete;\r\n    //         } \r\n    //     }\r\n    //     return false;\r\n    // }\r\n    \r\n    this.getLogo = function(){\r\n        return utils.getURL(self.data.settings[0].client[0].logo[0].small[0].src);\r\n    }\r\n\r\n    this.getLogoAlt = function(){\r\n        return self.data.settings[0].client[0].logo[0].small[0].alt[0].Text;\r\n    }\r\n    \r\n    this.getCourseTitle = function(){\r\n        return self.data.name[0].Text; \r\n    }\r\n    \r\n    this.getMenu = function(){\r\n        if (!self.data.settings[0].menu){\r\n            self.data.settings[0].menu = [];\r\n        }\r\n        return self.data.settings[0].menu; \r\n    }\r\n    \r\n    this.getRoles = function(){\r\n        return self.data.settings[0].roles[0].name;\r\n    }\r\n    \r\n    this.getBtnText = function(button){\r\n        return self.data.settings[0].navigation[0]['btn_'+button][0].Text; \r\n    }\r\n    \r\n    this.getMessageText = function(type, msg){\r\n        //console.log('getMessageText', type, msg)\r\n        return htmlUtils.getHTMLText(self.data.settings[0].messages[0][type][0][msg][0], {anim:false}); \r\n    }\r\n    \r\n    this.getErrorText = function(type, msg){\r\n        //console.log('getErrorText', type, msg);\r\n        return self.data.settings[0].errors[0][type][0][msg] ? self.data.settings[0].errors[0][type][0][msg][0].Text : undefined; \r\n    }\r\n    \r\n    this.getSettings = function(){\r\n        return self.data.settings[0]; \r\n    }\r\n\r\n    this.getSharedData = function(){\r\n        return self.data.shared[0]; \r\n    }\r\n\r\n    this.getLink = function(id){\r\n        var linkURL = id;\r\n        var found = false;\r\n        if (self.data.settings[0].links[0].link){\r\n            for (var i = 0; i < self.data.settings[0].links[0].link.length; i++){\r\n                if (id.toLowerCase() == self.data.settings[0].links[0].link[i].id.toLowerCase()){\r\n                    found = true;\r\n                    linkURL = self.data.settings[0].links[0].link[i].url;\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        // if not found, check CourseConfig linkConfig object\r\n        try {\r\n            if (linkConfig[id]){\r\n                linkURL = linkConfig[id].url;\r\n            }\r\n        } catch(e){\r\n        }\r\n        return linkURL;\r\n    }\r\n    \r\n    this.pathToData = function(pathStr, dataVar){\r\n        var pathArray = pathStr.split('[').join('.').split(']').join('').split('.')\r\n        return self.pathArrayToData(pathArray, dataVar);\r\n    }\r\n    \r\n    this.pathArrayToData = function(pathArray, dataVar){\r\n        //console.log('pathArrayToData',pathArray.join('.'))\r\n        dataVar = dataVar ? dataVar : self.data;\r\n        for (var i = 0; i < pathArray.length; i++){\r\n            var pathItem = (isNaN(pathArray[i])) ? pathArray[i] : parseInt(pathArray[i]);\r\n            //console.log(pathItem, dataVar[pathItem])\r\n            // first check if an object\r\n            if (dataVar[pathItem] == undefined){\r\n                // if not must be an array\r\n                dataVar = dataVar[0][pathItem];    \r\n            } else {\r\n                // set the object to the return var\r\n                dataVar = dataVar[pathItem];\r\n            }\r\n            \r\n        }\r\n        if (dataVar[0]){\r\n            dataVar = dataVar[0].Text;\r\n        }\r\n        //console.log(pathArray.join('.'), dataVar);\r\n        return dataVar;\r\n    }\r\n    \r\n    this.getTextPaths = function(){\r\n        return xmlData.textPathArray;\r\n    }\r\n\r\n    this.getAccessibleLabel = function(label){\r\n        return self.data.settings[0].accessibility[0][label] ? self.data.settings[0].accessibility[0][label][0].Text : undefined;         \r\n    }\r\n\r\n    this.getAriaProperty = function(ariaData, property){\r\n        if (ariaData.aria){\r\n            ariaData = ariaData.aria;\r\n        }\r\n        if (ariaData[0]){\r\n            if (ariaData[0][property]){\r\n                return ariaData[0][property][0].Text;\r\n            }   \r\n        }        \r\n        return '';         \r\n    }\r\n}","function XMLData(){\r\n    var self = this;\r\n    this.init = init;\r\n    this.navXML;\r\n    this.langXML;\r\n    this.defaultLangXML;\r\n    this.navPath = '';\r\n    this.lang = '';;\r\n    \r\n    this.textPathArray = [];\r\n    \r\n    this.loadNavigationXML = loadNavigationXML;\r\n    this.loadLanguageXML = loadLanguageXML;\r\n    \r\n    this.contentXMLLoaded = [];\r\n    \r\n    function init(){\r\n        loadNavigationXML();\r\n    }\r\n    \r\n    /**\r\n\t* @function loadNavigationXML\r\n\t* @description This function is used to load the navigation XML file.\r\n\t*/\r\n\tfunction loadNavigationXML(){\r\n        this.navPath = 'content/xml/';\r\n        //console.log('XMLData::loadNavigationXML', this.navPath)\r\n                \r\n        // load XML data\r\n        utils.loadXMLData(this.navPath+'navigation.xml', function(_xml){\r\n            self.navXML = _xml;\r\n            //console.log('navigation.xml', _xml);\r\n            $(document).trigger(courseEvent.XMLDATA_LOAD_COMPLETE);\r\n        });\r\n    }\r\n    \r\n    function loadLanguageXML(lang){\r\n        langPath = 'content/lang/'+lang+'/';\r\n        //console.log('XMLData::loadLanguageXML', lang, langPath, currentLanguage, languageConfig.languages[currentLanguage].code)\r\n        \r\n        //loadCompressedXML = courseConfig.xmlConvertedToJSON;\r\n        \r\n        if (loadCompressedXML){// && languageConfig.languages[currentLanguage].compressed){\r\n            // XML has already been converted to JSON\r\n            \r\n            contentData = undefined;\r\n            \r\n            /*$.ajax({\r\n                url: langPath+'content_'+LaunchConfig.course.code+'_'+languageConfig.languages[currentLanguage].code+'.js',\r\n                contentType: 'text/javascript; charset=utf-8',\r\n                //dataType: 'json',\r\n                success: function(){\r\n                    if (contentData){\r\n                        console.log('xml js loaded');\r\n                        self.langXML = contentData; // contentData is the variable in the content.js file\r\n                    \r\n                        xmlLangLoadComplete();\r\n                    } else {\r\n                        console.warn('No content.js - loading XML');\r\n                        loadCompressedXML = false;\r\n                        loadLanguageXML(lang);\r\n                    }\r\n                },\r\n                error: function (xhr,status,error) {\r\n                    console.log(xhr,status,error);\r\n                    if (xhr.status == 404){\r\n                        console.warn('No content.js - loading XML');\r\n                        loadCompressedXML = false;\r\n                        loadLanguageXML(lang);    \r\n                    }\r\n                    //alert(\"Status: \" + status);\r\n                    //alert(\"Error: \" + error);\r\n                    //alert(\"xhr: \" + xhr.readyState);\r\n                },\r\n                async: true\r\n            });*/\r\n            // changed as ajax doesn't work on file system\r\n            var fileObj = {\r\n                type: 'script',\r\n                url: utils.getURL(langPath+'content_'+LaunchConfig.course.code+'_'+languageConfig.languages[currentLanguage].code+'.js'),\r\n                success: function(){\r\n                    if (contentData){\r\n                        self.langXML = contentData; // contentData is the variable in the content.js file\r\n                        xmlLangLoadComplete();\r\n                    } else {\r\n                        console.warn('No content.js - loading XML');\r\n                        loadCompressedXML = false;\r\n                        loadLanguageXML(lang);  \r\n                    }\r\n                }, \r\n                error: function(){\r\n                    console.log(' > error')\r\n                    loadCompressedXML = false;\r\n                    loadLanguageXML(lang);    \r\n                }\r\n            }\r\n            utils.loadFile(fileObj);\r\n            \r\n            \r\n        } else {\r\n            console.log('XMLData::loadLanguageXML loadXML');\r\n            \r\n            loadCompressedXML = false;\r\n            // load XML data\r\n            utils.loadXMLData(langPath+'xml/i18n.xml', function(_xml){\r\n                console.log('XMLData::loadLanguageXML loadXML loaded')\r\n                self.langXML = _xml;\r\n                loadHelpXML();\r\n            });\r\n        }\r\n    }\r\n    \r\n    function loadHelpXML(){\r\n        if (componentConfig.help){\r\n            // load help XML data\r\n            utils.loadXMLData(langPath+'xml/help.xml', function(_xml){\r\n                self.langXML.help = _xml;\r\n                loadResourceXML();\r\n            });\r\n        } else {\r\n            loadResourceXML();\r\n        }\r\n    }\r\n    \r\n    function loadResourceXML(){\r\n       if (componentConfig.resource){\r\n            // load resource XML data\r\n            utils.loadXMLData(langPath+'xml/resources.xml', function(_xml){\r\n                self.langXML.resource = _xml;\r\n                loadGlossaryXML();\r\n            });\r\n        } else {\r\n            loadGlossaryXML();\r\n        }\r\n    }\r\n    \r\n    function loadGlossaryXML(){\r\n        if (componentConfig.glossary){\r\n            // load glossary XML data\r\n            utils.loadXMLData(langPath+'xml/glossary.xml', function(_xml){\r\n                self.langXML.glossary = _xml;\r\n                loadAssessmentXML();\r\n            });\r\n        } else {\r\n            loadAssessmentXML();\r\n        }\r\n    }\r\n    \r\n    function loadAssessmentXML(){\r\n        if (assessmentConfig.assessments.length){\r\n            // load assessment XML data\r\n            utils.loadXMLData(langPath+'xml/assessment.xml', function(_xml){\r\n                self.langXML.assessment = _xml;\r\n                xmlLangLoadComplete();\r\n            });\r\n        } else {\r\n            xmlLangLoadComplete();\r\n        }\r\n    }\r\n    \r\n    function xmlLangLoadComplete(){\r\n        $(document).trigger(courseEvent.XMLDATA_LANG_LOAD_COMPLETE);\r\n    }\r\n    \r\n    this.loadContentXML = function(){\r\n        if (loadCompressedXML){\r\n            // XML already converted to JSON\r\n                   \r\n            loadContentSlideXMLComplete();\r\n        } else {\r\n            // XML needs to be loaded in and converted to JSON\r\n            self.langXML.content = {};\r\n            //lets start loading the current page XML\r\n    //        self.loadContentSlideXML(navigationController.currentPage,0);\r\n            self.loadContentSlideXML(0,0);\r\n\r\n            //if (courseConfig.xmlPreload == true){\r\n                //console.log('loadContentXML', navigationController.pageArray.length);\r\n\r\n\r\n            //} else {\r\n                //$(document).trigger(courseEvent.CONTENT_DATA_LOAD_COMPLETE);\r\n            //}\r\n        }\r\n    }\r\n    \r\n    this.loadContentSlideXML = function(pageArrayIndex, slideNum){\r\n        var slideObj = navigationController.pageArray[pageArrayIndex].slides[slideNum];\r\n        if (slideObj.langs.length == 0 || slideObj.langs.indexOf(languageConfig.languages[currentLanguage].code) != -1){\r\n           //console.log('loadContentSlideXML - lang valid');\r\n            \r\n            // load XML\r\n            var moduleIndex = navigationController.pageArray[pageArrayIndex].module;\r\n            var pageIndex = navigationController.pageArray[pageArrayIndex].page;\r\n            console.log('loadContentSlideXML', pageArrayIndex, moduleIndex, pageIndex, slideNum, slideObj.xmlPath)\r\n\r\n            // create content object\r\n            //self.langXML.content = (self.langXML.content) ? self.langXML.content : {};\r\n            // create modules\r\n            self.langXML.module = (self.langXML.module) ? self.langXML.module : [];\r\n            self.langXML.module[moduleIndex] = (self.langXML.module[moduleIndex]) ? self.langXML.module[moduleIndex] : {};\r\n            // create pages\r\n            self.langXML.module[moduleIndex].page = (self.langXML.module[moduleIndex].page) ? self.langXML.module[moduleIndex].page : [];\r\n            self.langXML.module[moduleIndex].page[pageIndex] = (self.langXML.module[moduleIndex].page[pageIndex]) ? self.langXML.module[moduleIndex].page[pageIndex] : {};\r\n            if (!self.langXML.module[moduleIndex]._children){\r\n                self.langXML.module[moduleIndex]._children = [];\r\n            }\r\n            if (!self.langXML.module[moduleIndex]._childorder){\r\n                self.langXML.module[moduleIndex]._childorder = [];\r\n                self.langXML.module[moduleIndex]._children.push('page')\r\n            }\r\n            if (pageIndex > 0 || self.langXML.module[moduleIndex]._childorder.length == 0){\r\n                // only add the page number if not already in there\r\n                var found = false;\r\n                for (var i = 0; i < self.langXML.module[moduleIndex]._childorder.length; i++){\r\n                    if (self.langXML.module[moduleIndex]._childorder[i].node == 'page' && self.langXML.module[moduleIndex]._childorder[i].pos == pageIndex){\r\n                        found = true;  \r\n                        break;\r\n                    }\r\n                }\r\n                if (!found){                \r\n                    self.langXML.module[moduleIndex]._childorder.push({node: \"page\", pos: pageIndex})\r\n                }\r\n            }\r\n            // create slides\r\n            self.langXML.module[moduleIndex].page[pageIndex].slide = (self.langXML.module[moduleIndex].page[pageIndex].slide) ? self.langXML.module[moduleIndex].page[pageIndex].slide : [];\r\n            if (!self.langXML.module[moduleIndex].page[pageIndex]._children){\r\n                self.langXML.module[moduleIndex].page[pageIndex]._children = [];\r\n            }\r\n            if (!self.langXML.module[moduleIndex].page[pageIndex]._childorder){\r\n                self.langXML.module[moduleIndex].page[pageIndex]._childorder = [];\r\n                self.langXML.module[moduleIndex].page[pageIndex]._children.push('slide')\r\n            }\r\n            if (slideNum > 0 || self.langXML.module[moduleIndex].page[pageIndex]._childorder.length == 0){\r\n                // only add the slide number if not already in there\r\n                var found = false;\r\n                for (var i = 0; i < self.langXML.module[moduleIndex].page[pageIndex]._childorder.length; i++){\r\n                    if (self.langXML.module[moduleIndex].page[pageIndex]._childorder[i].node == 'slide' && self.langXML.module[moduleIndex].page[pageIndex]._childorder[i].pos == slideNum){\r\n                        found = true;  \r\n                        break;\r\n                    }\r\n                }\r\n                if (!found){  \r\n                    self.langXML.module[moduleIndex].page[pageIndex]._childorder.push({node: \"slide\", pos: slideNum});\r\n                }\r\n            }\r\n\r\n            //courseData.getSlideData(navigationController.moduleIndex, navigationController.pageIndex, self.slideNum); \r\n            //console.log(moduleIndex, pageIndex, pageArrayIndex);\r\n            //if (navigationController.pageArray[pageArrayIndex]){\r\n            \r\n            utils.loadXMLData(langPath+'xml/'+slideObj.xmlPath, function(_xml){\r\n                //var slideObj = navigationController.pageArray[pageArrayIndex].slides[slideNum];\r\n                // set this XML as loaded\r\n                slideObj.xmlLoaded = true;\r\n                \r\n                var slideTitleObj;\r\n                if (self.langXML.module[moduleIndex].page[pageIndex].slide[slideNum]){\r\n                    slideTitleObj = $.extend(true,{},self.langXML.module[moduleIndex].page[pageIndex].slide[slideNum].title);\r\n                }\r\n                // assign the XML\r\n                self.langXML.module[moduleIndex].page[pageIndex].slide[slideNum] = _xml;\r\n                \r\n                if (slideTitleObj){\r\n                    // restore the title\r\n                    self.langXML.module[moduleIndex].page[pageIndex].slide[slideNum].title = slideTitleObj;\r\n                }\r\n                //console.log('xml loaded', pageIndex, slideNum, navigationController.pageArray[pageArrayIndex].slides.length);\r\n\r\n                loadNextContentSlideXML(pageArrayIndex, slideNum);\r\n\r\n            });\r\n            \r\n        } else {\r\n            \r\n            console.log('loadContentSlideXML - lang NOT valid')\r\n            // go to next\r\n            loadNextContentSlideXML(pageArrayIndex, slideNum);\r\n        }\r\n        \r\n        \r\n        //}\r\n    }\r\n    \r\n    function loadNextContentSlideXML(pageArrayIndex, slideNum){\r\n        // load next xml\r\n        if (slideNum < navigationController.pageArray[pageArrayIndex].slides.length-1){\r\n            slideNum ++;\r\n            self.loadContentSlideXML(pageArrayIndex, slideNum);    \r\n        } else if (pageArrayIndex < navigationController.pageArray.length-1){\r\n            pageArrayIndex ++;\r\n            slideNum = 0;\r\n            \r\n            var moduleIndex = navigationController.pageArray[pageArrayIndex].module;\r\n            var pageIndex = navigationController.pageArray[pageArrayIndex].page;\r\n\r\n            var currentModule = navigationController.pageArray[navigationController.currentPage].module;\r\n            var currentPage = navigationController.pageArray[navigationController.currentPage].page;\r\n            //console.log (navigationController.pageArray[navigationController.currentPage].module, moduleIndex, pageIndex)\r\n\r\n            if (!courseConfig.xmlPreload && currentModule == moduleIndex && currentPage == pageIndex){\r\n                $(document).trigger(courseEvent.CURRENT_CONTENT_DATA_LOAD_COMPLETE);\r\n                //$(document).trigger(courseEvent.CONTENT_DATA_LOAD_COMPLETE);\r\n            }\r\n            self.loadContentSlideXML(pageArrayIndex, slideNum);                           \r\n        } else {\r\n            loadContentSlideXMLComplete();\r\n        }\r\n    }\r\n    \r\n    function loadContentSlideXMLComplete(){\r\n        // all loaded\r\n            \r\n        self.textPathArray = [];\r\n        \r\n        // use the ?debrand= parameter from the URL - do we need to debrand this course?\r\n        var debrandURLParameter = parseInt(utils.getURLParameter('debrand'));\r\n        if (!isNaN(debrandURLParameter)){\r\n            courseConfig.debrand = debrandURLParameter === 1;\r\n        }\r\n        // add paths to xml\r\n        addPathToObject(self.langXML, '', '');\r\n        \r\n        // trigger complete\r\n        $(document).trigger(courseEvent.CONTENT_DATA_LOAD_COMPLETE);\r\n    }\r\n    \r\n    function getNextSlideToLoad(){\r\n        //va\r\n        for (var i = 0; i < navigationController.pageArray; i++){\r\n            for (var j = 0; j < navigationController.pageArray[i].slides.length; j++){\r\n                \r\n            }\r\n        }\r\n    }\r\n    \r\n    var nodesToIgnore = ['typeOf', 'RootName', '_children', '_childorder'];\r\n    \r\n    function addPathToObject(obj, path, dbid){\r\n    //    console.log('addPathToObject', path);    \r\n        for (var x in obj){\r\n            if (nodesToIgnore.indexOf(x) == -1){\r\n                if (x == 'Text'){\r\n                    if (obj[x] != ''){\r\n                        self.textPathArray.push(path);\r\n                        obj.xmlPath = path;\r\n                        obj.dbid = dbid;\r\n\r\n                        if (courseConfig.debrand){\r\n                            obj[x] = self.debrand(obj[x]);\r\n                        }\r\n                    }\r\n                } else if (obj[x].length){\r\n                    for (var i = 0; i < obj[x].length; i++){\r\n                        if (typeof(obj[x][i]) == 'object'){\r\n                            // store node name\r\n                            obj[x][i].nodeName = x;\r\n                            // create xml path\r\n                            var newPath = (path == '' ? x : path+'.'+x);\r\n                            var newDbid = obj[x][i].dbid || dbid;\r\n                            addPathToObject(obj[x][i], newPath+'['+i+']', newDbid);\r\n                        }\r\n                    }\r\n                } else {\r\n                    // store node name\r\n                    obj[x].nodeName = x;\r\n                    // create xml path\r\n                    var newPath = (path == '' ? x : path+'.'+x);\r\n                    var newDbid = obj[x].dbid || dbid;\r\n                    addPathToObject(obj[x], newPath, newDbid);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    this.insertIntoXML = function(node, nodeToInsert, pos){\r\n        // console.log('XMLData::insertIntoXML', nodeToInsert.nodeName);\r\n        var performInsert = true;\r\n        if (node._childorder[pos]){\r\n            if (node._childorder[pos].node == nodeToInsert.nodeName){\r\n                if (node._childorder[pos].insert == true){\r\n                    // make sure this insertion hasn't already been done\r\n                    performInsert = false;\r\n                }\r\n            }\r\n        }\r\n        // console.log('XMLData::insertIntoXML', performInsert);\r\n        if (performInsert){\r\n            var insertIndex = 0;\r\n            if (node[nodeToInsert.nodeName]){\r\n                node[nodeToInsert.nodeName].push(nodeToInsert);\r\n                insertIndex = node[nodeToInsert.nodeName].length-1;\r\n            } else {\r\n                node[nodeToInsert.nodeName] = nodeToInsert;\r\n                node._children.push(nodeToInsert.nodeName);\r\n            }\r\n            node._childorder.splice(pos, 0, {node: nodeToInsert.nodeName, pos: insertIndex, insert: true});\r\n        }\r\n        // insertions should be removed from XML on page change, to prevent being done again\r\n        $(document).one(courseEvent.PAGE_CHANGE, function(){\r\n            self.deleteFromXML(node, nodeToInsert.nodeName, pos);\r\n        });\r\n    }\r\n\r\n    this.deleteFromXML = function(node, nodeName, pos){\r\n        // console.log('XMLData::deleteFromXML', nodeName);\r\n        node[nodeName].splice(node._childorder[pos].pos, 1);\r\n        node._childorder.splice(pos, 1);\r\n    }\r\n\r\n    this.findInXML = function(node, element, attributeName, attributeValue){\r\n        var results = this.recurseFindInXML(node, element, attributeName, attributeValue, []);\r\n\r\n        return results;\r\n    } \r\n\r\n    this.recurseFindInXML = function(node, element, attributeName, attributeValue, results){\r\n        if (node._childorder){\r\n            if (node._childorder.length){            \r\n                for (var i = 0; i < node._childorder.length; i++){\r\n                    var nodeName = node._childorder[i].node;\r\n                    var nodeData = node[nodeName][node._childorder[i].pos];\r\n\r\n                    if (nodeName == element){\r\n                        // console.log(i, 'element '+element+' found', nodeData);\r\n                        if (nodeData[attributeName]){\r\n                            // console.log('element '+element+' attribute '+attributeName+' found', nodeData[attributeName]);\r\n                            if (nodeData[attributeName] == attributeValue){\r\n                                // console.log('element attributeValue match', nodeData[attributeName]);\r\n                                var result = {\r\n                                    parent: node,\r\n                                    element: nodeData, \r\n                                    pos: i\r\n                                }\r\n                                results.push(result);\r\n                            }\r\n                        }\r\n                    }\r\n                    \r\n                    results.concat(this.recurseFindInXML(nodeData, element, attributeName, attributeValue, results));\r\n                }\r\n            }\r\n        }\r\n        return results;\r\n    }\r\n\r\n    this.debrand = function(str){\r\n        var loremArray = [\r\n            'Lorem ipsum dolor sit amet, consectetur adipiscing elit.', \r\n            'Nam in fringilla mi. Nullam iaculis ex risus, ut sodales tortor fringilla non.', \r\n            'Nunc nec mi tincidunt magna dapibus tristique. Aenean in bibendum lectus.', \r\n            'Nam a pretium orci, a imperdiet urna.', \r\n            'Suspendisse aliquet dui non quam semper pharetra.', \r\n            'Praesent porttitor commodo erat, eu consequat purus tincidunt sed.', \r\n            'Etiam suscipit vehicula cursus. Mauris quis suscipit lectus.', \r\n            'Nulla ut mauris quis risus porta ornare ac sit amet lectus.', \r\n            'Nullam aliquam in urna quis dignissim.', \r\n            'Etiam non viverra leo.', \r\n            'Aliquam erat volutpat.', \r\n            'Curabitur scelerisque, tellus non aliquam hendrerit, justo tellus malesuada metus, ut hendrerit mauris odio et nunc.', \r\n            'Nam vel augue volutpat metus rhoncus elementum sed a dui.', \r\n            'Mauris tincidunt ac enim a tincidunt.', \r\n            'Curabitur eleifend tellus ante, nec pellentesque massa consequat in.', \r\n            'Curabitur elementum urna non odio feugiat rutrum. Proin id rutrum arcu.'\r\n        ];\r\n        var returnStr = '';\r\n        while (returnStr.length < str.length){\r\n            returnStr += loremArray[Math.floor(Math.random()*loremArray.length)]+' ';\r\n        }\r\n        returnStr = returnStr.substring(0, str.length);\r\n        if (str.charAt(str.length-1) == '.' && returnStr.charAt(returnStr.length-1) != '.'){\r\n            returnStr += '.';\r\n        }\r\n        return returnStr;\r\n    }\r\n    \r\n    /*this.loadContentSlideXML = function(pageArrayIndex, slideNum){\r\n        // load XML\r\n//        console.log('loadContentSlideXML', pageArrayIndex, slideNum, navigationController.pageArray[pageArrayIndex].slides[slideNum].xmlPath)\r\n        var moduleIndex = navigationController.pageArray[pageArrayIndex].module;\r\n        var pageIndex = navigationController.pageArray[pageArrayIndex].page;\r\n        \r\n        // create content object\r\n        self.langXML.content = (self.langXML.content) ? self.langXML.content : {};\r\n        // create modules\r\n        self.langXML.content.modules = (self.langXML.content.modules) ? self.langXML.content.modules : [];\r\n        self.langXML.content.modules[moduleIndex] = (self.langXML.content.modules[moduleIndex]) ? self.langXML.content.modules[moduleIndex] : {};\r\n        // create pages\r\n        self.langXML.content.modules[moduleIndex].pages = (self.langXML.content.modules[moduleIndex].pages) ? self.langXML.content.modules[moduleIndex].pages : [];\r\n        self.langXML.content.modules[moduleIndex].pages[pageIndex] = (self.langXML.content.modules[moduleIndex].pages[pageIndex]) ? self.langXML.content.modules[moduleIndex].pages[pageIndex] : {};\r\n        // create slides\r\n        self.langXML.content.modules[moduleIndex].pages[pageIndex].slides = (self.langXML.content.modules[moduleIndex].pages[pageIndex].slides) ? self.langXML.content.modules[moduleIndex].pages[pageIndex].slides : [];\r\n        \r\n        //courseData.getSlideData(navigationController.moduleIndex, navigationController.pageIndex, self.slideNum); \r\n        utils.loadXMLData(langPath+navigationController.pageArray[pageArrayIndex].slides[slideNum].xmlPath, function(_xml){\r\n            \r\n            \r\n            self.langXML.content.modules[moduleIndex].pages[pageIndex].slides[slideNum] = _xml;\r\n//            console.log('xml loaded', pageIndex, slideNum, navigationController.pageArray[pageArrayIndex].slides.length);\r\n            \r\n            // load next xml\r\n            if (slideNum < navigationController.pageArray[pageArrayIndex].slides.length-1){\r\n                slideNum ++;\r\n                self.loadContentSlideXML(pageArrayIndex, slideNum);    \r\n            } else if (pageArrayIndex < navigationController.pageArray.length-1){\r\n                pageArrayIndex ++;\r\n                slideNum = 0;\r\n                self.loadContentSlideXML(pageArrayIndex, slideNum);                           \r\n            } else {\r\n                //console.log('xml all loaded', self.langXML.content);\r\n                $(document).trigger(courseEvent.CONTENT_DATA_LOAD_COMPLETE);\r\n            }\r\n            \r\n        });\r\n    }*/\r\n}","var utils,\r\n    htmlUtils,\r\n    svgUtils,\r\n    responsiveUtils,\r\n    actionUtils,\r\n    courseEvent = new CourseEvent(),\r\n    debugController,\r\n    courseData,\r\n    courseConfig,\r\n    templateController,\r\n    storageController,\r\n    storageComms,\r\n    uiController,\r\n    navigationController,\r\n    navigationEvents,\r\n    navigationButton,\r\n    contentController,\r\n    instructionController,\r\n    feedbackController,\r\n    titleController,\r\n    searchController,\r\n    customDataController,\r\n    audioController;\r\n\r\nvar systemInfo,\r\n    isBelowIE9 = false,\r\n    isBelowIE10 = false,\r\n    isIE11=false,\r\n    isIE=false;\r\n\r\nvar coursePath = 'course/';\r\nvar langPath = '';\r\nvar usingPageURLParameter = false;\r\nvar languageChangedPage,\r\n    currentLanguage = 0,\r\n    multiLanguage = false,\r\n    activeLanguages = [];\r\n\r\nvar loadCompressedXML = false;\r\n\r\n// google gtag id\r\nvar gtagID = '';\r\n\r\nvar userInitiatedWindowClose = false;\r\nvar islogPop=false;\r\nvar communicationWin=null;\r\nvar commCount = 0;\r\nvar infoText='';\r\n    \r\n\r\n// console.log ('window.rootPath', window.rootPath)\r\nif (window.rootPath){\r\n    // console.log ('amend coursePath')\r\n    coursePath = window.rootPath+coursePath;\r\n} \r\n\r\nfunction initFramework(){\r\n    //console.log('Main::initFramework');\r\n    //document.title = courseTitle.text;\t\r\n    \r\n    // load utlities\r\n    utils = new Utility();\r\n    htmlUtils = new HTMLUtility();\r\n    //responsiveUtils = new ResponsiveUtility();\r\n    svgUtils = new SVGUtility();\r\n    actionUtils = new ActionUtility();\r\n    \r\n    // load course events\r\n    // courseEvent = new CourseEvent();\r\n\r\n    storageComms = new StorageComms();\r\n\r\n    // systemInfo = new SystemDetect();\r\n\t// systemInfo.init();\r\n\t\t\r\n\t// isBelowIE9 = (systemInfo.browserName == \"ie\" && systemInfo.browserVersion <9);\t\t\r\n\t// isBelowIE10 = (systemInfo.browserName == \"ie\" && systemInfo.browserVersion <10);\r\n\t// isIE11 = systemInfo.browserName == \"ie\" && systemInfo.browserVersion >=11;\r\n\t// isIE = systemInfo.browserName == \"ie\";\r\n    \r\n    initUI();\r\n}\r\n\r\nfunction initUI(){\r\n    if (courseConfig.responsive){\r\n        $('body').addClass('responsive');\r\n    } else {\r\n        $('body').addClass('not-responsive');\r\n        $('#content-wrapper').css({width: courseConfig.width, height: courseConfig.height});\r\n    }\r\n    if (courseConfig.animate.enable){\r\n        $('body').addClass('content-animated');\r\n    } else {\r\n        $('body').addClass('not-animated');\r\n    }\r\n    $('#content-wrapper').load(coursePath+'content/UI/UI.html', function(response, status, xhr) {\r\n        //console.log('Main::initUI', status);\r\n\t\tif (status == \"success\") {\t\r\n\r\n            // need to make sure image paths are correct in UI.html\r\n            $('#content-wrapper').find('img').each(function(){\r\n                var src = $(this).attr('src');\r\n                if (src != ''){\r\n                    $(this).attr('src', utils.getURL(src));\r\n                }\r\n            });\r\n\r\n            onUILoadComplete();\r\n        }\r\n    });\r\n}\r\n\r\nfunction onUILoadComplete() {\r\n    \r\n    // load Storage controller\r\n    storageController = new StorageController();\r\n    \r\n\t//$('body').addClass('lang-'+courseConfig.defaultLanguageFolderName);\r\n\t//$('body').addClass(courseConfig.defaultLanguageDirection);\r\n    \r\n//    loadNavigationData();\r\n    loadCourseData();\r\n}\r\n\r\nfunction loadCourseData(){\r\n//    $(document).on(courseEvent.XMLDATA_LOAD_COMPLETE, onCourseDataLoadComplete);\r\n    \r\n    var numLanguages = 0;\r\n    activeLanguages = [];\r\n    for (var i = 0; i < languageConfig.languages.length; i++){\r\n        if (languageConfig.languages[i].active){\r\n            numLanguages ++;\r\n            activeLanguages.push(languageConfig.languages[i].code);\r\n        }\r\n    }\r\n    multiLanguage = (numLanguages > 1);\r\n    \r\n    // retrieve the language\r\n    var lang = storageController.getLanguage();\r\n    if (lang == '') {\r\n        // use the ?lang= parameter from the URL\r\n        var langURLParameter = parseInt(utils.getURLParameter('lang'));\r\n        if (!isNaN(langURLParameter)){\r\n            lang = langURLParameter;\r\n        } else {\r\n            lang = languageConfig.defaultLanguage;\r\n        }\r\n    }  \r\n    //console.log(lang);\r\n    if (!isNaN(lang)){\r\n        // if language is a number, get the language code\r\n        lang = languageConfig.languages[lang].code;\r\n    }\r\n    \r\n    loadLanguage(lang);\r\n    \r\n    //loadFramework();\r\n}\r\n\r\nfunction loadLanguage(lang){\r\n    //currentLanguage = lang;\r\n    $('.preloader').show();\r\n    \r\n    // store current page\r\n    if (navigationController){\r\n        \r\n        languageChangedPage = navigationController.currentPage;\r\n    }\r\n    \r\n    if (contentController){\r\n        contentController.unloadContent();\r\n    }\r\n    \r\n    for (var i = 0; i < languageConfig.languages.length; i++){\r\n        if (languageConfig.languages[i].active){\r\n            if (languageConfig.languages[i].code == lang){\r\n                currentLanguage = i;\r\n                break;\r\n            }\r\n        }\r\n    }\r\n    \r\n    \r\n    //set the tracking Google ID\r\n    gtagID = languageConfig.languages[currentLanguage].analytics;\r\n    \r\n    if (courseConfig.googleAnalytics.enabled){\r\n        //add the gtag script\r\n        var newScript = document.createElement(\"script\");\r\n        newScript.type = \"text/javascript\";\r\n        newScript.setAttribute(\"async\", \"true\");\r\n        newScript.setAttribute(\"src\", \"https://www.googletagmanager.com/gtag/js?id=\"+gtagID);\r\n        document.documentElement.firstChild.appendChild(newScript);\r\n    }\r\n    \r\n    $(document).on(courseEvent.COURSE_DATA_LOAD_COMPLETE, onCourseDataLoadComplete);\r\n    courseData = new CourseData();\r\n    courseData.init(lang);\r\n}\r\n\r\nfunction onCourseDataLoadComplete(){\r\n    $(document).off(courseEvent.COURSE_DATA_LOAD_COMPLETE, onCourseDataLoadComplete);\r\n    \r\n    loadFramework();\r\n}\r\n\r\n//function loadNavigationData(){\r\n//    $(document).on(courseEvent.XMLDATA_LOAD_COMPLETE, onXMLDataNavLoadComplete);\r\n//    \r\n//    xmlData = new XMLData();\r\n//    xmlData.init();\r\n//}\r\n\r\n//function onXMLDataNavLoadComplete(){\r\n//    // remove listener\r\n//    $(document).off(courseEvent.XMLDATA_LOAD_COMPLETE, onXMLDataNavLoadComplete);\r\n//    \r\n//    /*\r\n//    REMOVED TEMPLATE LOADING\r\n//    $(document).bind(courseEvent.TEMPLATES_LOAD_COMPLETE, function(e){onTemplateLoadComplete();});\r\n//    \r\n//    // load course templates \r\n//    templateController = new TemplateController();\r\n//    templateController.loadTemplates();\r\n//    */\r\n//    loadFramework();\r\n//}\r\n\r\n//function onTemplateLoadComplete(){    \r\n//    loadFramework();\r\n//}\r\n\r\nfunction loadFramework(){\r\n    //console.log('loadFramework')\r\n    // load Storage controller\r\n    //storageController = new StorageController();\r\n    \r\n    // load UI controller\r\n    uiController = new UIController();\r\n    // load content controller\r\n    contentController = new ContentController();\r\n    // load navigation controller\r\n    navigationController = new NavigationController();\r\n    \r\n    // set up assessments\r\n    for (var x in assessmentConfig.assessments){\r\n        if (assessmentConfig.assessments[x].enable){\r\n            window[x+'Assessment'] = new AssessmentController(x, assessmentConfig.assessments[x]);\r\n        }\r\n    }\r\n    \r\n    gameAPIController = new GameAPIController();   \r\n    \r\n    // now we have the pages, get saved data\r\n    storageController.getData();\r\n    \r\n    // set the language to the LMS\r\n    storageController.setLanguage(languageConfig.languages[currentLanguage].code);   \r\n    \r\n    // load custom data controller\r\n    customDataController = new CustomDataController();\r\n\r\n    // update assessments with data\r\n    storageController.setAssessmentData();\r\n    \r\n    // use the ?debug= parameter from the URL - is debug on?\r\n    var debugURLParameter = parseInt(utils.getURLParameter('debug'));\r\n    if (!isNaN(debugURLParameter)){\r\n        navigationConfig.debug = debugURLParameter === 1;\r\n    }\r\n    // use the ?dev= parameter from the URL - is debug on?\r\n    var devURLParameter = parseInt(utils.getURLParameter('dev'));\r\n    if (!isNaN(devURLParameter)){\r\n        navigationConfig.developerUnlock = devURLParameter === 1;\r\n    }\r\n    // use the ?pagelock= parameter from the URL - is pageLock on?\r\n    var pageLockURLParameter = parseInt(utils.getURLParameter('pagelock'));\r\n    if (!isNaN(pageLockURLParameter)){\r\n        navigationConfig.pageLock = pageLockURLParameter === 1;\r\n    }\r\n    // use the ?modulelock= parameter from the URL - is moduleLock on?\r\n    var moduleLockURLParameter = parseInt(utils.getURLParameter('modulelock'));\r\n    if (!isNaN(moduleLockURLParameter)){\r\n        navigationConfig.moduleLock = moduleLockURLParameter === 1;\r\n    }\r\n    // use the ?mapping= parameter from the URL - is mapping on?\r\n    var mappingURLParameter = (parseInt(utils.getURLParameter('mapping')) === 1);\r\n    if (mappingURLParameter){\r\n        $('body').addClass('slidemapping');\r\n    }\r\n    \r\n    // show debug?\r\n    debugController = new DebugController();\r\n    debugController.init();\r\n    if (navigationConfig.debug){\r\n        debugController.showDebug(true);\r\n    }\r\n    \r\n    navigationButton = new NavigationButton();\r\n    navigationEvents = new NavigationEvents();\r\n    \r\n    instructionController = new InstructionController();\r\n    feedbackController = new FeedbackController();\r\n    titleController = new TitleController();\r\n    \r\n    if (courseConfig.audio){\r\n        audioController = new AudioController();    \r\n    }\r\n    \r\n    \r\n//    // retrieve the language\r\n//    var lang = storageController.getLanguage();\r\n//    // set the language to the LMS\r\n//    storageController.setLanguage(lang);\r\n//    \r\n//    $(document).on(courseEvent.XMLDATA_LANG_LOAD_COMPLETE, onXMLDataLangLoadComplete);\r\n//    // load the language XML i18n.xml\r\n//    xmlData.loadLanguageXML(lang);\r\n//} \r\n\r\n//function onXMLDataLangLoadComplete(){\r\n    \r\n    if (courseConfig.disableMouseRightClick){\r\n        $('body').attr('oncontextmenu', 'return false;');\r\n    }\r\n    \r\n    navigationController.initRoles();\r\n    \r\n    //console.log ('onXMLDataLangLoadComplete',storageController.getRoles().length);\r\n    ////if (storageController.getRoles().length != 0){\r\n\r\n    // var roles = storageController.getRoles() || ;\r\n    // roles = roles.length == 0 \r\n    // navigationController.setRoles();\r\n    //}\r\n    \r\n    if (!languageChangedPage){\r\n        \r\n         // get lesson location and suspend data\r\n        lessonLocation = storageController.getLocation();\r\n\r\n        //console.log('lessonLocation', lessonLocation);\r\n        usingPageURLParameter = false;\r\n        if (lessonLocation == '') {\r\n            // use the ?page= parameter from the URL\r\n            var pageURLParameter = parseInt(utils.getURLParameter('page'));\r\n            if (!isNaN(pageURLParameter)){\r\n                usingPageURLParameter = true;\r\n                lessonLocation = pageURLParameter;\r\n                // console.log(location.hash);\r\n                // jump to slide functionality\r\n                if (location.hash){\r\n                    console.log('Main::hash', location.hash);\r\n                    // check if we have a location.hash e.g. #slide3 and extract the 3\r\n                    //navigationController.currentSlide = parseInt(location.hash.split('slide')[1]);\r\n                    // console.log('navigationController.currentSlide', navigationController.currentSlide);\r\n                    // check if we have a location.hash e.g. #slide3 and store for use by ContentController\r\n                    navigationController.locationHash = location.hash;\r\n\r\n                }\r\n            } else {\r\n                lessonLocation = 0;\r\n            }\r\n        } else {\r\n            lessonLocation = parseInt(lessonLocation);\r\n        }\r\n\r\n        navigationController.currentPage = lessonLocation;\r\n    } else {\r\n        navigationController.currentPage = languageChangedPage;\r\n    }\r\n    \r\n    //document.title = courseData.getCourseTitle();\r\n//    document.title = xmlData.langXML.title[0].Text;\r\n    \r\n    utils.updateErrorMessages();\r\n    \r\n    navigationButton.updateNavButtons();\r\n    \r\n//    if (!courseConfig.xmlPreload){\r\n//        $(document).on(courseEvent.CURRENT_CONTENT_DATA_LOAD_COMPLETE, onCurrentPageContentDataLoadComplete);\r\n//    } else {\r\n        \r\n    $(document).on(courseEvent.CONTENT_DATA_LOAD_COMPLETE, onContentDataLoadComplete);\r\n    \r\n    courseData.loadCourseContent();\r\n}\r\n\r\nfunction onCurrentPageContentDataLoadComplete(){\r\n    //console.log('Main::onCurrentPageContentDataLoadComplete');\r\n    $(document).off(courseEvent.CURRENT_CONTENT_DATA_LOAD_COMPLETE, onCurrentPageContentDataLoadComplete);\r\n    frameworkLoaded();    \r\n}\r\n\r\nfunction onContentDataLoadComplete(){\r\n    $(document).off(courseEvent.CONTENT_DATA_LOAD_COMPLETE, onContentDataLoadComplete);\r\n    \r\n    courseData.contentLoaded();\r\n    \r\n    frameworkLoaded();    \r\n}\r\n\r\nfunction frameworkLoaded(){\r\n    console.log('Main::frameworkLoaded');\r\n    \r\n    $('body').removeClass('ltr rtl');\r\n    for (var i = 0; i < languageConfig.languages.length; i++){\r\n        if (languageConfig.languages[i].active){\r\n            $('body').removeClass('lang-'+languageConfig.languages[i].code);\r\n        }\r\n    }\r\n    $('body').addClass('lang-'+languageConfig.languages[currentLanguage].code+' '+languageConfig.languages[currentLanguage].direction);\r\n    \r\n    navigationController.updateCourseTitle();\r\n    \r\n    // set up assessments\r\n    for (var x in assessmentConfig.assessments){\r\n        if (assessmentConfig.assessments[x].enable){\r\n            window[x+'Assessment'].setupAssessment();\r\n        }\r\n    }\r\n    \r\n    if (componentConfig.search){\r\n        searchController = new SearchController(); \r\n    }\r\n    \r\n    uiController.setupUI();\r\n    navigationEvents.init();\r\n    \r\n    if (navigationController.currentPage > 1){\r\n        if (usingPageURLParameter || languageChangedPage){\r\n            languageChangedPage = undefined;\r\n            // dont show bookmark popup if usingPageURLParameter\r\n            navigationController.historyArray = storageController.getHistory();\r\n            navigationController.changePage(navigationController.currentPage, 'replace');\r\n        } else {\r\n            // show bookmark confirm popup\r\n            $.Alert({\r\n                title: courseData.getMessageText('bookmark', 'title'), //xmlData.langXML.messages[0].bookmark[0].title[0].Text,\r\n                message: courseData.getMessageText('bookmark', 'message'), //xmlData.langXML.messages[0].bookmark[0].message[0].Text,\r\n                confirm: courseData.getMessageText('bookmark', 'confirm'), //xmlData.langXML.messages[0].bookmark[0].confirm[0].Text,\r\n                cancel: courseData.getMessageText('bookmark', 'cancel'), //xmlData.langXML.messages[0].bookmark[0].cancel[0].Text,\r\n                onConfirm:function(){\r\n                    navigationController.historyArray = storageController.getHistory();\r\n                    navigationController.changePage(navigationController.currentPage, 'replace');\r\n                },\r\n                onCancel:function(){\r\n                    storageController.setHistory([]);\r\n                    navigationController.historyArray = storageController.getHistory();\r\n                    navigationController.changePage(0, 'replace');\r\n                }\t\t\r\n            });\r\n        }\r\n    } else {\r\n        storageController.setHistory([]);\r\n        navigationController.historyArray = storageController.getHistory();\r\n        navigationController.changePage(0, 'replace');\r\n    }\r\n}\r\n\r\n/**\r\n * @function loadCertificateWin\r\n * @description This function is used to load the Certificate window.\r\n */\r\nfunction loadCertificateWin(){\r\n\tif(!storageController.isPassed()){\r\n\t\treturn false;\r\n\t} \r\n\tvar winwidth = 652;\r\n\tvar winheight = 474;               \r\n\tvar xOffset =10;//  screen.width/2 - winwidth/2;\r\n\tvar yOffset =10;// screen.height/2 - winheight/2;       \t\t\t\t\t\t\t\t\r\n\tvar crWin = window.open('course/framework/html/certificate.html', 'cerWin', 'width=' + winwidth + ',height=' + winheight + ',scrollbars=0,screenX=0,screenY=0,resizable=yes,status=no,top=' + yOffset + ',left=' + xOffset + '');\r\n\tcrWin.focus();\r\n\treturn false;\r\n}\r\n\r\nfunction getCertificateData(){\r\n    var completionDate = '';\r\n    if (storageController.isPassed){\r\n        var completionDateArr = storageController.getCompletionDate().split('_');\r\n        var month = courseData.data.date[0].months[0].month[parseInt(completionDateArr[1])-1].Text;\r\n        completionDate = courseData.data.date[0].format[0].Text.split('{D}').join(completionDateArr[0]).split('{M}').join(month).split('{Y}').join(completionDateArr[2]);\r\n    }\r\n    \r\n    return {\r\n        language: languageConfig.languages[currentLanguage],\r\n        completionDate: completionDate,\r\n        studentName: storageController.studentName,\r\n        courseName: courseData.data.name[0].Text,\r\n        courseID: courseData.data.id[0].Text,\r\n        text: courseData.data.settings[0].certificate[0]\r\n    }\r\n}\r\n\r\n// functions for communications log window\r\n\r\nfunction loadCommunicationWin(){\r\n\tislogPop=true;\r\n\tvar winwidth = 800;\r\n\tvar winheight = 300;               \r\n\tvar xOffset =10//  screen.width/2 - winwidth/2;\r\n\tvar yOffset =10// screen.height/2 - winheight/2;       \t\t\t\t\t\t\t\t\r\n\tcommunicationWin = window.open('course/framework/html/communication_log.html', 'logWin', 'width=' + winwidth + ',height=' + winheight + ',scrollbars=0,screenX=0,screenY=0,resizable=yes,status=no,top=' + yOffset + ',left=' + xOffset + '');\r\n\tcommunicationWin.onbeforeunload  = function(){ \r\n\t    islogPop=false;\r\n\t\tcommunicationWin=null;\t\t\r\n\t}\t\r\n\treturn false;\r\n}\r\n\r\nfunction closeCommunicationWin(){\r\n    islogPop=false;\r\n\tcommunicationWin=null;\r\n}\r\n\r\nfunction addTrackDataTrace(msg){\r\n    storageComms.addTrace(msg);\r\n    //console.log('TrackDataTrace',msg);\r\n    // var d= new Date();\r\n    // var str = '<div class=\"data-item data-trace-item\">';\r\n    //     str += '<p><span class=\"valLable\" >Time:</span>'+d+'</p>';\r\n    //     str += '<p><span class=\"valLable\" >Trace: </span>'+msg+'</p>';\r\n    //     str += '<p class=\"botBorder\"></p>';\r\n    // str += '</div>';\r\n    // infoText += str;\r\n    // str = infoText+getSystemInfoStr();\r\n    // if (communicationWin != null && islogPop) {\r\n\t// \tcommunicationWin.addText(str);\r\n\t// }\r\n}\r\n\r\nfunction setTrackData(func,param,paramValue,resultText,result){\r\n    \r\n    storageComms.addFunc(func,param,paramValue,resultText,result);\r\n \t//_data\r\n\t// if (infoText == ''){\r\n    //     infoText += '<h1 class=\"titleText\">'+LaunchConfig.course.author+' Test Report - '+LaunchConfig.course.id+' ['+LaunchConfig.course.version+'] - Start</h1>';\r\n\t// }\r\n    // commCount++;\r\n\t// var d = new Date().toISOString();\r\n    // var str = '<div class=\"data-item data-function-item\">';\r\n    //     str+='<p><span class=\"valLable\" >#'+commCount+'</span> <span class=\"valLable\" >Time:</span>'+d+'</p>';\r\n    //     str+='<p><span class=\"valLable\" >Function: </span>'+func+'</p>';\r\n\r\n    //     if(param!=null && param!=''){\r\n    //         str+='<p><span class=\"valLable\" >Parameter: </span>'+param+'</p>';\r\n    //     }\r\n    //     if(paramValue!=null && paramValue!=''){\r\n    //         str+='<p><span class=\"valLable\" >Parameter Value: </span>'+paramValue+'</p>';\r\n    //     }\r\n    //     str+='<p><span class=\"valLable\" >Return: </span>'+resultText+'</p>';\r\n    //     if(result){\r\n    //         str+='<p><span class=\"valLable\" >Result: </span><span class=\"passResult\" >Success</span></p>';\r\n    //     }else{\r\n    //         str+='<p><span class=\"valLable\" >Result: </span><span class=\"failResult\" >Fail</span></p>';\r\n    //     }\r\n    //     str+='<p class=\"botBorder\"></p>';\r\n    // str+='</div>';\r\n\t// str = infoText+str+getSystemInfoStr();\r\n\t// if (communicationWin != null && islogPop) {\r\n\t// \tcommunicationWin.addText(str);\r\n\t// }\r\n }\r\n\r\n// Launch the engine on document.ready\r\n\r\n(function(window, $, _viewport) {\r\n    $(document).ready(function(){\r\n        // viewport = _viewport;\r\n        \r\n        responsiveUtils = new ResponsiveUtility();\r\n        responsiveUtils.init(_viewport);\r\n\r\n        initFramework();\r\n    });\r\n    \r\n})(window, jQuery, ResponsiveBootstrapToolkit);","var liveEditReq = {\r\n    //    courseDataLoadComplete: false,\r\n        contentDataLoadComplete: false,\r\n        liveEditAllowed: false\r\n    }\r\n    var loadComplete, liveEditAllowed;\r\n    \r\n    //$(document).on(\"courseDataLoadComplete\", function(){\r\n    //    liveEditReq.courseDataLoadComplete = true;\r\n    //    setupLiveEdit();\r\n    //});\r\n    \r\n    $(document).on(\"contentDataLoadComplete\", function(){\r\n        //console.log(\"CONTENTDATALOADCOMPLETE\", liveEditReq.courseDataLoadComplete && liveEditReq.liveEditAllowed)\r\n        liveEditReq.contentDataLoadComplete = true;\r\n        if (!liveEditReq.liveEditAllowed)\r\n            setupLiveEdit();\r\n    //     else {\r\n    //         console.log(\"CONTENTDATALOADCOMPLETE fetching changes\");\r\n    // //        liveEditReq.contentDataLoadComplete = false;\r\n    //         liveEditController.fetchChanges();\r\n    //     }\r\n            \r\n    });\r\n    \r\n    function setupLiveEdit(){\r\n        if (liveEditReq.contentDataLoadComplete && liveEditReq.liveEditAllowed && !liveEditController.initialized){\r\n            //console.log(\"setup\");\r\n    \r\n    //        liveEditReq.contentDataLoadComplete = false;\r\n            liveEditController.init();\r\n            // liveEditController.getCSS();\r\n            // liveEditController.initGUI();\r\n            // liveEditController.clearEdits();\r\n            // liveEditController.attachHandlers();  \r\n            // if (liveEditController.webToken && liveEditController.user)\r\n            //     liveEditController.verifyToken();\r\n            // else \r\n            //     liveEditController.enableEdit(false); \r\n        }\r\n    }\r\n    \r\n    // show live edit?\r\n    if (liveEditConfig.enabled){\r\n    //    var liveEditController = new LiveEditController();\r\n        //console.log(\"enabled\");\r\n        var url = liveEditConfig.rootURL + 'api/liveEditEnabled?courseId=' + LaunchConfig.course.id + '&version=' + LaunchConfig.course.version;\r\n        if (window.location.search.match(/liveedit=true/i))\r\n            url += '&LIVEEDITENABLED=true';\r\n        //console.log(url);\r\n        $.ajax({\r\n            type: 'GET',\r\n            url: url,\r\n            dataType: 'json',    \r\n            success: function(response){\r\n                //console.log(\"LIVEEDITENABLED: \", response);\r\n                if (response.enabled){\r\n                    getLiveEditScript();\r\n                } else {\r\n                    //console.log('live edit script not loaded');\r\n                    liveEditConfig.enabled = false;\r\n                    // alert('Live edit not enabled on this course or version!');\r\n                }    \r\n            },\r\n            error: function(xhr, type){\r\n                //console.log(xhr.responseText, type);\r\n                //console.log('live edit script not loaded');\r\n                liveEditConfig.enabled = false;\r\n            }\r\n        });\r\n      \r\n    }\r\n    \r\n    function getLiveEditScript(){\r\n        $.ajax(\r\n            {\r\n                type: 'GET',\r\n                url: liveEditConfig.rootURL + 'api/liveEditScript?courseId=' + encodeURIComponent(LaunchConfig.course.id) + '&version=' + LaunchConfig.course.version,\r\n                dataType: 'script',\r\n                success: function(script, textStatus){\r\n                    //console.log('live edit script loaded');\r\n                    liveEditReq.liveEditAllowed = true;\r\n                    if (liveEditReq.contentDataLoadComplete)\r\n                        setupLiveEdit();\r\n                }\r\n            });\r\n    }","var CourseUtility = function() {\r\n    var self = this;\r\n}\r\ncourseUtils = new CourseUtility();"]}